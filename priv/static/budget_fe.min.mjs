var c=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}},W=class{static fromArray(t,n){let r=n||new pi;for(let i=t.length-1;i>=0;--i)r=new _r(t[i],r);return r}[Symbol.iterator](){return new Zo(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof pi}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}};function h(e,t){return new _r(e,t)}function l(e,t){return W.fromArray(e,t)}var Zo=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof pi)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}},pi=class extends W{},_r=class extends W{constructor(t,n){super(),this.head=t,this.tail=n}},dr=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return fi(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<n;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let r=this.bitSize%8;if(r){let i=8-r;if(this.rawBuffer[n]>>i!==t.rawBuffer[n]>>i)return!1}}else{for(let i=0;i<n;i++){let s=fi(this.rawBuffer,this.bitOffset,i),o=fi(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let r=this.bitSize%8;if(r){let i=fi(this.rawBuffer,this.bitOffset,n),s=fi(t.rawBuffer,t.bitOffset,n),o=8-r;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(Yu("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Yu("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function fi(e,t,n){if(t===0)return e[n]??0;{let r=e[n]<<t&255,i=e[n+1]>>8-t;return r|i}}var ds=class{constructor(t){this.value=t}},Ku={};function Yu(e,t){Ku[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Ku[e]=!0)}var tn=class e extends c{static isResult(t){return t instanceof e}},$=class extends tn{constructor(t){super(),this[0]=t}isOk(){return!0}},m=class extends tn{constructor(t){super(),this[0]=t}isOk(){return!1}};function O(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!Xu(r)||!Xu(i)||!hp(r,i)||fp(r,i)||pp(r,i)||_p(r,i)||dp(r,i)||$p(r,i)||mp(r,i))return!1;let o=Object.getPrototypeOf(r);if(o!==null&&typeof o.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[u,a]=cp(r);for(let f of u(r))n.push(a(r,f),a(i,f))}return!0}function cp(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function fp(e,t){return e instanceof Date&&(e>t||e<t)}function pp(e,t){return!(e instanceof dr)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function _p(e,t){return Array.isArray(e)&&e.length!==t.length}function dp(e,t){return e instanceof Map&&e.size!==t.size}function $p(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function mp(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Xu(e){return typeof e=="object"&&e!==null}function hp(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function pt(e,t){return t===0?0:e%t}function qe(e,t){return Math.trunc(_i(e,t))}function _i(e,t){return t===0?0:e/t}function D(e,t,n,r,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=n,o.function=r,o.fn=r;for(let u in s)o[u]=s[u];return o}var ue=class extends c{},Oe=class extends c{},ze=class extends c{};var d=class extends c{constructor(t){super(),this[0]=t}},g=class extends c{};function $i(e,t){if(e instanceof d){let n=e[0];return new $(n)}else return new m(t)}function Kt(e){if(e.isOk()){let t=e[0];return new d(t)}else return new g}function Et(e,t){return e instanceof d?e[0]:t}function Q(e,t){if(e instanceof d){let n=e[0];return new d(t(n))}else return new g}function $s(e){return e instanceof d?e[0]:new g}function gp(e,t){return!O(Tt(t,e),new m(void 0))}function Qu(e,t){return gp(t,e)}function Ct(e,t,n){return Zu(t,n,e)}function wp(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=h(i,r)}}}function xp(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return wp(r,l([]));{let i=n.head[0];e=n.tail,t=h(i,r)}}}function el(e){return xp(hi(e),l([]))}function yp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let o=r.head[0],u=r.head[1];e=r.tail,t=s(i,o,u),n=s}}}function mi(e,t,n){return yp(hi(e),t,n)}var $r=class extends c{constructor(t){super(),this[0]=t}},qt=class extends c{constructor(t){super(),this[0]=t}},J=class extends c{},_t=class extends c{};function Op(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1))e=n.tail,t=r+1;else return r}}function tl(e){return Op(e,0)}function mr(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=h(i,r)}}}function T(e){return mr(e,l([]))}function ea(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return!1;if(n.atLeastLength(1)&&O(n.head,r)){let i=n.head;return!0}else e=n.tail,t=r}}function Sp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let o=r.head,u=r.tail,a=i(o)?h(o,s):s;e=u,t=i,n=a}}}function zt(e,t){return Sp(e,t,l([]))}function Ap(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let o=r.head,u=r.tail,a=(()=>{let f=i(o);if(f.isOk()){let p=f[0];return h(p,s)}else return s})();e=u,t=i,n=a}}}function Bt(e,t){return Ap(e,t,l([]))}function jp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let o=r.head;e=r.tail,t=i,n=h(i(o),s)}}}function q(e,t){return jp(e,t,l([]))}function Lp(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=h(i,r)}}}function Xt(e,t){return Lp(T(e),t)}function ms(e,t){return h(t,e)}function Ep(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return T(r);{let i=n.head;e=n.tail,t=mr(i,r)}}}function Nt(e){return Ep(e,l([]))}function rl(e,t){let n=q(e,t);return Nt(n)}function se(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let o=r.head;e=r.tail,t=s(i,o),n=s}}}function Cp(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.hasLength(0))return s;{let a=i.head;e=i.tail,t=o(s,a,u),n=o,r=u+1}}}function nl(e,t,n){return Cp(e,t,n,0)}function hs(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let o=r.head,u=r.tail,a=s(i,o);if(a instanceof $r){let f=a[0];e=u,t=f,n=s}else return a[0]}}}function Ye(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new m(void 0);{let i=n.head,s=n.tail;if(r(i))return new $(i);e=s,t=r}}}function Tp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let o=r.head,u=r.tail;Qu(i,o)?(e=u,t=i,n=s):(e=u,t=Ct(i,o,void 0),n=h(o,s))}}}function ta(e){return Tp(e,ie(),l([]))}function qp(e,t,n,r,i,s){for(;;){let o=e,u=t,a=n,f=r,p=i,_=s,b=h(p,a);if(o.hasLength(0))return f instanceof J?h(T(b),_):h(b,_);{let S=o.head,A=o.tail,X=u(p,S);if(X instanceof ze&&f instanceof _t)e=A,t=u,n=b,r=f,i=S,s=_;else if(X instanceof ue&&f instanceof J)e=A,t=u,n=b,r=f,i=S,s=_;else if(X instanceof Oe&&f instanceof J)e=A,t=u,n=b,r=f,i=S,s=_;else if(X instanceof ze&&f instanceof J){let P=f instanceof J?h(T(b),_):h(b,_);if(A.hasLength(0))return h(l([S]),P);{let le=A.head,Te=A.tail,C=(()=>{let j=u(S,le);return j instanceof ue?new J:j instanceof Oe?new J:new _t})();e=Te,t=u,n=l([S]),r=C,i=le,s=P}}else if(X instanceof ue&&f instanceof _t){let P=f instanceof J?h(T(b),_):h(b,_);if(A.hasLength(0))return h(l([S]),P);{let le=A.head,Te=A.tail,C=(()=>{let j=u(S,le);return j instanceof ue?new J:j instanceof Oe?new J:new _t})();e=Te,t=u,n=l([S]),r=C,i=le,s=P}}else{let P=f instanceof J?h(T(b),_):h(b,_);if(A.hasLength(0))return h(l([S]),P);{let le=A.head,Te=A.tail,C=(()=>{let j=u(S,le);return j instanceof ue?new J:j instanceof Oe?new J:new _t})();e=Te,t=u,n=l([S]),r=C,i=le,s=P}}}}}function zp(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.hasLength(0))return mr(s,u);if(s.hasLength(0))return mr(i,u);{let a=i.head,f=i.tail,p=s.head,_=s.tail,b=o(a,p);b instanceof ue?(e=f,t=s,n=o,r=h(a,u)):b instanceof ze?(e=i,t=_,n=o,r=h(p,u)):(e=i,t=_,n=o,r=h(p,u))}}}function Bp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);if(r.hasLength(1)){let o=r.head;return T(h(T(o),s))}else{let o=r.head,u=r.tail.head,a=r.tail.tail,f=zp(o,u,i,l([]));e=a,t=i,n=h(f,s)}}}function Np(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.hasLength(0))return mr(s,u);if(s.hasLength(0))return mr(i,u);{let a=i.head,f=i.tail,p=s.head,_=s.tail,b=o(a,p);b instanceof ue?(e=i,t=_,n=o,r=h(p,u)):b instanceof ze?(e=f,t=s,n=o,r=h(a,u)):(e=f,t=s,n=o,r=h(a,u))}}}function Ip(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);if(r.hasLength(1)){let o=r.head;return T(h(T(o),s))}else{let o=r.head,u=r.tail.head,a=r.tail.tail,f=Np(o,u,i,l([]));e=a,t=i,n=h(f,s)}}}function Mp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return l([]);if(r.hasLength(1)&&i instanceof J)return r.head;if(r.hasLength(1)&&i instanceof _t){let o=r.head;return T(o)}else i instanceof J?(e=Bp(r,s,l([])),t=new _t,n=s):(e=Ip(r,s,l([])),t=new J,n=s)}}function gs(e,t){if(e.hasLength(0))return l([]);if(e.hasLength(1)){let n=e.head;return l([n])}else{let n=e.head,r=e.tail.head,i=e.tail.tail,s=(()=>{let u=t(n,r);return u instanceof ue?new J:u instanceof Oe?new J:new _t})(),o=qp(i,t,l([n]),s,r,l([]));return Mp(o,new J,t)}}function Fp(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.atLeastLength(1)&&O(i.head[0],s)){let a=i.head[0],f=i.tail;return mr(u,h([a,o],f))}else if(i.atLeastLength(1)){let a=i.head;e=i.tail,t=s,n=o,r=h(a,u)}else return T(h([s,o],u))}}function il(e,t,n){return Fp(e,t,n,l([]))}function ra(e){return!!e.isOk()}function K(e,t){if(e.isOk()){let n=e[0];return new $(t(n))}else{let n=e[0];return new m(n)}}function ys(e,t){if(e.isOk()){let n=e[0];return new $(n)}else{let n=e[0];return new m(t(n))}}function xi(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new m(n)}}function Be(e,t){return xi(e,t)}function Ae(e,t){return e.isOk()?e[0]:t}function na(e,t){return e.isOk()?e[0]:t()}var Qt=class extends c{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}};function Jp(e,t){return ys(e,n=>q(n,t))}function sa(e){return ul(e)}function oa(e){return aa(e)}function la(e){return t=>{if(e.hasLength(0))return new m(l([new Qt("another type",Ne(t),l([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new $(s)}else return la(r)(t)}}}function Gp(e,t){let n=t,r=la(l([ul,o=>K(ua(o),x)])),i=(()=>{let o=r(n);if(o.isOk())return o[0];{let u=l(["<",Ne(n),">"]),a=It(u);return a}})(),s=e;return new Qt(s.expected,s.found,h(i,e.path))}function bi(e,t){return n=>{let r=new Qt("field","nothing",l([]));return xi(ca(n,e),i=>{let o=$i(i,l([r])),u=xi(o,t);return Jp(u,a=>Gp(a,e))})}}var fa=new WeakMap,al=new DataView(new ArrayBuffer(8)),cl=0;function fl(e){let t=fa.get(e);if(t!==void 0)return t;let n=cl++;return cl===2147483647&&(cl=0),fa.set(e,n),n}function pl(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function dl(e){let t=0,n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function _a(e){al.setFloat64(0,e);let t=al.getInt32(0),n=al.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function Hp(e){return dl(e.toString())}function Vp(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return fl(e);if(e instanceof Date)return _a(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+Re(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+Re(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+pl(Re(r),Re(i))|0});else{let r=Object.keys(e);for(let i=0;i<r.length;i++){let s=r[i],o=e[s];n=n+pl(Re(o),dl(s))|0}}return n}function Re(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return _a(e);case"string":return dl(e);case"bigint":return Hp(e);case"object":return Vp(e);case"symbol":return fl(e);case"function":return fl(e);default:return 0}}var $t=5,$l=Math.pow(2,$t),Kp=$l-1,Yp=$l/2,Xp=$l/4,ye=0,dt=1,Ie=2,wr=3,ml={type:Ie,bitmap:0,array:[]};function ki(e,t){return e>>>t&Kp}function ks(e,t){return 1<<ki(e,t)}function Qp(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function hl(e,t){return Qp(e&t-1)}function De(e,t,n){let r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function Zp(e,t,n){let r=e.length,i=new Array(r+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=n;s<r;)i[o++]=e[s++];return i}function _l(e,t){let n=e.length,r=new Array(n-1),i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function da(e,t,n,r,i,s){let o=Re(t);if(o===r)return{type:wr,hash:o,array:[{type:ye,k:t,v:n},{type:ye,k:i,v:s}]};let u={val:!1};return vi(gl(ml,e,o,t,n,u),e,r,i,s,u)}function vi(e,t,n,r,i,s){switch(e.type){case dt:return e_(e,t,n,r,i,s);case Ie:return gl(e,t,n,r,i,s);case wr:return t_(e,t,n,r,i,s)}}function e_(e,t,n,r,i,s){let o=ki(n,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:dt,size:e.size+1,array:De(e.array,o,{type:ye,k:r,v:i})};if(u.type===ye)return O(r,u.k)?i===u.v?e:{type:dt,size:e.size,array:De(e.array,o,{type:ye,k:r,v:i})}:(s.val=!0,{type:dt,size:e.size,array:De(e.array,o,da(t+$t,u.k,u.v,n,r,i))});let a=vi(u,t+$t,n,r,i,s);return a===u?e:{type:dt,size:e.size,array:De(e.array,o,a)}}function gl(e,t,n,r,i,s){let o=ks(n,t),u=hl(e.bitmap,o);if((e.bitmap&o)!==0){let a=e.array[u];if(a.type!==ye){let p=vi(a,t+$t,n,r,i,s);return p===a?e:{type:Ie,bitmap:e.bitmap,array:De(e.array,u,p)}}let f=a.k;return O(r,f)?i===a.v?e:{type:Ie,bitmap:e.bitmap,array:De(e.array,u,{type:ye,k:r,v:i})}:(s.val=!0,{type:Ie,bitmap:e.bitmap,array:De(e.array,u,da(t+$t,f,a.v,n,r,i))})}else{let a=e.array.length;if(a>=Yp){let f=new Array(32),p=ki(n,t);f[p]=gl(ml,t+$t,n,r,i,s);let _=0,b=e.bitmap;for(let S=0;S<32;S++){if((b&1)!==0){let A=e.array[_++];f[S]=A}b=b>>>1}return{type:dt,size:a+1,array:f}}else{let f=Zp(e.array,u,{type:ye,k:r,v:i});return s.val=!0,{type:Ie,bitmap:e.bitmap|o,array:f}}}}function t_(e,t,n,r,i,s){if(n===e.hash){let o=wl(e,r);if(o!==-1)return e.array[o].v===i?e:{type:wr,hash:n,array:De(e.array,o,{type:ye,k:r,v:i})};let u=e.array.length;return s.val=!0,{type:wr,hash:n,array:De(e.array,u,{type:ye,k:r,v:i})}}return vi({type:Ie,bitmap:ks(e.hash,t),array:[e]},t,n,r,i,s)}function wl(e,t){let n=e.array.length;for(let r=0;r<n;r++)if(O(t,e.array[r].k))return r;return-1}function bs(e,t,n,r){switch(e.type){case dt:return r_(e,t,n,r);case Ie:return n_(e,t,n,r);case wr:return i_(e,r)}}function r_(e,t,n,r){let i=ki(n,t),s=e.array[i];if(s!==void 0){if(s.type!==ye)return bs(s,t+$t,n,r);if(O(r,s.k))return s}}function n_(e,t,n,r){let i=ks(n,t);if((e.bitmap&i)===0)return;let s=hl(e.bitmap,i),o=e.array[s];if(o.type!==ye)return bs(o,t+$t,n,r);if(O(r,o.k))return o}function i_(e,t){let n=wl(e,t);if(!(n<0))return e.array[n]}function xl(e,t,n,r){switch(e.type){case dt:return s_(e,t,n,r);case Ie:return o_(e,t,n,r);case wr:return l_(e,r)}}function s_(e,t,n,r){let i=ki(n,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===ye){if(!O(s.k,r))return e}else if(o=xl(s,t+$t,n,r),o===s)return e;if(o===void 0){if(e.size<=Xp){let u=e.array,a=new Array(e.size-1),f=0,p=0,_=0;for(;f<i;){let b=u[f];b!==void 0&&(a[p]=b,_|=1<<f,++p),++f}for(++f;f<u.length;){let b=u[f];b!==void 0&&(a[p]=b,_|=1<<f,++p),++f}return{type:Ie,bitmap:_,array:a}}return{type:dt,size:e.size-1,array:De(e.array,i,o)}}return{type:dt,size:e.size,array:De(e.array,i,o)}}function o_(e,t,n,r){let i=ks(n,t);if((e.bitmap&i)===0)return e;let s=hl(e.bitmap,i),o=e.array[s];if(o.type!==ye){let u=xl(o,t+$t,n,r);return u===o?e:u!==void 0?{type:Ie,bitmap:e.bitmap,array:De(e.array,s,u)}:e.bitmap===i?void 0:{type:Ie,bitmap:e.bitmap^i,array:_l(e.array,s)}}return O(r,o.k)?e.bitmap===i?void 0:{type:Ie,bitmap:e.bitmap^i,array:_l(e.array,s)}:e}function l_(e,t){let n=wl(e,t);if(n<0)return e;if(e.array.length!==1)return{type:wr,hash:e.hash,array:_l(e.array,n)}}function $a(e,t){if(e===void 0)return;let n=e.array,r=n.length;for(let i=0;i<r;i++){let s=n[i];if(s!==void 0){if(s.type===ye){t(s.v,s.k);continue}$a(s,t)}}}var Me=class e{static fromObject(t){let n=Object.keys(t),r=e.new();for(let i=0;i<n.length;i++){let s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=e.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new e(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;let r=bs(this.root,0,Re(t),t);return r===void 0?n:r.v}set(t,n){let r={val:!1},i=this.root===void 0?ml:this.root,s=vi(i,0,Re(t),t,n,r);return s===this.root?this:new e(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let n=xl(this.root,0,Re(t),t);return n===this.root?this:n===void 0?e.new():new e(n,this.size-1)}has(t){return this.root===void 0?!1:bs(this.root,0,Re(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){$a(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+pl(Re(n),Re(r))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((n,r)=>{if(!O(t.get(r,!n),n))throw pa}),!0}catch(n){if(n===pa)return!1;throw n}}},pa=Symbol();var yl=void 0,ma={};function V(e){return e}function je(e){return/^[-+]?(\d+)$/.test(e)?new $(parseInt(e)):new m(yl)}function x(e){return e.toString()}function bl(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function ya(e,t){return e.toString(t).toUpperCase()}function ol(e,t,n){return typeof e.replaceAll<"u"?e.replaceAll(t,n):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}function Mt(e){if(e==="")return 0;let t=vs(e);if(t){let n=0;for(let r of t)n++;return n}else return e.match(/./gsu).length}function hr(e){let t=vs(e);return t?W.fromArray(Array.from(t).map(n=>n.segment)):W.fromArray(e.match(/./gsu))}var ha;function vs(e){if(globalThis.Intl&&Intl.Segmenter)return ha||=new Intl.Segmenter,ha.segment(e)[Symbol.iterator]()}function Os(e){let t,n=vs(e);return n?t=n.next().value?.segment:t=e.match(/./su)?.[0],t?new $([t,e.slice(t.length)]):new m(yl)}function xr(e){return[e.charCodeAt(0)|0,e.slice(1)]}function We(e){return e.toLowerCase()}function ll(e,t){return W.fromArray(e.split(t))}function It(e){let t="";for(let n of e)t=t+n;return t}function kl(e,t,n){if(n<=0||t>=e.length)return"";let r=vs(e);if(r){for(;t-- >0;)r.next();let i="";for(;n-- >0;){let s=r.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+n).join("")}function ae(e,t,n){return e.slice(t,t+n)}function Ss(e,t){return e.startsWith(t)}var ba=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Xm=new RegExp(`^[${ba}]*`),Qm=new RegExp(`[${ba}]*$`);function ka(e){typeof process=="object"&&process.stderr?.write?process.stderr.write(e+`
`):typeof Deno=="object"?Deno.stderr.writeSync(new TextEncoder().encode(e+`
`)):console.log(e)}function ws(e){return Math.floor(e)}function vl(e){return Math.round(e)}function As(e){return Math.trunc(e)}function gi(){let e=Math.random();return e===1?gi():e}function ie(){return Me.new()}function hi(e){return W.fromArray(e.entries())}function Tt(e,t){let n=e.get(t,ma);return n===ma?new m(yl):new $(n)}function Zu(e,t,n){return n.set(e,t)}function Ne(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof tn)return"Result";if(e instanceof W)return"List";if(e instanceof dr)return"BitArray";if(e instanceof Me)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function js(e,t){return u_(e,Ne(t))}function u_(e,t){return new m(W.fromArray([new Qt(e,t,W.fromArray([]))]))}function ul(e){return typeof e=="string"?new $(e):js("String",e)}function ua(e){return Number.isInteger(e)?new $(e):js("Int",e)}function aa(e){return typeof e=="boolean"?new $(e):js("Bool",e)}function ca(e,t){let n=()=>js("Dict",e);if(e instanceof Me||e instanceof WeakMap||e instanceof Map){let r=Tt(e,t);return new $(r.isOk()?new d(r[0]):new g)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?ga(e,t,()=>new $(new g)):ga(e,t,n)}function ga(e,t,n){try{return t in e?new $(new d(e[t])):n()}catch{return n()}}function Ls(e,t){return Number(BigInt(e)&BigInt(t))}function Es(e,t){return Number(BigInt(e)|BigInt(t))}function mt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return a_(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return bl(e);if(Array.isArray(e))return`#(${e.map(mt).join(", ")})`;if(e instanceof W)return __(e);if(e instanceof ds)return d_(e);if(e instanceof dr)return`<<${va(e,"")}>>`;if(e instanceof c)return p_(e);if(e instanceof Me)return c_(e);if(e instanceof Set)return`//js(Set(${[...e].map(mt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return f_(e)}function a_(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];switch(r){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}}return t+='"',t}function c_(e){let t="dict.from_list([",n=!0;return e.forEach((r,i)=>{n||(t=t+", "),t=t+"#("+mt(i)+", "+mt(r)+")",n=!1}),t+"])"}function f_(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${mt(s)}: ${mt(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function p_(e){let t=Object.keys(e).map(n=>{let r=mt(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function __(e){return`[${e.toArray().map(mt).join(", ")}]`}function d_(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function va(e,t){if(e.bitSize===0)return t;for(let n=0;n<e.byteSize-1;n++)t+=e.byteAt(n).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let n=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-n,t+=`:size(${n})`}return t}function m_(e){return-1*e}function sl(e){return e>=0?vl(e):0-vl(m_(e))}function Xe(e){return e>=0?e:e*-1}function Oi(e){return ya(e,16)}function xs(e,t){return e===t?new Oe:e<t?new ue:new ze}function Ol(e,t){return e<t?e:t}function Cs(e,t){return e>t?e:t}function Oa(e,t,n){let i=Ol(e,n);return Cs(i,t)}function rn(e){let t=gi()*e,n=ws(t);return sl(n)}function Sl(e,t){if(t===0)return new m(void 0);{let n=t;return new $(qe(e,n))}}function Ts(e,t,n){let i=e,s=ol(i,t,n);return s}function Le(e,t,n){if(n<0)return"";if(t<0){let s=Mt(e)+t;return s<0?"":kl(e,s,n)}else return kl(e,t,n)}function Ft(e){let n=It(e);return n}function g_(e,t,n){for(;;){let r=e,i=t,s=n;if(i<=0)return s;e=r,t=i-1,n=s+r}}function Al(e,t){return g_(e,t,"")}function Aa(e,t){let n=Mt(t),r=qe(e,n),i=pt(e,n);return Al(t,r)+Le(t,0,i)}function ce(e,t,n){let r=Mt(e),i=t-r;return i<=0?e:Aa(i,n)+e}function ja(e,t,n){let r=Mt(e),i=t-r;return i<=0?e:e+Aa(i,n)}function qs(e,t){for(;;){let n=e,r=t;if(r>0){let s=Os(n);if(s.isOk())e=s[0][1],t=r-1;else return n}else return n}}function yr(e,t){if(t==="")return hr(e);{let r=e,i=ll(r,t);return q(i,V)}}function Ai(e){let t=mt(e);return t}function Ta(e,t){if(e instanceof Me||e instanceof WeakMap||e instanceof Map){let r={},i=e.get(t,r);return i===r?new $(new g):new $(new d(i))}let n=Number.isInteger(t);if(n&&t>=0&&t<8&&e instanceof W){let r=0;for(let i of e){if(r===t)return new $(new d(i));r++}return new m("Indexable")}return n&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new $(new d(e[t])):new $(new g):new m(n?"Indexable":"Dict")}function qa(e,t,n,r,i){if(!(e instanceof W||Array.isArray(e))){let o=new Ut("List",Ne(e),i);return[i,W.fromArray([o])]}let s=[];for(let o of e){let u=t(o),[a,f]=u;if(f instanceof _r){let[p,_]=n(u,r.toString());return[i,_]}s.push(a),r++}return[W.fromArray(s),i]}function za(e){if(e instanceof Me)return new $(e);if(e instanceof Map||e instanceof WeakMap)return new $(Me.fromMap(e));if(e==null)return new m("Dict");if(typeof e!="object")return new m("Dict");let t=Object.getPrototypeOf(e);return t===Object.prototype||t===null?new $(Me.fromObject(e)):new m("Dict")}function Ba(e){return Number.isInteger(e)?new $(e):new m(0)}function Na(e){return typeof e=="string"?new $(e):new m(0)}function Ia(e){return e==null}var Ut=class extends c{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}},Je=class extends c{constructor(t){super(),this.function=t}};function jl(e,t){let n=t.function(e),r=n[0],i=n[1];return i.hasLength(0)?new $(r):new m(i)}function be(e){return new Je(t=>[e,l([])])}function b_(e,t){return new Je(n=>{let r=e.function(n),i=r[0],s=r[1];return[t(i),s]})}function k_(e,t,n){for(;;){let r=e,i=t,s=n;if(s.hasLength(0))return i;{let o=s.head,u=s.tail,a=o.function(r),f=a;if(a[1].hasLength(0))return f;e=r,t=i,n=u}}}function v_(e,t){return new Je(n=>{let r=e.function(n),i=r;return r[1].hasLength(0)?i:k_(n,i,t)})}function Ma(e){return new Je(t=>{if(Ia(t))return[new g,l([])];{let r=e.function(t),i=r[0],s=r[1];return[new d(i),s]}})}function Fa(e,t){return l([new Ut(e,Ne(t),l([]))])}function Ua(e,t,n){let r=n(e);return r.isOk()?[r[0],l([])]:[r[0],l([new Ut(t,Ne(e),l([]))])]}function O_(e){return O(!0,e)?[!0,l([])]:O(!1,e)?[!1,l([])]:[!1,Fa("Bool",e)]}function S_(e){return Ua(e,"Int",Ba)}var Pa=new Je(O_),Pt=new Je(S_);function A_(e){return Ua(e,"String",Na)}var G=new Je(A_);function j_(e,t,n,r,i){let s=r(t);if(s[1].hasLength(0)){let o=s[0],u=i(n);if(u[1].hasLength(0)){let a=u[0];return[Ct(e[0],o,a),e[1]]}else{let a=u[1];return nn([ie(),a],l(["values"]))}}else{let o=s[1];return nn([ie(),o],l(["keys"]))}}function Wa(e,t){return new Je(n=>{let r=za(n);if(r.isOk()){let i=r[0];return mi(i,[ie(),l([])],(s,o,u)=>s[1].hasLength(0)?j_(s,o,u,e.function,t.function):s)}else return[ie(),Fa("Dict",n)]})}function sn(e){return new Je(t=>qa(t,e.function,(n,r)=>nn(n,l([r])),0,l([])))}function nn(e,t){let n=v_(G,l([b_(Pt,x)])),r=q(t,s=>{let o=s,u=jl(o,n);return u.isOk()?u[0]:"<"+Ne(o)+">"}),i=q(e[1],s=>{let o=s;return new Ut(o.expected,o.found,Xt(r,s.path))});return[e[0],i]}function L_(e,t,n,r,i){for(;;){let s=e,o=t,u=n,a=r,f=i;if(s.hasLength(0)){let p=u(a);return nn(p,T(o))}else{let p=s.head,_=s.tail,b=Ta(a,p);if(b.isOk()&&b[0]instanceof d){let S=b[0][0];e=_,t=h(p,o),n=u,r=S,i=f}else{if(b.isOk()&&b[0]instanceof g)return f(a,h(p,o));{let S=b[0],P=[u(a)[0],l([new Ut(S,Ne(a),l([]))])];return nn(P,T(o))}}}}}function E_(e,t,n){return new Je(r=>{let i=L_(e,l([]),t.function,r,(p,_)=>{let A=[t.function(p)[0],l([new Ut("Field","Nothing",l([]))])];return nn(A,T(_))}),s=i[0],o=i[1],u=n(s).function(r),a=u[0],f=u[1];return[a,Xt(o,f)]})}function z(e,t,n){return E_(l([e]),t,n)}function El(e){return JSON.stringify(e)}function Ra(e){return Object.fromEntries(e)}function Da(){return null}function Ja(e){try{let t=JSON.parse(e);return new $(t)}catch(t){return new m(C_(t,e))}}function C_(e,t){return T_(e)?new Bs:q_(e,t)}function T_(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function q_(e,t){let n=[z_,B_,I_,N_];for(let r of n){let i=r(e,t);if(i)return i}return new Zt("",0)}function z_(e){let n=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!n)return null;let r=zs(n[1]);return new Zt(r,-1)}function B_(e){let n=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!n)return null;let r=zs(n[1]),i=Number(n[2]);return new Zt(r,i)}function N_(e,t){let r=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!r)return null;let i=Number(r[2]),s=Number(r[3]),o=M_(i,s,t),u=zs(t[o]);return new Zt(u,o)}function I_(e){let n=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!n)return null;let r=zs(n[2]);return new Zt(r,0)}function zs(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function M_(e,t,n){if(e===1)return t-1;let r=1,i=0;return n.split("").find((s,o)=>(s===`
`&&(r+=1),r===e?(i=o+t,!0):!1)),i}var Bs=class extends c{},Zt=class extends c{constructor(t){super(),this[0]=t}};var Cl=class extends c{constructor(t){super(),this[0]=t}};function F_(e,t){return Be(Ja(e),n=>{let r=jl(n,t);return ys(r,i=>new Cl(i))})}function Ga(e,t){return F_(e,t)}function on(e){return El(e)}function ee(e){return e}function ql(e){return e}function Wt(e){return e}function U_(){return Da()}function Ha(e,t){if(e instanceof d){let n=e[0];return t(n)}else return U_()}function Ee(e){return Ra(e)}function ln(e,t,n){return e?t:n()}function zl(e){let n=Ai(e);return ka(n),e}function Ka(e,t){return e.lastIndex=0,e.test(t)}function Ya(e,t){try{let n="gu";return t.case_insensitive&&(n+="i"),t.multi_line&&(n+="m"),new $(new RegExp(e,n))}catch(n){let r=(n.columnNumber||0)|0;return new m(new Ns(n.message,r))}}var Ns=class extends c{constructor(t,n){super(),this.error=t,this.byte_index=n}},Is=class extends c{constructor(t,n){super(),this.case_insensitive=t,this.multi_line=n}};function Xa(e,t){return Ya(e,t)}function Bl(e,t){return Ka(e,t)}var Ms=class extends c{constructor(t){super(),this.dict=t}};function Za(){return new Ms(ie())}function Nl(e,t){let n=e.dict,r=Tt(n,t);return ra(r)}var R_=void 0;function ec(e){let t=se(e,ie(),(n,r)=>Ct(n,r,R_));return new Ms(t)}var Fs=class extends c{constructor(t){super(),this.run=t}},Ce=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},er=class extends c{},kr=class extends c{constructor(t){super(),this[0]=t}},tr=class extends c{},Us=class extends c{constructor(t,n,r){super(),this.span=t,this.lexeme=n,this.value=r}},un=class extends c{constructor(t,n,r,i){super(),this.row_start=t,this.col_start=n,this.row_end=r,this.col_end=i}},Ps=class extends c{constructor(t,n,r){super(),this.row=t,this.col=n,this.lexeme=r}},Ml=class extends c{constructor(t){super(),this.matchers=t}},br=class extends c{constructor(t,n,r,i,s){super(),this.source=t,this.tokens=n,this.current=r,this.row=i,this.col=s}};function Ws(e){return new Ml(t=>e)}function Fl(e){return new Fs((t,n,r)=>{let i=e(n,r),s=K(i,o=>new Ce(o,t));return Ae(s,new tr)})}function Rs(e){return new Fs(e)}function tc(e,t,n,r){return hs(r,new tr,(i,s)=>{let o=s.run(e,t,n);if(o instanceof Ce){let u=o;return new qt(u)}else{if(o instanceof er)return new qt(new er);if(o instanceof kr){let u=o;return new qt(u)}else return new $r(new tr)}})}function D_(e,t){return t===`
`?1:e+1}function J_(e,t){return t===`
`?e+1:e}function G_(e,t,n){for(;;){let r=e,i=t,s=n,o=r.matchers(i),u=s.source,a=s.current;if(u.hasLength(0)&&a[2]==="")return new $(T(s.tokens));if(u.hasLength(0)){let f=a[0],p=a[1],_=a[2],b=tc(i,_,"",o);if(b instanceof tr)return new m(new Ps(f,p,_));if(b instanceof er)return new m(new Ps(f,p,_));if(b instanceof kr)return new $(T(s.tokens));{let S=b[0],A=new un(f,p,s.row,s.col),X=new Us(A,_,S);return new $(T(h(X,s.tokens)))}}else{let f=u.head,p=u.tail,_=a[0],b=a[1],S=a[2],A=J_(s.row,f),X=D_(s.col,f),P=tc(i,S,f,o);if(P instanceof Ce){let le=P[0],Te=P[1],C=new un(_,b,s.row,s.col),j=new Us(C,S,le);e=r,t=Te,n=new br(p,h(j,s.tokens),[s.row,s.col,f],A,X)}else if(P instanceof er)e=r,t=i,n=new br(p,s.tokens,[_,b,S+f],A,X);else if(P instanceof kr){let le=P[0];e=r,t=le,n=new br(p,s.tokens,[s.row,s.col,f],A,X)}else e=r,t=i,n=new br(p,s.tokens,[_,b,S+f],A,X)}}}function Ds(e,t){let n=hr(e),r=new br(n,l([]),[1,1,""],1,1);return(i=>G_(t,void 0,i))(r)}function Pl(e){return e.toArray()}function rc(e){return e.length}function nc(e,t){return e[t]}function H_(e,t){return t>=0&&t<rc(e)}function ic(e,t){return H_(e,t)?new $(nc(e,t)):new m(void 0)}var ht=class extends c{constructor(t){super(),this[0]=t}},fe=class extends c{constructor(t,n,r){super(),this[0]=t,this[1]=n,this[2]=r}},Fe=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},Js=class extends c{constructor(t,n,r,i){super(),this.src=t,this.idx=n,this.pos=r,this.ctx=i}},oe=class extends c{constructor(t){super(),this[0]=t}};var Gs=class extends c{},Hs=class extends c{constructor(t,n){super(),this[0]=t,this.got=n}},Wl=class extends c{constructor(t){super(),this[0]=t}},Rl=class extends c{constructor(t,n,r){super(),this.pos=t,this.problem=n,this.context=r}},an=class extends c{},Ei=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},Dl=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}};function cn(e,t){let n=t[0];return n(e)}function Vs(e){let t=ic(e.src,e.idx);if(t.isOk()){let n=t[0].span,r=t[0].value;return[new d(r),(()=>{let i=e;return new Js(i.src,e.idx+1,n,i.ctx)})()]}else return[new g,e]}function Y(e){return new ht(t=>new fe(new oe(!1),e,t))}function Qe(e){return Y(e)}function Jl(e){return new ht(t=>{let n=cn(t,e);if(n instanceof fe){let r=n[1],i=n[2];return new fe(new oe(!1),r,i)}else{let r=n[1];return new Fe(new oe(!1),r)}})}function sc(e,t){let n=e[0],r=t[0];return new oe(n||r)}function N(e,t){return new ht(n=>{let r=cn(n,e);if(r instanceof fe){let i=r[0],s=r[1],o=r[2],u=cn(o,t(s));if(u instanceof fe){let a=u[0],f=u[1],p=u[2];return new fe(sc(i,a),f,p)}else{let a=u[0],f=u[1];return new Fe(sc(i,a),f)}}else{let i=r[0],s=r[1];return new Fe(i,s)}})}function Ge(e,t){return N(e,t)}function Gl(e,t){return N(e,n=>Y(t(n)))}function Ti(e){return new ht(t=>{let n=Vs(t),r=n[0],i=n[1],s=Q(r,e);if(r instanceof d&&s instanceof d&&s[0]){let o=r[0];return cn(i,N(Ti(e),u=>Y(h(o,u))))}else return r instanceof d&&s instanceof d&&!s[0]?new fe(new oe(!1),l([]),t):new fe(new oe(!1),l([]),t)})}function rr(e,t){return t===0?Y(l([])):N(e,n=>N(rr(e,t-1),r=>Y(h(n,r))))}function Ci(e,t){return new Ei(new an,new Rl(e.pos,t,e.ctx))}function gt(e){return new ht(t=>{let n=Vs(t);if(n[0]instanceof d&&O(e,n[0][0])){let r=n[0][0],i=n[1];return new fe(new oe(!0),void 0,i)}else if(n[0]instanceof d){let r=n[0][0],i=n[1];return new Fe(new oe(!1),Ci(i,new Hs(Ai(e),r)))}else{let r=n[1];return new Fe(new oe(!1),Ci(r,new Gs))}})}function qi(){return new ht(e=>{let t=Vs(e);if(t[0]instanceof d){let n=t[0][0],r=t[1];return new Fe(new oe(!1),Ci(r,new Wl(n)))}else return new fe(new oe(!1),void 0,e)})}function nr(e,t){return new ht(n=>{let r=Vs(n),i=r[0],s=r[1],o=Q(i,t);if(i instanceof d&&o instanceof d&&o[0]){let u=i[0];return new fe(new oe(!1),u,s)}else if(i instanceof d&&o instanceof d&&!o[0]){let u=i[0];return new Fe(new oe(!1),Ci(s,new Hs(e,u)))}else return new Fe(new oe(!1),Ci(s,new Gs))})}function oc(e,t){return N(nr(e,t),n=>N(Ti(t),r=>Y(h(n,r))))}function lc(e,t){for(;;){let n=e,r=t;if(n instanceof an)return r;if(n instanceof Ei&&n[0]instanceof an){let i=n[1];return h(i,r)}else if(n instanceof Ei){let i=n[0],s=n[1];e=i,t=h(s,r)}else{let i=n[0],s=n[1];e=i,t=lc(s,r)}}}function Ks(e,t){let n=new Js(Pl(e),0,new un(1,1,1,1),l([])),r=cn(n,t);if(r instanceof fe){let i=r[1];return new $(i)}else{let i=r[1];return new m(lc(i,l([])))}}function K_(e,t){if(e instanceof fe){let n=e[0],r=e[1],i=e[2];return new fe(n,r,i)}else{let n=e[0],r=e[1];return new Fe(n,new Dl(t,r))}}function He(e){return new ht(t=>{let n=new Fe(new oe(!1),new an);return hs(e,n,(r,i)=>{if(r instanceof fe)return new qt(r);if(r instanceof Fe&&r[0]instanceof oe&&r[0][0])return new qt(r);{let s=r[1],o=cn(t,i),u=K_(o,s);return new $r(u)}})})}function uc(e){return He(l([Gl(e,t=>new d(t)),Y(new g)]))}var Rt=class extends c{constructor(t){super(),this[0]=t}},zi=class extends c{},ir=class extends c{},Bi=class extends c{},Hl=class extends c{constructor(t){super(),this[0]=t}};function cc(){let e=new Is(!1,!0),t=Xa("^[0-9]+$",e);if(!t.isOk())throw D("let_assert","rada/date/parse",14,"lexer","Pattern match failed, no pattern matched the value.",{value:t});let n=t[0],r=i=>Bl(n,i);return Ws(l([Rs((i,s,o)=>s===""?new kr(i):s==="W"?new Ce(new zi,i):s==="T"?new Ce(new Bi,i):s==="-"?new Ce(new ir,i):r(s)?new Ce(new Rt(s),i):new Ce(new Hl(s),i))]))}var Ii=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},Dt=class extends c{constructor(t){super(),this[0]=t}},vr=class extends c{constructor(t){super(),this[0]=t}},Mi=class extends c{},fn=class extends c{},Fi=class extends c{constructor(t){super(),this[0]=t}};function X_(e){return e instanceof vr}function Q_(e){return t=>t instanceof vr?t[0]===e:!1}function fc(e){return e instanceof Fi}function Vl(e){return e instanceof Mi}function Ni(e){if(e.hasLength(0))return"";{let t=e.head,n=e.tail;return t instanceof vr?t[0]+Ni(n):t instanceof Mi||t instanceof fn?"'"+Ni(n):t[0]+Ni(n)}}function Z_(){return N(nr("Expecting an Alpha token",X_),e=>{if(!(e instanceof vr))throw D("let_assert","rada/date/pattern",170,"","Pattern match failed, no pattern matched the value.",{value:e});let t=e[0];return N(Ti(Q_(t)),n=>Y(new Ii(t,tl(n)+1)))})}function ed(){let e=gt(new fn);return Ge(e,t=>Qe(new Dt("'")))}function td(){return N(nr("Expecting an Text token",fc),e=>N(Ti(fc),t=>{let n=(()=>{let r=q(h(e,t),i=>{if(!(i instanceof Fi))throw D("let_assert","rada/date/pattern",216,"","Pattern match failed, no pattern matched the value.",{value:i});return i[0]});return Ft(r)})();return Y(new Dt(n))}))}function Kl(e){return He(l([N(oc("Expecting a non-Quote",t=>!Vl(t)),t=>{let n=Ni(t);return Kl(e+n)}),(()=>{let t=gt(new fn);return Ge(t,n=>Kl(e+"'"))})(),Qe(e)]))}function rd(){return N(nr("Expecting an Quote",Vl),e=>N(Kl(""),t=>N(He(l([(()=>{let n=nr("Expecting an Quote",Vl);return Gl(n,r=>{})})(),qi()])),n=>Y(new Dt(t)))))}function nd(e){return se(e,l([]),(t,n)=>{if(n instanceof Dt&&t.atLeastLength(1)&&t.head instanceof Dt){let r=n[0],i=t.head[0],s=t.tail;return h(new Dt(r+i),s)}else return h(n,t)})}function pc(e){return He(l([(()=>{let t=He(l([Z_(),td(),ed(),rd()]));return Ge(t,n=>pc(h(n,e)))})(),Qe(nd(e))]))}function _c(e){let t=(()=>{let o=hr("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return ec(o)})(),n=s=>Nl(t,s),r=Ws(l([Fl((s,o)=>n(s)?new $(new vr(s)):new m(void 0)),Rs((s,o,u)=>o==="'"?u==="'"?new er:new Ce(new Mi,s):o==="''"?new Ce(new fn,s):new tr),Fl((s,o)=>s===""?new m(void 0):new $(new Fi(s)))])),i=Ds(e,r);if(i.isOk()){let s=i[0],o=Ks(s,pc(l([])));return Ae(o,l([new Dt(e)]))}else return l([])}function dc(){let e=new Date;return[e.getFullYear(),e.getMonth()+1,e.getDate()]}var ke=class extends c{},Ze=class extends c{},et=class extends c{},tt=class extends c{},rt=class extends c{},nt=class extends c{},it=class extends c{},st=class extends c{},ot=class extends c{},lt=class extends c{},ut=class extends c{},Ar=class extends c{},Zs=class extends c{},eo=class extends c{},to=class extends c{},ro=class extends c{},no=class extends c{},io=class extends c{},Xl=class extends c{},at=class extends c{constructor(t){super(),this[0]=t}},Ql=class extends c{constructor(t,n){super(),this.year=t,this.ordinal_day=n}},Zl=class extends c{constructor(t,n,r){super(),this.year=t,this.month=n,this.day=r}},eu=class extends c{constructor(t,n,r){super(),this.week_year=t,this.week_number=n,this.weekday=r}},tu=class extends c{constructor(t,n,r,i,s){super(),this.month_name=t,this.month_name_short=n,this.weekday_name=r,this.weekday_name_short=i,this.day_with_suffix=s}},so=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},oo=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},lo=class extends c{constructor(t){super(),this[0]=t}},ru=class extends c{},Ri=class extends c{},nu=class extends c{};function kc(e){return new at(e)}function vc(e){return e[0]}function $c(e,t){return Le(e,-1*t,t)}function Pi(e,t){return Le(e,0,t)}function iu(e){return e instanceof ke?"January":e instanceof Ze?"February":e instanceof et?"March":e instanceof tt?"April":e instanceof rt?"May":e instanceof nt?"June":e instanceof it?"July":e instanceof st?"August":e instanceof ot?"September":e instanceof lt?"October":e instanceof ut?"November":"December"}function mc(e){return e instanceof Zs?"Monday":e instanceof eo?"Tuesday":e instanceof to?"Wednesday":e instanceof ro?"Thursday":e instanceof no?"Friday":e instanceof io?"Saturday":"Sunday"}function co(){return nr("Expecting digit",e=>e instanceof Rt)}function sd(){return N(uc(gt(new ir)),e=>{let t=(()=>{let r=Q(e,i=>"-");return Et(r,"")})();return N((()=>{let n=co();return rr(n,4)})(),n=>{let r=(()=>{let o=q(n,u=>{if(!(u instanceof Rt))throw D("let_assert","rada/date",1090,"","Pattern match failed, no pattern matched the value.",{value:u});return u[0]});return Ft(o)})(),i=je(t+r);if(!i.isOk())throw D("let_assert","rada/date",1095,"","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0];return Y(s)})})}function od(){return N((()=>{let e=co();return rr(e,3)})(),e=>{let t=(()=>{let i=q(e,s=>{if(!(s instanceof Rt))throw D("let_assert","rada/date",1108,"","Pattern match failed, no pattern matched the value.",{value:s});return s[0]});return Ft(i)})(),n=je(t);if(!n.isOk())throw D("let_assert","rada/date",1113,"","Pattern match failed, no pattern matched the value.",{value:n});let r=n[0];return Y(r)})}function hc(){return N(od(),e=>Y(new lo(e)))}function su(){return N((()=>{let e=co();return rr(e,2)})(),e=>{let t=(()=>{let i=q(e,s=>{if(!(s instanceof Rt))throw D("let_assert","rada/date",1126,"","Pattern match failed, no pattern matched the value.",{value:s});return s[0]});return Ft(i)})(),n=je(t);if(!n.isOk())throw D("let_assert","rada/date",1131,"","Pattern match failed, no pattern matched the value.",{value:n});let r=n[0];return Y(r)})}function ld(){return N((()=>{let e=co();return rr(e,1)})(),e=>{if(!e.hasLength(1)||!(e.head instanceof Rt))throw D("let_assert","rada/date",1142,"","Pattern match failed, no pattern matched the value.",{value:e});let t=e.head[0],n=je(t);if(!n.isOk())throw D("let_assert","rada/date",1144,"","Pattern match failed, no pattern matched the value.",{value:n});let r=n[0];return Y(r)})}function ou(e,t){let n=e[0],r=t[0];return xs(n,r)}function wt(e){return e instanceof ke?1:e instanceof Ze?2:e instanceof et?3:e instanceof tt?4:e instanceof rt?5:e instanceof nt?6:e instanceof it?7:e instanceof st?8:e instanceof ot?9:e instanceof lt?10:e instanceof ut?11:12}function ud(e){return qe(wt(e)+2,3)}function Ve(e){let t=Cs(1,e);return t===1?new ke:t===2?new Ze:t===3?new et:t===4?new tt:t===5?new rt:t===6?new nt:t===7?new it:t===8?new st:t===9?new ot:t===10?new lt:t===11?new ut:new Ar}function Oc(e){let t=Cs(1,e);return t===1?new Zs:t===2?new eo:t===3?new to:t===4?new ro:t===5?new no:t===6?new io:new Xl}function gc(e,t){let n=e<0?"-":"",r=(()=>{let s=Xe(e),o=x(s);return ce(o,t,"0")})();return n+r}function Qs(e,t){return(e>0&&t<0||e<0&&t>0)&&pt(e,t)!==0?qe(e,t)-1:qe(e,t)}function $n(e){let t=e-1,n=Qs(t,4)-Qs(t,100)+Qs(t,400);return 365*t+n}function ad(e){return new at($n(e)+1)}function Or(e,t){let n=pt(e,t);return n>0&&t<0||n<0&&t>0?n+t:n}function fo(e){return Or(e,4)===0&&Or(e,100)!==0||Or(e,400)===0}function _n(e){let t=e[0],n=Or(t,7);return n===0?7:n}function Sc(e){let t=$n(e)+4;return t-_n(new at(t))}function cd(e){let t=_n(ad(e));return t===4||t===3&&fo(e)}function pn(e){let n=_n(e);return Oc(n)}function fd(e){let t=Or(e,100),n=t<20?t:Or(t,10),r=Ol(n,4);return r===1?"st":r===2?"nd":r===3?"rd":"th"}function Ac(e){return x(e)+fd(e)}function pd(){return new tu(iu,e=>{let n=iu(e);return Pi(n,3)},mc,e=>{let n=mc(e);return Pi(n,3)},Ac)}function uo(e,t){return t instanceof ke?31:t instanceof Ze?fo(e)?29:28:t instanceof et?31:t instanceof tt?30:t instanceof rt?31:t instanceof nt?30:t instanceof it||t instanceof st?31:t instanceof ot?30:t instanceof lt?31:t instanceof ut?30:31}function _d(e,t,n){for(;;){let r=e,i=t,s=n,o=uo(r,i),u=wt(i);if(u<12&&s>o)e=r,t=Ve(u+1),n=s-o;else return new Zl(r,i,s)}}function Ys(e,t){return[Qs(e,t),Or(e,t)]}function sr(e){let t=e[0],n=Ys(t,146097),r=n[0],i=n[1],s=Ys(i,36524),o=s[0],u=s[1],a=Ys(u,1461),f=a[0],p=a[1],_=Ys(p,365),b=_[0],S=_[1],A=S===0?0:1;return r*400+o*100+f*4+b+A}function jc(e){let t=e[0],n=sr(e);return new Ql(n,t-$n(n))}function lu(e){let t=jc(e);return _d(t.year,new ke,t.ordinal_day)}function Lc(e){let t=e[0],n=_n(e),r=sr(new at(t+(4-n))),i=Sc(r)+1;return new eu(r,1+qe(t-i,7),Oc(n))}function Yl(e){return jc(e).ordinal_day}function Sr(e){return lu(e).month}function ao(e){let n=Sr(e);return wt(n)}function Ui(e){let n=Sr(e);return ud(n)}function Wi(e){return lu(e).day}function wc(e){return Lc(e).week_year}function xc(e){return Lc(e).week_number}function dd(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(o==="y")if(u===2){let f=sr(i),p=x(f),_=ce(p,2,"0");return $c(_,2)}else{let f=sr(i);return gc(f,u)}else if(o==="Y")if(u===2){let f=wc(i),p=x(f),_=ce(p,2,"0");return $c(_,2)}else{let f=wc(i);return gc(f,u)}else if(o==="Q")if(u===1){let f=Ui(i);return x(f)}else if(u===2){let f=Ui(i);return x(f)}else if(u===3){let f=Ui(i),p=x(f);return(_=>"Q"+_)(p)}else if(u===4){let f=Ui(i);return Ac(f)}else if(u===5){let f=Ui(i);return x(f)}else return"";else if(o==="M")if(u===1){let f=ao(i);return x(f)}else if(u===2){let f=ao(i),p=x(f);return ce(p,2,"0")}else if(u===3){let f=Sr(i);return s.month_name_short(f)}else if(u===4){let f=Sr(i);return s.month_name(f)}else if(u===5){let f=Sr(i),p=s.month_name_short(f);return Pi(p,1)}else return"";else if(o==="w")if(u===1){let f=xc(i);return x(f)}else if(u===2){let f=xc(i),p=x(f);return ce(p,2,"0")}else return"";else if(o==="d")if(u===1){let f=Wi(i);return x(f)}else if(u===2){let f=Wi(i),p=x(f);return ce(p,2,"0")}else if(u===3){let f=Wi(i);return s.day_with_suffix(f)}else return"";else if(o==="D")if(u===1){let f=Yl(i);return x(f)}else if(u===2){let f=Yl(i),p=x(f);return ce(p,2,"0")}else if(u===3){let f=Yl(i),p=x(f);return ce(p,3,"0")}else return"";else if(o==="E")if(u===1){let f=pn(i);return s.weekday_name_short(f)}else if(u===2){let f=pn(i);return s.weekday_name_short(f)}else if(u===3){let f=pn(i);return s.weekday_name_short(f)}else if(u===4){let f=pn(i);return s.weekday_name(f)}else if(u===5){let f=pn(i),p=s.weekday_name_short(f);return Pi(p,1)}else if(u===6){let f=pn(i),p=s.weekday_name_short(f);return Pi(p,2)}else return"";else if(o==="e")if(u===1){let f=_n(i);return x(f)}else if(u===2){let f=_n(i);return x(f)}else e=i,t=s,n="E",r=u;else return""}}function $d(e,t,n){return se(t,"",(r,i)=>{if(i instanceof Ii){let s=i[0],o=i[1];return dd(n,e,s,o)+r}else return i[0]+r})}function md(e,t,n){let r=(()=>{let s=_c(n);return T(s)})();return $d(t,r,e)}function uu(e,t){return md(e,pd(),t)}function Xs(e){let t=lu(new at(e)),n=12*(t.year-1)+(wt(t.month)-1),r=_i(t.day,100);return n+r}function Ec(e,t,n){let r=t[0],i=n[0];if(e instanceof ru){let s=Xs(i)-Xs(r),o=As(s),u=Sl(o,12);return Ae(u,0)}else if(e instanceof Ri){let s=Xs(i)-Xs(r);return As(s)}else if(e instanceof nu){let s=Sl(i-r,7);return Ae(s,0)}else return i-r}function dn(e,t,n){return t<=e&&e<=n}function hd(e,t){let n=fo(e)?366:365;return dn(t,1,n)?new $(new at($n(e)+t)):new m("Invalid ordinal date: "+("ordinal-day "+x(t)+" is out of range")+(" (1 to "+x(n)+")")+(" for "+x(e))+("; received (year "+x(e)+", ordinal-day "+x(t)+")"))}function gd(e,t,n){let r=cd(e)?53:52,i=dn(t,1,r),s=dn(n,1,7);return i?i&&!s?new m("Invalid week date: "+("weekday "+x(n)+" is out of range")+" (1 to 7)"+("; received (year "+x(e)+", week "+x(t)+", weekday "+x(n)+")")):new $(new at(Sc(e)+(t-1)*7+n)):new m("Invalid week date: "+("week "+x(t)+" is out of range")+(" (1 to "+x(r)+")")+(" for "+x(e))+("; received (year "+x(e)+", week "+x(t)+", weekday "+x(n)+")"))}function Cc(e,t,n){let r=e[0],i=t[0],s=n[0];return dn(r,i,s)}function au(e){return e?1:0}function yc(e){return N(su(),t=>{let n=au(e);return N(He(l([(()=>{let r=rr(gt(new ir),n);return Ge(r,i=>su())})(),(()=>{let r=qi();return Ge(r,i=>Qe(1))})()])),r=>Y(new so(t,r)))})}function bc(e){return N(gt(new zi),t=>N(su(),n=>{let r=au(e);return N(He(l([(()=>{let i=rr(gt(new ir),r);return Ge(i,s=>ld())})(),Qe(1)])),i=>Y(new oo(n,i)))}))}function wd(){return He(l([(()=>{let e=gt(new ir);return Ge(e,t=>He(l([Jl(hc()),yc(!0),bc(!0)])))})(),Jl(yc(!1)),hc(),bc(!1),Qe(new lo(1))]))}function Tc(e,t){let n=au(fo(e));return t instanceof ke?0:t instanceof Ze?31:t instanceof et?59+n:t instanceof tt?90+n:t instanceof rt?120+n:t instanceof nt?151+n:t instanceof it?181+n:t instanceof st?212+n:t instanceof ot?243+n:t instanceof lt?273+n:t instanceof ut?304+n:334+n}function jr(e,t,n){return new at($n(e)+Tc(e,t)+Oa(n,1,uo(e,t)))}function xd(e,t,n){let r=dn(t,1,12),i=dn(n,1,uo(e,Ve(t)));return r?r&&!i?new m("Invalid date: "+("day "+x(n)+" is out of range")+(" (1 to "+x(uo(e,Ve(t)))+")")+(" for "+(()=>{let o=Ve(t);return iu(o)})())+(t===2&&n===29?" ("+x(e)+" is not a leap year)":"")+("; received (year "+x(e)+", month "+x(t)+", day "+x(n)+")")):new $(new at($n(e)+Tc(e,Ve(t))+n)):new m("Invalid date: "+("month "+x(t)+" is out of range")+" (1 to 12)"+("; received (year "+x(e)+", month "+x(t)+", day "+x(n)+")"))}function yd(e,t){if(t instanceof so){let n=t[0],r=t[1];return xd(e,n,r)}else if(t instanceof oo){let n=t[0],r=t[1];return gd(e,n,r)}else{let n=t[0];return hd(e,n)}}function bd(){return N(sd(),e=>N(wd(),t=>Y(yd(e,t))))}function qc(e){let t=Ds(e,cc());if(!t.isOk())throw D("let_assert","rada/date",949,"from_iso_string","Pattern match failed, no pattern matched the value.",{value:t});let n=t[0],r=Ks(n,(()=>{let i=bd();return Ge(i,s=>He(l([(()=>{let o=qi();return Ge(o,u=>Qe(s))})(),(()=>{let o=gt(new Bi);return Ge(o,u=>Qe(new m("Expected a date only, not a date and time")))})(),Qe(new m("Expected a date only"))])))})());if(r.isOk()&&r[0].isOk()){let i=r[0][0];return new $(i)}else if(r.isOk()&&!r[0].isOk()){let i=r[0][0];return new m(i)}else return new m("Expected a date in ISO 8601 format")}function Jt(){let e=dc(),t=e[0],n=e[1],r=e[2];return jr(t,Ve(n),r)}var Ji=class extends c{constructor(t,n){super(),this.id=t,this.name=n}},cu=class extends c{constructor(t,n,r){super(),this.id=t,this.name=n,this.position=r}},xt=class extends c{constructor(t,n,r,i,s){super(),this.id=t,this.name=n,this.target=r,this.inflow=i,this.group_id=s}},Ke=class extends c{constructor(t){super(),this.target=t}},ve=class extends c{constructor(t,n){super(),this.target=t,this.date=n}},Gi=class extends c{constructor(t,n){super(),this.month=t,this.year=n}},Hi=class extends c{constructor(t,n,r,i){super(),this.id=t,this.amount=n,this.category_id=r,this.date=i}},po=class extends c{constructor(t,n,r,i){super(),this.id=t,this.amount=n,this.category_id=r,this.date=i}},or=class extends c{constructor(t,n){super(),this.year=t,this.month=n}},Lr=class extends c{constructor(t,n,r,i,s,o){super(),this.id=t,this.date=n,this.payee=r,this.category_id=i,this.value=s,this.user_id=o}},I=class extends c{constructor(t){super(),this.value=t}};function lr(){return z("id",G,e=>be(e))}function zc(){return z("id",G,e=>z("name",G,t=>be(new Ji(e,t))))}function Bc(){return z("id",G,e=>z("name",G,t=>z("position",Pt,n=>be(new cu(e,t,n)))))}function kd(){return z("month",Pt,e=>z("year",Pt,t=>be(new Gi(e,t))))}function Nc(e){return Ee(l([["year",Wt(e.year)],["month",(()=>{let t=e.month,n=wt(t);return Wt(n)})()]]))}function vd(e){return Ee(l([["month",Wt(e.month)],["year",Wt(e.year)]]))}function Vi(e){return Ee(l([["money_value",Wt(e.value)]]))}function Ic(e){return Ee(l([["id",ee(e.id)],["amount",Vi(e.amount)],["category_id",ee(e.category_id)],["date",Nc(e.date)]]))}function Mc(e){return Ee(l([["amount",Vi(e.amount)],["category_id",ee(e.category_id)],["date",Nc(e.date)]]))}function Od(e){if(e instanceof Ke){let t=e.target;return Ee(l([["type",ee("monthly")],["money",Vi(t)]]))}else{let t=e.target,n=e.date;return Ee(l([["type",ee("custom")],["money",Vi(t)],["date",vd(n)]]))}}function Fc(e){return Ee(l([["id",ee(e.id)],["name",ee(e.name)],["target",Ha(e.target,Od)],["inflow",ql(e.inflow)],["group_id",ee(e.group_id)]]))}function Sd(){return z("month",Pt,t=>z("year",Pt,n=>be(new or(n,Ve(t)))))}function fu(e){return Ee(l([["id",ee(e.id)],["date",(()=>{let t=vc(e.date);return Wt(t)})()],["payee",ee(e.payee)],["category_id",ee(e.category_id)],["value",Vi(e.value)],["user_id",ee(e.user_id)]]))}function _o(){return z("money_value",Pt,t=>be(new I(t)))}function Ad(){let e=z("money",_o(),r=>be(new Ke(r))),t=z("money",_o(),r=>z("date",kd(),i=>be(new ve(r,i))));return z("type",G,r=>r==="monthly"?e:t)}function pu(){return z("id",G,e=>z("name",G,t=>z("target",Ma(Ad()),n=>z("inflow",Pa,r=>z("group_id",G,i=>be(new xt(e,t,n,r,i)))))))}function Uc(){return Wa(G,pu())}function Pc(){return z("id",G,t=>z("amount",_o(),n=>z("category_id",G,r=>z("date",Sd(),i=>be(new Hi(t,n,r,i))))))}function _u(){return z("id",G,e=>z("date",Pt,t=>z("payee",G,n=>z("category_id",G,r=>z("value",_o(),i=>z("user_id",G,s=>be(new Lr(e,kc(t),n,r,i,s))))))))}function Er(e,t){return new I(e.value+t.value)}function Wc(e){let t=wt(e.month);return t===1?new or(e.year-1,new Ar):new or(e.year,Ve(t-1))}function du(e){let t=wt(e.month);return t===12?new or(e.year+1,new ke):new or(e.year,Ve(t+1))}function $o(){let e=Jt(),t=26,n=new or(sr(e),Sr(e));return Wi(e)>t?du(n):n}function Rc(e,t){return new I(qe(e.value,t))}function $u(e){return new I(e*100)}function Ki(e){let t=Le(e,0,1)==="-"?[-1,Le(e,1,Mt(e))]:[1,e],n=t[0],r=t[1],i=(()=>{let s=Ts(r,",",".");return yr(s,".")})();if(i.atLeastLength(2)){let s=i.head,o=i.tail.head,u=je(s),a=(()=>{let p=ja(o,2,"0"),_=Le(p,0,2);return je(_)})();if(u.isOk()&&a.isOk()){let f=u[0],p=a[0];return new I(n*(f*100+p))}else return new I(0)}else if(i.atLeastLength(1)){let s=i.head,o=je(s);if(o.isOk()){let u=o[0];return new I(n*u*100)}else return new I(0)}else return new I(0)}function Cr(e){let t=(()=>{let n=e.value;return Xe(n)})();return(()=>{let n=qe(t,100);return x(n)})()+"."+(()=>{let n=pt(t,100);return x(n)})()}function Dc(e){let t=(()=>{let n=e.value;return Xe(n)})();return"\u20AC"+(()=>{let n=qe(t,100);return x(n)})()+"."+(()=>{let n=pt(t,100);return x(n)})()}function jd(e){return e.value<0?"-":""}function ur(e){return jd(e)+"\u20AC"+Cr(e)}function Jc(e){return e.value===0}var Yi=class extends c{constructor(t){super(),this.all=t}};function Gc(e){return new Yi(l([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function yt(e){return Gc((t,n,r,i)=>e(t))}function y(){return new Yi(l([]))}function mo(e){return new Yi(se(e,l([]),(t,n)=>{let r=n.all;return Xt(t,r)}))}var mn=class extends c{constructor(t){super(),this.content=t}},te=class extends c{constructor(t,n,r,i,s,o,u){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}},Xi=class extends c{constructor(t){super(),this.subtree=t}},qr=class extends c{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}},Qi=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}};function qd(e){if(e instanceof qr)return new m(void 0);{let t=e[0],n=e[1],r=qs(t,2);return new $([r,n])}}function zd(e,t,n){return nl(e,t,(r,i,s)=>{let o=n+"-"+x(s);return Hc(i,r,o)})}function Hc(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof mn)return i;if(r instanceof Xi){let o=r.subtree;e=o(),t=i,n=s}else{let o=r.attrs,u=r.children,a=se(o,i,(f,p)=>{let _=qd(p);if(_.isOk()){let b=_[0][0],S=_[0][1];return Ct(f,s+"-"+b,S)}else return f});return zd(u,a,s)}}}function Vc(e){return Hc(e,ie(),"0")}function $e(e,t){return new qr(e,t,!1)}function Bd(e,t){return new qr(e,t,!0)}function Yc(e,t){return new Qi("on"+e,t)}function B(e){return $e("style",se(e,"",(t,n)=>{let r=n[0],i=n[1];return t+r+":"+i+";"}))}function w(e){return $e("class",e)}function bt(e){return $e("id",e)}function Xc(e){return $e("role",e)}function re(e){return $e("type",e)}function me(e){return $e("value",e)}function Qc(e){return Bd("checked",e)}function he(e){return $e("placeholder",e)}function Zc(e){return $e("for",e)}function Zi(e){return $e("href",e)}function ge(e,t,n){return e==="area"?new te("","",e,t,l([]),!1,!0):e==="base"?new te("","",e,t,l([]),!1,!0):e==="br"?new te("","",e,t,l([]),!1,!0):e==="col"?new te("","",e,t,l([]),!1,!0):e==="embed"?new te("","",e,t,l([]),!1,!0):e==="hr"?new te("","",e,t,l([]),!1,!0):e==="img"?new te("","",e,t,l([]),!1,!0):e==="input"?new te("","",e,t,l([]),!1,!0):e==="link"?new te("","",e,t,l([]),!1,!0):e==="meta"?new te("","",e,t,l([]),!1,!0):e==="param"?new te("","",e,t,l([]),!1,!0):e==="source"?new te("","",e,t,l([]),!1,!0):e==="track"?new te("","",e,t,l([]),!1,!0):e==="wbr"?new te("","",e,t,l([]),!1,!0):new te("","",e,t,n,!1,!1)}function M(e){return new mn(e)}var ho=class extends c{constructor(t){super(),this[0]=t}},go=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},wo=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}};function tf(e){return O(e.created,ie())&&O(e.removed,Za())&&O(e.updated,ie())}var xo=class extends c{constructor(t){super(),this[0]=t}},yo=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},es=class extends c{constructor(t){super(),this[0]=t}},kt=class extends c{constructor(t){super(),this[0]=t}},ts=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},bo=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}};var rs=class extends c{},ko=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},vo=class extends c{constructor(t){super(),this[0]=t}},Oo=class extends c{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function gu(e,t,n){let r,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:u}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),r??=s;else{let a=document.createTextNode(o.content);u.replaceChild(a,s),r??=a}else{let a=document.createTextNode(o.content);u.appendChild(a),r??=a}else if(o.tag!==void 0){let a=Md({prev:s,next:o,dispatch:n,stack:i});s?s!==a&&u.replaceChild(a,s):u.appendChild(a),r??=a}}return r}function Md({prev:e,next:t,dispatch:n,stack:r}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(ns.has(o))u=ns.get(o);else{let C=new Map;ns.set(o,C),u=C}let a=s?new Set(u.keys()):null,f=s?new Set(Array.from(e.attributes,C=>C.name)):null,p=null,_=null,b=null;if(s&&t.tag==="textarea"){let C=t.children[Symbol.iterator]().next().value?.content;C!==void 0&&(o.value=C)}let S=[];for(let C of t.attrs){let j=C[0],ne=C[1];if(C.as_property)o[j]!==ne&&(o[j]=ne),s&&f.delete(j);else if(j.startsWith("on")){let ft=j.slice(2),Qo=n(ne,ft==="input");u.has(ft)||o.addEventListener(ft,is),u.set(ft,Qo),s&&a.delete(ft)}else if(j.startsWith("data-lustre-on-")){let ft=j.slice(15),Qo=n(Fd);u.has(ft)||o.addEventListener(ft,is),u.set(ft,Qo),o.setAttribute(j,ne),s&&(a.delete(ft),f.delete(j))}else j.startsWith("delegate:data-")||j.startsWith("delegate:aria-")?(o.setAttribute(j,ne),S.push([j.slice(10),ne])):j==="class"?p=p===null?ne:p+" "+ne:j==="style"?_=_===null?ne:_+ne:j==="dangerous-unescaped-html"?b=ne:(o.getAttribute(j)!==ne&&o.setAttribute(j,ne),(j==="value"||j==="selected")&&(o[j]=ne),s&&f.delete(j))}if(p!==null&&(o.setAttribute("class",p),s&&f.delete("class")),_!==null&&(o.setAttribute("style",_),s&&f.delete("style")),s){for(let C of f)o.removeAttribute(C);for(let C of a)u.delete(C),o.removeEventListener(C,is)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let C of o.assignedElements())for(let[j,ne]of S)C.hasAttribute(j)||C.setAttribute(j,ne)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(b!==null)return o.innerHTML=b,o;let A=o.firstChild,X=null,P=null,le=null,Te=So(t).next().value;if(s&&Te!==void 0&&Te.key!==void 0&&Te.key!==""){X=new Set,P=rf(e),le=rf(t);for(let C of So(t))A=Ud(A,C,o,r,le,P,X)}else for(let C of So(t))r.unshift({prev:A,next:C,parent:o}),A=A?.nextSibling;for(;A;){let C=A.nextSibling;o.removeChild(A),A=C}return o}var ns=new WeakMap;function is(e){let t=e.currentTarget;if(!ns.has(t)){t.removeEventListener(e.type,is);return}let n=ns.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,is);return}n.get(e.type)(e)}function Fd(e){let t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:n,data:i.reduce((s,o)=>{let u=o.split(".");for(let a=0,f=s,p=e;a<u.length;a++)a===u.length-1?f[u[a]]=p[u[a]]:(f[u[a]]??={},p=p[u[a]],f=f[u[a]]);return s},{data:r})}}function rf(e){let t=new Map;if(e)for(let n of So(e)){let r=n?.key||n?.getAttribute?.("data-lustre-key");r&&t.set(r,n)}return t}function Ud(e,t,n,r,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let a=e.nextSibling;n.removeChild(e),e=a}if(s.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!u&&e!==null){let a=document.createTextNode("");return n.insertBefore(a,e),r.unshift({prev:a,next:t,parent:n}),e}return!u||u===e?(r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e):(n.insertBefore(u,e),r.unshift({prev:u,next:t,parent:n}),e)}function*So(e){for(let t of e.children)yield*nf(t)}function*nf(e){e.subtree!==void 0?yield*nf(e.subtree()):yield e}var wu=class e{static start({init:t,update:n,view:r},i,s){if(!ss())return new m(new os);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new m(new Ao(i));let u=new e(o,t(s),n,r);return new $(a=>u.send(a))}constructor(t,[n,r],i,s){this.root=t,this.#e=n,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(r.all.toArray(),!0),0)}root;send(t){if(t instanceof es){if(t[0]instanceof Oo){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let n=this.#r(this.#e),r=(s,o=!1)=>u=>{let a=s(u);a instanceof $&&this.send(new kt(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));gu(i,n,r)}}else if(t instanceof kt){let n=t[0],r=t[1]??!1;this.#i.push(n),r?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof ts){let n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof rs)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let n=this.#r(this.#e),r=(s,o=!1)=>u=>{let a=s(u);a instanceof $&&this.send(new kt(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));gu(i,n,r)}#o(t=[]){for(;this.#i.length>0;){let n=this.#i.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;){let n=t.shift(),r=u=>this.send(new kt(u)),i=(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),s=()=>{},o=this.root;n({dispatch:r,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},sf=wu.start;var xu=class e{static start({init:t,update:n,view:r,on_attribute_change:i},s){let o=new e(t(s),n,r,i);return new $(u=>o.send(u))}constructor([t,n],r,i,s){this.#e=t,this.#s=r,this.#i=i,this.#t=i(t),this.#u=s,this.#n=new Map,this.#o=Vc(this.#t),this.#l(n.all.toArray())}send(t){if(t instanceof xo){for(let n of t[0]){let r=this.#u.get(n[0]);if(!r)continue;let i=r(n[1]);i instanceof m||this.#r.push(i)}this.#l()}else if(t instanceof yo)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof es))if(t instanceof kt)this.#r.push(t[0]),this.#l();else if(t instanceof ts){let n=new go(t[0],t[1]);for(let[r,i]of this.#n)i(n)}else if(t instanceof bo){let n=this.#o.get(t[0]);if(!n)return;let r=n(t[1]);if(r instanceof m)return;this.#r.push(r[0]),this.#l()}else if(t instanceof ko){let n=el(this.#u),r=new wo(n,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](r)}else t instanceof vo&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#u;#l(t=[]){this.#a(t);let n=this.#i(this.#e),r=elements(this.#t,n);if(!tf(r)){let i=new ho(r);for(let[s,o]of this.#n)o(i)}this.#t=n,this.#o=r.handlers}#a(t=[]){for(;this.#r.length>0;){let n=this.#r.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;)t.shift()({dispatch:u=>this.send(new kt(u)),emit:(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#a(t)}},Pd=xu.start,ss=()=>globalThis.window&&window.document;var yu=class extends c{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=i}};var Ao=class extends c{constructor(t){super(),this.selector=t}},os=class extends c{};function of(e,t,n){return new yu(e,t,n,new g)}function lf(e,t,n){return ln(!ss(),new m(new os),()=>sf(e,t,n))}var L=class extends c{constructor(t,n,r,i,s,o,u){super(),this.scheme=t,this.userinfo=n,this.host=r,this.port=i,this.path=s,this.query=o,this.fragment=u}};function Dd(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Ot(e,t){return new $((()=>{let n=t;return new L(n.scheme,n.userinfo,n.host,n.port,n.path,n.query,new d(e))})())}function Jd(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ot(a,o)}else if(s.startsWith("#")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(_.scheme,_.userinfo,_.host,_.port,_.path,new d(f),_.fragment)})();return Ot(a,p)}else{if(s==="")return new $((()=>{let a=o;return new L(a.scheme,a.userinfo,a.host,a.port,a.path,new d(i),a.fragment)})());{let f=xr(s)[1];e=i,t=f,n=o,r=u+1}}}}function ar(e,t){return Jd(e,e,t,0)}function Gd(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s.startsWith("?")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(_.scheme,_.userinfo,_.host,_.port,f,_.query,_.fragment)})();return ar(a,p)}else if(s.startsWith("#")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(_.scheme,_.userinfo,_.host,_.port,f,_.query,_.fragment)})();return Ot(a,p)}else{if(s==="")return new $((()=>{let a=o;return new L(a.scheme,a.userinfo,a.host,a.port,i,a.query,a.fragment)})());{let f=xr(s)[1];e=i,t=f,n=o,r=u+1}}}}function gn(e,t){return Gd(e,e,t,0)}function vt(e,t,n){for(;;){let r=e,i=t,s=n;if(r.startsWith("0"))e=r.slice(1),t=i,n=s*10;else if(r.startsWith("1"))e=r.slice(1),t=i,n=s*10+1;else if(r.startsWith("2"))e=r.slice(1),t=i,n=s*10+2;else if(r.startsWith("3"))e=r.slice(1),t=i,n=s*10+3;else if(r.startsWith("4"))e=r.slice(1),t=i,n=s*10+4;else if(r.startsWith("5"))e=r.slice(1),t=i,n=s*10+5;else if(r.startsWith("6"))e=r.slice(1),t=i,n=s*10+6;else if(r.startsWith("7"))e=r.slice(1),t=i,n=s*10+7;else if(r.startsWith("8"))e=r.slice(1),t=i,n=s*10+8;else if(r.startsWith("9"))e=r.slice(1),t=i,n=s*10+9;else if(r.startsWith("?")){let o=r.slice(1),u=(()=>{let a=i;return new L(a.scheme,a.userinfo,a.host,new d(s),a.path,a.query,a.fragment)})();return ar(o,u)}else if(r.startsWith("#")){let o=r.slice(1),u=(()=>{let a=i;return new L(a.scheme,a.userinfo,a.host,new d(s),a.path,a.query,a.fragment)})();return Ot(o,u)}else if(r.startsWith("/")){let o=(()=>{let u=i;return new L(u.scheme,u.userinfo,u.host,new d(s),u.path,u.query,u.fragment)})();return gn(r,o)}else return r===""?new $((()=>{let o=i;return new L(o.scheme,o.userinfo,o.host,new d(s),o.path,o.query,o.fragment)})()):new m(void 0)}}function jo(e,t){if(e.startsWith(":0")){let n=e.slice(2);return vt(n,t,0)}else if(e.startsWith(":1")){let n=e.slice(2);return vt(n,t,1)}else if(e.startsWith(":2")){let n=e.slice(2);return vt(n,t,2)}else if(e.startsWith(":3")){let n=e.slice(2);return vt(n,t,3)}else if(e.startsWith(":4")){let n=e.slice(2);return vt(n,t,4)}else if(e.startsWith(":5")){let n=e.slice(2);return vt(n,t,5)}else if(e.startsWith(":6")){let n=e.slice(2);return vt(n,t,6)}else if(e.startsWith(":7")){let n=e.slice(2);return vt(n,t,7)}else if(e.startsWith(":8")){let n=e.slice(2);return vt(n,t,8)}else if(e.startsWith(":9")){let n=e.slice(2);return vt(n,t,9)}else{if(e.startsWith(":"))return new m(void 0);if(e.startsWith("?")){let n=e.slice(1);return ar(n,t)}else if(e.startsWith("#")){let n=e.slice(1);return Ot(n,t)}else return e.startsWith("/")?gn(e,t):e===""?new $(t):new m(void 0)}}function af(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s==="")return new $((()=>{let a=o;return new L(a.scheme,a.userinfo,new d(i),a.port,a.path,a.query,a.fragment)})());if(s.startsWith(":")){let a=ae(i,0,u),f=(()=>{let p=o;return new L(p.scheme,p.userinfo,new d(a),p.port,p.path,p.query,p.fragment)})();return jo(s,f)}else if(s.startsWith("/")){let a=ae(i,0,u),f=(()=>{let p=o;return new L(p.scheme,p.userinfo,new d(a),p.port,p.path,p.query,p.fragment)})();return gn(s,f)}else if(s.startsWith("?")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(_.scheme,_.userinfo,new d(f),_.port,_.path,_.query,_.fragment)})();return ar(a,p)}else if(s.startsWith("#")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(_.scheme,_.userinfo,new d(f),_.port,_.path,_.query,_.fragment)})();return Ot(a,p)}else{let f=xr(s)[1];e=i,t=f,n=o,r=u+1}}}function Hd(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s==="")return new $((()=>{let a=o;return new L(a.scheme,a.userinfo,new d(s),a.port,a.path,a.query,a.fragment)})());if(s.startsWith("]")&&u===0){let a=s.slice(1);return jo(a,o)}else if(s.startsWith("]")){let a=s.slice(1),f=ae(i,0,u+1),p=(()=>{let _=o;return new L(_.scheme,_.userinfo,new d(f),_.port,_.path,_.query,_.fragment)})();return jo(a,p)}else{if(s.startsWith("/")&&u===0)return gn(s,o);if(s.startsWith("/")){let a=ae(i,0,u),f=(()=>{let p=o;return new L(p.scheme,p.userinfo,new d(a),p.port,p.path,p.query,p.fragment)})();return gn(s,f)}else if(s.startsWith("?")&&u===0){let a=s.slice(1);return ar(a,o)}else if(s.startsWith("?")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(_.scheme,_.userinfo,new d(f),_.port,_.path,_.query,_.fragment)})();return ar(a,p)}else if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ot(a,o)}else if(s.startsWith("#")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(_.scheme,_.userinfo,new d(f),_.port,_.path,_.query,_.fragment)})();return Ot(a,p)}else{let a=xr(s),f=a[0],p=a[1];if(Dd(f))e=i,t=p,n=o,r=u+1;else return af(i,i,o,0)}}}}function Vd(e,t){return Hd(e,e,t,0)}function Kd(e,t){return af(e,e,t,0)}function hn(e,t){if(e.startsWith("["))return Vd(e,t);if(e.startsWith(":")){let n=(()=>{let r=t;return new L(r.scheme,r.userinfo,new d(""),r.port,r.path,r.query,r.fragment)})();return jo(e,n)}else return e===""?new $((()=>{let n=t;return new L(n.scheme,n.userinfo,new d(""),n.port,n.path,n.query,n.fragment)})()):Kd(e,t)}function Yd(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s.startsWith("@")&&u===0){let a=s.slice(1);return hn(a,o)}else if(s.startsWith("@")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(_.scheme,new d(f),_.host,_.port,_.path,_.query,_.fragment)})();return hn(a,p)}else{if(s==="")return hn(i,o);if(s.startsWith("/"))return hn(i,o);if(s.startsWith("?"))return hn(i,o);if(s.startsWith("#"))return hn(i,o);{let f=xr(s)[1];e=i,t=f,n=o,r=u+1}}}}function Xd(e,t){return Yd(e,e,t,0)}function bu(e,t){if(e==="//")return new $((()=>{let n=t;return new L(n.scheme,n.userinfo,new d(""),n.port,n.path,n.query,n.fragment)})());if(e.startsWith("//")){let n=e.slice(2);return Xd(n,t)}else return gn(e,t)}function Qd(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s.startsWith("/")&&u===0)return bu(s,o);if(s.startsWith("/")){let a=ae(i,0,u),f=(()=>{let p=o;return new L(new d(We(a)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment)})();return bu(s,f)}else if(s.startsWith("?")&&u===0){let a=s.slice(1);return ar(a,o)}else if(s.startsWith("?")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(new d(We(f)),_.userinfo,_.host,_.port,_.path,_.query,_.fragment)})();return ar(a,p)}else if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ot(a,o)}else if(s.startsWith("#")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(new d(We(f)),_.userinfo,_.host,_.port,_.path,_.query,_.fragment)})();return Ot(a,p)}else{if(s.startsWith(":")&&u===0)return new m(void 0);if(s.startsWith(":")){let a=s.slice(1),f=ae(i,0,u),p=(()=>{let _=o;return new L(new d(We(f)),_.userinfo,_.host,_.port,_.path,_.query,_.fragment)})();return bu(a,p)}else{if(s==="")return new $((()=>{let a=o;return new L(a.scheme,a.userinfo,a.host,a.port,i,a.query,a.fragment)})());{let f=xr(s)[1];e=i,t=f,n=o,r=u+1}}}}}function Zd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return T(r);{let i=n.head,s=n.tail,o=i===""||i==="."?r:i===".."&&r.hasLength(0)?l([]):i===".."&&r.atLeastLength(1)?r.tail:h(i,r);e=s,t=o}}}function e$(e){return Zd(e,l([]))}function ku(e){return e$(yr(e,"/"))}function vu(e){let t=(()=>{let u=e.fragment;if(u instanceof d){let a=u[0];return l(["#",a])}else return l([])})(),n=(()=>{let u=e.query;if(u instanceof d){let a=u[0];return h("?",h(a,t))}else return t})(),r=h(e.path,n),i=(()=>{let u=e.host,a=Ss(e.path,"/");if(u instanceof d&&!a&&u[0]!==""){let f=u[0];return h("/",r)}else return r})(),s=(()=>{let u=e.host,a=e.port;if(u instanceof d&&a instanceof d){let f=a[0];return h(":",h(x(f),i))}else return i})(),o=(()=>{let u=e.scheme,a=e.userinfo,f=e.host;if(u instanceof d&&a instanceof d&&f instanceof d){let p=u[0],_=a[0],b=f[0];return h(p,h("://",h(_,h("@",h(b,s)))))}else if(u instanceof d&&a instanceof g&&f instanceof d){let p=u[0],_=f[0];return h(p,h("://",h(_,s)))}else if(u instanceof d&&a instanceof d&&f instanceof g){let p=u[0];return h(p,h(":",s))}else if(u instanceof d&&a instanceof g&&f instanceof g){let p=u[0];return h(p,h(":",s))}else if(u instanceof g&&a instanceof g&&f instanceof d){let p=f[0];return h("//",h(p,s))}else return s})();return Ft(o)}var t$=new L(new g,new g,new g,new g,"",new g,new g);function cf(e){return Qd(e,e,t$,0)}var r$={handle_external_links:!1,handle_internal_links:!0},pf=window?.location?.href,Su=()=>pf?new $(Ou(new URL(pf))):new m(void 0),Au=(e,t=r$)=>{document.addEventListener("click",n=>{let r=_f(n.target);if(r)try{let i=new URL(r.href),s=Ou(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(n.preventDefault(),o||(window.history.pushState({},"",r.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",n=>{n.preventDefault();let r=new URL(window.location.href),i=Ou(r);window.requestAnimationFrame(()=>{r.hash&&document.getElementById(r.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:n})=>{e(n)}),window.addEventListener("modem-replace",({detail:n})=>{e(n)})};var _f=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:_f(e.parentElement),Ou=e=>new L(e.protocol?new d(e.protocol.slice(0,-1)):new g,new g,e.hostname?new d(e.hostname):new g,e.port?new d(Number(e.port)):new g,e.pathname,e.search?new d(e.search.slice(1)):new g,e.hash?new d(e.hash.slice(1)):new g);function df(e){return yt(t=>ln(!ss(),void 0,()=>Au(n=>{let i=e(n);return t(i)})))}var wn=class extends c{},xn=class extends c{},Lo=class extends c{},Gt=class extends c{},zr=class extends c{},Eo=class extends c{},Co=class extends c{},To=class extends c{},qo=class extends c{};var zo=class extends c{},ls=class extends c{};function $f(e){return e instanceof Co?"connect":e instanceof zr?"delete":e instanceof wn?"get":e instanceof Lo?"head":e instanceof To?"options":e instanceof qo?"patch":e instanceof xn?"post":e instanceof Gt?"put":e instanceof Eo?"trace":e[0]}function mf(e){return e instanceof zo?"http":"https"}function hf(e){let t=We(e);return t==="http"?new $(new zo):t==="https"?new $(new ls):new m(void 0)}var Ue=class extends c{constructor(t,n,r,i,s,o,u,a){super(),this.method=t,this.headers=n,this.body=r,this.scheme=i,this.host=s,this.port=o,this.path=u,this.query=a}};function wf(e){return new L(new d(mf(e.scheme)),new g,new d(e.host),e.port,e.path,e.query,new g)}function l$(e){return Be((()=>{let t=e.scheme,n=Et(t,"");return hf(n)})(),t=>Be((()=>{let n=e.host;return $i(n,void 0)})(),n=>{let r=new Ue(new wn,l([]),"",t,n,e.port,e.path,e.query);return new $(r)}))}function yn(e,t,n){let r=il(e.headers,We(t),n),i=e;return new Ue(i.method,r,i.body,i.scheme,i.host,i.port,i.path,i.query)}function bn(e,t){let n=e.method,r=e.headers,i=e.scheme,s=e.host,o=e.port,u=e.path,a=e.query;return new Ue(n,r,t,i,s,o,u,a)}function xf(e,t){let n=e;return new Ue(t,n.headers,n.body,n.scheme,n.host,n.port,n.path,n.query)}function St(e){let n=cf(e);return Be(n,l$)}function u$(e){return Le(e,0,8)+"-"+Le(e,8,4)+"-"+Le(e,12,4)+"-"+Le(e,16,4)+"-"+Le(e,20,12)}function bf(){let e=(()=>{let s=rn(4294967295),o=Oi(s);return ce(o,8,"0")})(),t=(()=>{let s=rn(4294967295),o=Ls(s,4294905855),u=Es(o,16384),a=Oi(u);return ce(a,8,"0")})(),n=(()=>{let s=rn(4294967295),o=Ls(s,1073741823),u=Es(o,2147483648),a=Oi(u);return ce(a,8,"0")})(),r=(()=>{let s=rn(4294967295),o=Oi(s);return ce(o,8,"0")})(),i=e+t+n+r;return u$(i)}var Ht=class extends c{constructor(t,n,r){super(),this.status=t,this.headers=n,this.body=r}};var kn=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function No(e){return Promise.resolve(kn.wrap(e))}function kf(e,t){return e.then(n=>t(kn.unwrap(n)))}function Io(e,t){return e.then(n=>kn.wrap(t(kn.unwrap(n))))}function ju(e,t){return e.catch(n=>t(n))}function vf(e,t){return Io(e,r=>(t(r),r))}function Mo(e,t){return kf(e,r=>{if(r.isOk()){let i=r[0];return t(i)}else{let i=r[0];return No(new m(i))}})}async function Sf(e){try{return new $(await fetch(e))}catch(t){return new m(new Fo(t.toString()))}}function Af(e){return new Ht(e.status,W.fromArray([...e.headers]),e)}function jf(e){let t=vu(wf(e)),n=$f(e.method).toUpperCase(),r={headers:f$(e.headers),method:n};return n!=="GET"&&n!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function f$(e){let t=new globalThis.Headers;for(let[n,r]of e)t.append(n.toLowerCase(),r);return t}async function Lu(e){let t;try{t=await e.body.text()}catch{return new m(new Uo)}return new $(e.withFields({body:t}))}var Fo=class extends c{constructor(t){super(),this[0]=t}},Uo=class extends c{};function Lf(e){let n=jf(e),r=Sf(n);return Mo(r,i=>No(new $(Af(i))))}var Po=class extends c{constructor(t){super(),this[0]=t}},Eu=class extends c{constructor(t){super(),this[0]=t}},Cu=class extends c{constructor(t){super(),this[0]=t}},Wo=class extends c{},Tu=class extends c{},qu=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},zu=class extends c{},Bu=class extends c{constructor(t){super(),this.run=t}};function Nu(e,t,n){let r=Lf(e),i=Mo(r,Lu),s=Io(i,u=>{if(u.isOk()){let a=u[0];return t.run(new $(a))}else return t.run(new m(new Wo))}),o=ju(s,u=>t.run(new m(new Wo)));vf(o,n)}function Br(e,t){return yt(n=>{let r=St(e);if(r.isOk()){let i=r[0];return Nu(i,t,n)}else return n(t.run(new m(new Po(e))))})}function us(e,t,n){return yt(r=>{let i=St(e);if(i.isOk()){let o=i[0],u=xf(o,new xn),a=yn(u,"Content-Type","application/json"),f=bn(a,on(t));return Nu(f,n,r)}else return r(n.run(new m(new Po(e))))})}function Nr(e,t){return yt(n=>Nu(e,t,n))}function _$(e){if(e instanceof Ht&&200<=e.status&&e.status<=299){let t=e.status,n=e.body;return new $(n)}else{if(e instanceof Ht&&e.status===401)return new m(new zu);if(e instanceof Ht&&e.status===404)return new m(new Tu);if(e instanceof Ht&&e.status===500){let t=e.body;return new m(new Eu(t))}else{let t=e.status,n=e.body;return new m(new qu(t,n))}}}function pe(e,t){return new Bu(n=>{let i=Be(n,_$),s=Be(i,o=>{let u=Ga(o,e);if(u.isOk()){let a=u[0];return new $(a)}else{let a=u[0];return new m(new Cu(a))}});return t(s)})}var ct=class extends c{},Ir=class extends c{},Ro=class extends c{},Sn=class extends c{constructor(t){super(),this.route=t}},An=class extends c{constructor(t,n,r){super(),this.users=t,this.cycle=n,this.initial_route=r}},Mr=class extends c{constructor(t){super(),this.id=t}},Fr=class extends c{constructor(t){super(),this.cats=t}},Ur=class extends c{constructor(t){super(),this.trans=t}},Pr=class extends c{constructor(t){super(),this.trans=t}},Wr=class extends c{constructor(t){super(),this.a=t}},cr=class extends c{constructor(t){super(),this.c=t}},jn=class extends c{constructor(t){super(),this.u=t}},Ln=class extends c{constructor(t){super(),this.group_id=t}},En=class extends c{constructor(t){super(),this.cat_name=t}},Cn=class extends c{constructor(t){super(),this.group_id=t}},Rr=class extends c{constructor(t){super(),this.c=t}},Tn=class extends c{},qn=class extends c{constructor(t){super(),this.date=t}},zn=class extends c{constructor(t){super(),this.payee=t}},Bn=class extends c{constructor(t){super(),this.cat=t}},Nn=class extends c{constructor(t){super(),this.amount=t}},In=class extends c{constructor(t){super(),this.is_inflow=t}},Dr=class extends c{constructor(t){super(),this.c=t}},Mn=class extends c{constructor(t){super(),this.c=t}},Fn=class extends c{constructor(t){super(),this.c=t}},Un=class extends c{constructor(t){super(),this.c=t}},Jr=class extends c{constructor(t){super(),this.amount=t}},Gr=class extends c{constructor(t){super(),this.is_monthly=t}},Pn=class extends c{constructor(t){super(),this.date=t}},fr=class extends c{constructor(t){super(),this.a=t}},Wn=class extends c{constructor(t){super(),this.t=t}},Rn=class extends c{constructor(t,n){super(),this.t=t,this.category_name=n}},Dn=class extends c{},Jn=class extends c{constructor(t){super(),this.t_id=t}},Hr=class extends c{constructor(t){super(),this.a=t}},Vr=class extends c{constructor(t){super(),this.a=t}},Gn=class extends c{constructor(t){super(),this.p=t}},Hn=class extends c{constructor(t){super(),this.d=t}},Vn=class extends c{constructor(t){super(),this.c=t}},Kn=class extends c{constructor(t){super(),this.a=t}},Yn=class extends c{constructor(t){super(),this.is_inflow=t}},Xn=class extends c{constructor(t){super(),this.n=t}},Qn=class extends c{constructor(t){super(),this.cat=t}},Zn=class extends c{},Kr=class extends c{constructor(t){super(),this.a=t}},ei=class extends c{constructor(t){super(),this.allocation=t}},pr=class extends c{constructor(t){super(),this[0]=t}},ti=class extends c{constructor(t){super(),this.amount=t}},Yr=class extends c{constructor(t){super(),this.shift=t}},ri=class extends c{constructor(t){super(),this.show=t}},Xr=class extends c{constructor(t,n,r){super(),this.cat=t,this.needed_amount=n,this.alloc=r}},ni=class extends c{},ii=class extends c{constructor(t){super(),this.name=t}},si=class extends c{},Qr=class extends c{constructor(t){super(),this.c=t}},Zr=class extends c{constructor(t){super(),this.c=t}},oi=class extends c{constructor(t){super(),this.cat=t}},Do=class extends c{constructor(t){super(),this.group_name=t}},k=class extends c{constructor(t,n,r,i,s,o,u,a,f,p,_,b,S,A,X,P,le,Te,C,j,ne){super(),this.current_user=t,this.all_users=n,this.cycle=r,this.route=i,this.cycle_end_day=s,this.show_all_transactions=o,this.categories_groups=u,this.categories=a,this.transactions=f,this.allocations=p,this.selected_category=_,this.show_add_category_ui=b,this.user_category_name_input=S,this.transaction_add_input=A,this.target_edit=X,this.selected_transaction=P,this.transaction_edit_form=le,this.suggestions=Te,this.show_add_category_group_ui=C,this.new_category_group_name=j,this.category_group_change_input=ne}},li=class extends c{constructor(t,n,r){super(),this.id=t,this.input_name=n,this.allocation=r}},At=class extends c{constructor(t,n,r,i,s){super(),this.date=t,this.payee=n,this.category=r,this.amount=i,this.is_inflow=s}},ui=class extends c{},Jo=class extends c{},Vt=class extends c{constructor(t,n,r,i,s,o){super(),this.id=t,this.date=n,this.payee=r,this.category_name=i,this.amount=s,this.is_inflow=o}},jt=class extends c{constructor(t,n,r){super(),this.cat_id=t,this.enabled=n,this.target=r}};function Go(e){return uu(e,"dd.MM.yyyy")}function Ef(e){return uu(e,"yyyy-MM-dd")}function as(e){return qc(e)}function Cf(e){return e instanceof ke?"January":e instanceof Ze?"February":e instanceof et?"March":e instanceof tt?"April":e instanceof rt?"May":e instanceof nt?"June":e instanceof it?"July":e instanceof st?"August":e instanceof ot?"September":e instanceof lt?"October":e instanceof ut?"November":"December"}function Tf(e,t){return t instanceof ke?31:t instanceof Ze?28:t instanceof et?31:t instanceof tt?30:t instanceof rt?31:t instanceof nt?30:t instanceof it||t instanceof st?31:t instanceof ot?30:t instanceof lt?31:t instanceof ut?30:31}function qf(e){return e===1?new ke:e===2?new Ze:e===3?new et:e===4?new tt:e===5?new rt:e===6?new nt:e===7?new it:e===8?new st:e===9?new ot:e===10?new lt:e===11?new ut:e===12?new Ar:new ke}var Fu=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}};var Ho=class e extends Fu{static isResult(t){return t instanceof e}},Vo=class extends Ho{constructor(t){super(),this[0]=t}isOk(){return!0}},Ko=class extends Ho{constructor(t){super(),this[0]=t}isOk(){return!1}};function zf(e){let t=window.localStorage.getItem(e);return t?new Vo(t):new Ko(void 0)}function Bf(e,t){window.localStorage.setItem(e,t)}function Nf(e){let t=ku(e.path);return t.hasLength(1)&&t.head==="transactions"?new Ir:t.hasLength(1)&&t.head==="user"?new Ro:new ct}function If(e){let t=Nf(e);return new Sn(t)}function Mf(){return yt(e=>{let t=new cr(new xt("f254cdd0-003d-48c3-8eed-77e86c99fcc0","Shopping2",new d(new Ke(new I(4e3))),!1,"bcd5d6e1-dd6e-44fd-8dd6-4dea104a8e0a"));return e(t)})}function Ff(e){return yt(t=>{let n=zf(e),r=new Mr(n);return t(r)})}function Uf(e,t){return yt(n=>Bf(e,t))}var $$=!0;function we(){return $$?"https://budget-be.fly.dev/":"http://localho.st:8080/"}function Pf(){let e=(()=>{let n=Su();if(n.isOk()){let r=n[0];return Nf(r)}else return new ct})(),t=sn(zc());return Br(we(),pe(t,n=>new An(n,$o(),e)))}function Wf(e,t,n,r){let i=we()+"transaction/add",s=new Lr(bf(),(()=>{let o=e.date,u=as(o);return Ae(u,Jt())})(),e.payee,n.id,t,r.id);return us(i,fu(s),pe(_u(),o=>new Dr(o)))}function Rf(e,t){let n=we()+"category/add";return us(n,Ee(l([["name",ee(e)],["group_id",ee(t)]])),pe(z("id",G,r=>be(r)),r=>new Rr(r)))}function Yo(){let e=we()+"allocations",t=sn(Pc());return Br(e,pe(t,n=>new Wr(n)))}function cs(){let e=we()+"categories",t=sn(pu());return Br(e,pe(t,n=>new Fr(n)))}function ai(){let e=we()+"transactions",t=sn(_u());return Br(e,pe(t,n=>new Ur(n)))}function Uu(){let e=we()+"category/groups",t=sn(Bc());return Br(e,pe(t,n=>new Zr(n)))}function Df(e){let t=we()+"category/group/add";return us(t,Ee(l([["name",ee(e)]])),pe(z("id",G,n=>be(n)),n=>new Qr(n)))}function m$(e,t,n){let r=we()+"allocation/add";return us(r,Mc(new po(new g,e,t,n)),pe(lr(),i=>new pr(i)))}function h$(e,t){let n=we()+"allocation/"+e.id,r=(()=>{let i=St(n);return K(i,s=>{let o=s;return new Ue(new Gt,o.headers,o.body,o.scheme,o.host,o.port,o.path,o.query)})})();if(r.isOk()){let i=r[0];return Nr((()=>{let o=bn(i,on(Ic(new Hi(e.id,t,e.category_id,e.date))));return yn(o,"Content-Type","application/json")})(),pe(lr(),s=>new pr(s)))}else return y()}function Pu(e,t,n,r){if(e instanceof d){let i=e[0];return h$(i,t)}else return m$(t,n,r)}function Jf(e){let t=we()+"category/"+e,n=(()=>{let r=St(t);return K(r,i=>{let s=i;return new Ue(new zr,s.headers,s.body,s.scheme,s.host,s.port,s.path,s.query)})})();if(n.isOk()){let r=n[0];return Nr(r,pe(lr(),i=>new Kr(i)))}else return y()}function Gf(e){let t=we()+"transaction/"+e.id,n=(()=>{let r=St(t);return K(r,i=>{let s=i;return new Ue(new Gt,s.headers,s.body,s.scheme,s.host,s.port,s.path,s.query)})})();if(n.isOk()){let r=n[0];return Nr((()=>{let s=bn(r,on(fu(e)));return yn(s,"Content-Type","application/json")})(),pe(lr(),i=>new Vr(i)))}else return y()}function Hf(e){let t=we()+"transaction/"+e,n=(()=>{let r=St(t);return K(r,i=>{let s=i;return new Ue(new zr,s.headers,s.body,s.scheme,s.host,s.port,s.path,s.query)})})();if(n.isOk()){let r=n[0];return Nr(r,pe(lr(),i=>new Hr(i)))}else return y()}function Xo(e,t){let n=we()+"category/"+e.id,r=(()=>{let i=St(n);return K(i,s=>{let o=s;return new Ue(new Gt,o.headers,o.body,o.scheme,o.host,o.port,o.path,o.query)})})();if(r.isOk()){let i=r[0];return Nr((()=>{let o=bn(i,on(Fc((()=>{let u=e;return new xt(u.id,u.name,t,u.inflow,u.group_id)})())));return yn(o,"Content-Type","application/json")})(),pe(lr(),s=>new fr(s)))}else return y()}function Vf(e){let t=we()+"category/target/"+e.id,n=(()=>{let r=St(t);return K(r,i=>{let s=i;return new Ue(new Gt,s.headers,s.body,s.scheme,s.host,s.port,s.path,s.query)})})();if(n.isOk()){let r=n[0];return Nr(r,pe(lr(),i=>new fr(i)))}else return y()}function Kf(){let e=we()+"category/suggestions",t=Uc();return Br(e,pe(t,n=>new Pr(n)))}function E(e){return M(e)}function v(e,t){return ge("div",e,t)}function fs(e,t){return ge("a",e,t)}function Wu(e,t){return ge("table",e,t)}function Ru(e,t){return ge("tbody",e,t)}function H(e,t){return ge("td",e,t)}function en(e,t){return ge("th",e,t)}function Du(e,t){return ge("thead",e,t)}function Lt(e,t){return ge("tr",e,t)}function R(e,t){return ge("button",e,t)}function ps(e,t){return ge("datalist",e,t)}function _e(e){return ge("input",e,l([]))}function Yf(e,t){return ge("label",e,t)}function ci(e,t){return ge("option",e,l([M(t)]))}function Xf(e,t){return ge("select",e,t)}function Ju(e,t){return Yc(e,t)}function F(e){return Ju("click",t=>new $(e))}function x$(e){let t=e;return bi("target",bi("value",sa))(t)}function de(e){return Ju("input",t=>{let n=x$(t);return K(n,e)})}function y$(e){let t=e;return bi("target",bi("checked",oa))(t)}function Qf(e){return Ju("change",t=>{let n=y$(t);return K(n,e)})}function k$(e){let t=e instanceof ct?["active",""]:e instanceof Ir?["","active"]:["",""],n=t[0],r=t[1];return v(l([w("btn-group "),B(l([["height","fit-content"]]))]),l([fs(l([$e("aria-current","page"),w("btn btn-primary "+n),Zi("/")]),l([E("Budget")])),fs(l([w("btn btn-primary "+r),Zi("/transactions")]),l([E("Transactions")]))]))}function v$(e,t,n){return v(l([w("d-flex flex-row "+e),B(t)]),n())}function O$(e,t,n){return v(l([w("d-flex flex-column  p-1"+e),B(t)]),n())}function S$(e){return O$("",l([]),e)}function A$(e,t,n){let i=zt(e,o=>O(o.date,t)),s=Ye(i,o=>o.category_id===n.id);return Kt(s)}function j$(e){let t=e.selected_category,n=Q(t,r=>{let i=e.categories,s=Ye(i,o=>o.id===r.id);return Kt(s)});return $s(n)}function L$(e,t){let n=Ye(t,r=>r.id===e.category_id);return n.isOk()?n[0].name:"not found"}function E$(e){return(()=>{let t=e.month;return Cf(t)})()+" "+(()=>{let t=e.year;return x(t)})()}function C$(e){return v(l([w("d-flex flex-row")]),l([v(l([w("btn-group")]),(()=>{let t=e.all_users;return q(t,n=>{let r=e.current_user.id===n.id?"active":"";return fs(l([w("btn btn-primary"+r),Zi("#"),F(new jn(n))]),l([E(n.name)]))})})())]))}function T$(e,t){let n=wt(t);return n===1?[e-1,12]:[e,n-1]}function tp(e,t){if(t instanceof g)return[jr(e.year,e.month,1),jr(e.year,e.month,Tf(e.year,e.month))];{let n=t[0],r=T$(e.year,e.month),i=r[0],s=r[1];return[jr(i,qf(s),n+1),jr(e.year,e.month,n)]}}function q$(e){let t=tp(e.cycle,e.cycle_end_day),n=t[0],r=t[1];return Go(n)+" - "+Go(r)}function z$(e){return v$("",l([["height","fit-content"]]),()=>l([R(l([w("btn btn-secondary mt-2 me-2"),B(l([["height","fit-content"]])),F(new Yr(new ui))]),l([M("<")])),S$(()=>l([v(l([w("text-center fs-4"),B(l([["justify-content","center"],["width","170px"]]))]),l([M((()=>{let t=e.cycle;return E$(t)})())])),v(l([w("text-start fs-6"),B(l([["width","200px"]]))]),l([M(q$(e))]))])),R(l([w("btn btn-secondary mt-2 "),B(l([["height","fit-content"]])),F(new Yr(new Jo))]),l([M(">")]))]))}function _s(e){let t=tp(e.cycle,e.cycle_end_day),n=t[0],r=t[1];return zt(e.transactions,i=>Cc(i.date,n,r))}function Gu(e,t){let r=zt(t,i=>i.category_id===e.id);return se(r,new I(0),(i,s)=>Er(i,s.value))}function B$(e){let t=e.target instanceof ve?["","active"]:["active",""],n=t[0],r=t[1];return v(l([$e("aria-label","Basic example"),Xc("group"),w("btn-group mt-1")]),l([R(l([F(new Gr(!0)),w("btn btn-primary"+n),re("button")]),l([E("Monthly")])),R(l([F(new Gr(!1)),w("btn btn-primary"+r),re("button")]),l([E("Custom")]))]))}function rp(e,t){let n=jr(t.year,Ve(t.month),28),r=Ec(new Ri,Jt(),n)+1;return Rc(e,r)}function np(e){let t=e.target;if(t instanceof g)return new I(0);if(t instanceof d&&t[0]instanceof ve){let n=t[0].target,r=t[0].date;return rp(n,r)}else return t[0].target}function N$(e,t,n,r){let i=Bt(r,f=>f.inflow?new $(f.id):new m("")),s=(()=>{let f=zt(e,p=>ea(i,p.category_id));return se(f,new I(0),(p,_)=>Er(p,_.value))})(),o=(()=>{let f=Bt(t,p=>O(p.date,n)?new $(p.amount):new m(""));return se(f,new I(0),(p,_)=>Er(p,_))})(),u=new I(s.value-o.value);return ur(u)}function I$(e){return v(l([w(" text-black rounded-3 p-2"),B(l([["width","200px"],["height","fit-content"],["background-color","rgb(187, 235, 156)"]]))]),l([v(l([w("text-center fs-3 fw-bold")]),l([M(N$(_s(e),e.allocations,e.cycle,e.categories))])),v(l([w("text-center")]),l([M("Ready to Assign")]))]))}function Hu(e,t,n){return v(l([w("ms-2"),w("form-check")]),l([_e(l([bt("flexCheckDefault"),Qf(n),re("checkbox"),w("form-check-input"),Qc(t)])),Yf(l([Zc("flexCheckDefault"),w("form-check-label")]),l([E(e)]))]))}function ip(e,t,n,r){return t===e.id?v(l([w("mt-1")]),l([r?R(l([F(new Dn)]),l([M("Save")])):R(l([F(new Rn(e,n))]),l([M("Edit")])),R(l([w("ms-1"),F(new Jn(e.id))]),l([M("Delete")]))])):E("")}function M$(e,t,n,r,i){return Lt(l([w(n)]),l([H(l([]),l([_e(l([de(s=>new Hn(s)),he("date"),me(r.date),w("form-control"),re("date"),B(l([["width","140px"]]))]))])),H(l([]),l([_e(l([de(s=>new Gn(s)),he("payee"),me(r.payee),w("form-control"),re("text"),B(l([["width","160px"]])),$e("list","payees_list")])),ps(l([bt("payees_list")]),(()=>{let s=i.transactions,o=q(s,u=>u.payee);return q(o,u=>ci(l([me(u)]),""))})())])),H(l([]),l([_e(l([de(s=>new Vn(s)),he("category"),me(r.category_name),w("form-control"),re("text"),B(l([["width","160px"]])),$e("list","categories_list")])),ps(l([bt("categories_list")]),(()=>{let s=i.categories,o=q(s,u=>u.name);return q(o,u=>ci(l([me(u)]),""))})())])),H(l([]),l([_e(l([de(s=>new Kn(s)),he("amount"),me(r.amount),w("form-control"),re("text"),B(l([["width","160px"]]))])),Hu("is inflow",r.is_inflow,s=>new Yn(s)),(()=>{let s=(()=>{let o=i.selected_transaction;return Et(o,"")})();return ip(e,s,t,!0)})()]))]))}function Zf(e,t){let n=(()=>{let a=t.selected_transaction;return Et(a,"")})(),r=n===e.id?"table-active":"",s=(()=>{let a=t.transaction_edit_form,f=Q(a,p=>p.id);return Et(f,"-1")})()===e.id,o=L$(e,t.categories),u=t.transaction_edit_form;if(s&&u instanceof d){let a=u[0];return M$(e,o,r,a,t)}else return Lt(l([F(new Wn(e)),w(r)]),l([H(l([]),l([E(Go(e.date))])),H(l([]),l([E(e.payee)])),H(l([]),l([E(o)])),H(l([]),l([E((()=>{let a=e.value;return ur(a)})()),ip(e,n,o,!1)]))]))}function F$(e,t,n){return Lt(l([]),l([H(l([]),l([_e(l([de(r=>new qn(r)),he("date"),bt("addTransactionDateId"),w("form-control"),re("date"),me(n.date)]))])),H(l([]),l([_e(l([de(r=>new zn(r)),he("payee"),bt("addTransactionPayeeId"),w("form-control"),re("text"),$e("list","payees_list"),me(n.payee)])),ps(l([bt("payees_list")]),(()=>{let i=q(e,o=>o.payee),s=ta(i);return q(s,o=>ci(l([me(o)]),""))})())])),H(l([]),l([Xf(l([de(r=>new Bn(r)),w("form-select"),me((()=>{let r=n.category,i=Q(r,s=>s.name);return Et(i,"")})())]),(()=>{let i=q(t,s=>s.name);return q(i,s=>ci(l([me(s)]),s))})())])),H(l([w("d-flex flex-row")]),l([_e(l([de(r=>new Nn(r)),he("amount"),bt("addTransactionAmountId"),w("form-control"),re("text"),B(l([["width","120px"]])),me(n.amount)])),Hu("is inflow",n.is_inflow,r=>new In(r)),R(l([w("ms-1"),F(new Tn)]),l([M("Add")]))]))]))}function U$(e){return v(l([w("d-flex flex-column flex-fill")]),l([Hu("Show all transactions",e.show_all_transactions,t=>new ri(t)),Wu(l([w("table table-sm table-hover")]),l([Du(l([]),l([Lt(l([]),l([en(l([]),l([E("Date")])),en(l([]),l([E("Payee")])),en(l([]),l([E("Category")])),en(l([]),l([E("Amount")]))]))])),Ru(l([]),Nt(l([l([F$(e.transactions,e.categories,e.transaction_add_input)]),(()=>{if(e.show_all_transactions){let n=e.transactions;return q(n,r=>Zf(r,e))}else{let n=_s(e);return q(n,r=>Zf(r,e))}})()])))]))]))}function Vu(e,t,n){let i=zt(t,o=>O(o.date,n)),s=zt(i,o=>o.category_id===e.id);return se(s,new I(0),(o,u)=>Er(o,u.amount))}function P$(e,t,n){let r=np(e),i=Vu(e,n.allocations,n.cycle),s=new I(i.value-r.value),o=new I(i.value+(()=>{let a=s.value;return Xe(a)})());return s.value<0?v(l([w("mt-3")]),l([R(l([F(new Xr(e,o,t))]),l([M("Allocate needed "+Cr(s))]))])):E("")}function W$(e,t,n){let r=Gu(e,_s(t)),i=Vu(e,t.allocations,t.cycle),s=Er(i,r);return s.value<0?v(l([w("mt-3")]),l([R(l([F(new Xr(e,new I(i.value+(()=>{let u=s.value;return Xe(u)})()),n))]),l([M("Cover overspent "+Cr(s))]))])):E("")}function ep(e,t){return v(l([w("ms-2 p-1"),B(l([["background-color",t],["width","fit-content"]]))]),l([E(e)]))}function R$(e,t){let n=np(e),r=Gu(e,_s(t)),i=Vu(e,t.allocations,t.cycle),s=Er(i,r),o=Jc(s)?"rgb(137, 143, 138)":s.value<0?"rgb(231, 41, 12)":"rgba(64,185,78,1)",u=new I(i.value-n.value),a=u.value<0?ep(" Add more "+Dc(u),"rgb(235, 199, 16)"):E("");return v(l([w("d-flex flex-row")]),l([ep(ur(s),o),a]))}function D$(e,t,n){let i=zt(e,s=>!s.inflow&&s.group_id===n.id);return q(i,s=>{let o=(()=>{let u=t.selected_category;return u instanceof g?"":u[0].id===s.id?"table-active":""})();return Lt(l([F(new cr(s)),w(o)]),l([H(l([]),l([E(s.name)])),H(l([]),l([R$(s,t)]))]))})}function J$(e,t){let n=(()=>{let a=t.show_add_category_ui;if(a instanceof d){let f=a[0];return e.id===f}else return!1})(),r=n?Lt(l([]),l([H(l([]),l([_e(l([de(a=>new En(a)),he("category name"),bt("exampleFormControlInput1"),w("form-control"),re("text")]))])),H(l([]),l([R(l([F(new Cn(e.id))]),l([M("Add")]))]))])):E(""),i=(()=>{let a=n?"-":"+";return R(l([w("ms-1"),F(new Ln(e.id))]),l([M(a)]))})(),s=Lt(l([B(l([["background-color","rgb(199, 208, 201)"]]))]),l([H(l([]),l([E(e.name),i])),H(l([]),l([]))])),o=D$(t.categories,t,e),u=ms(o,r);return ms(u,s)}function G$(e,t){return rl(e,r=>J$(r,t))}function H$(e){let t=e.selected_category instanceof g?"":"w-75";return Wu(l([w(t+" table table-sm table-hover")]),l([Du(l([]),l([Lt(l([]),l([en(l([]),l([E("Categories groups"),(()=>{let n=e.show_add_category_group_ui?"-":"+";return R(l([w("ms-2"),F(new ni)]),l([M(n)]))})()])),en(l([]),l([E("Balance")]))]))])),Ru(l([]),(()=>{let n=G$(e.categories_groups,e),r=e.show_add_category_group_ui?l([Lt(l([]),l([H(l([]),l([_e(l([de(s=>new ii(s)),he("Category group name"),w("form-control"),re("text")]))])),H(l([]),l([R(l([F(new si)]),l([M("Create group")]))]))]))]):l([]);return Nt(l([r,n]))})())]))}function V$(e){return(()=>{let t=e.month,n=x(t);return ce(n,2,"0")})()+"."+(()=>{let t=e.year,n=x(t);return ce(n,2,"0")})()}function K$(e){let t=e.target;if(t instanceof g)return"";if(t instanceof d&&t[0]instanceof ve){let n=t[0].target,r=t[0].date;return"Monthly: "+(()=>{let i=rp(n,r);return ur(i)})()+`
 till date: `+V$(r)+" Total amount: "+ur(n)}else{let n=t[0].target;return"Monthly: "+ur(n)}}var sp="rgb(227, 216, 241)";function Y$(e,t){return v(l([w("rounded-3 p-2 mt-3"),B(l([["height","fit-content"],["background-color",sp]]))]),l([_e(l([de(n=>new Xn(n)),he("category name"),w("form-control"),re("text"),B(l([["width","200px"]])),me(t.input_name),w("mb-2")])),R(l([w("me-3"),F(new Qn(e))]),l([M("Update")])),R(l([F(new Zn)]),l([M("Delete")]))]))}function X$(e,t){return v(l([w("mt-3 rounded-3 p-2"),B(l([["background-color",sp]]))]),l([E("Change group"),_e(l([de(n=>new Do(n)),he("group"),w("form-control"),re("text"),B(l([["width","160px"]])),$e("list","group_list")])),ps(l([bt("group_list")]),(()=>{let n=t.categories_groups,r=q(n,i=>i.name);return q(r,i=>ci(l([me(i)]),""))})()),R(l([w("mt-1"),F(new oi(e))]),l([M("Change group")]))]))}var op="rgb(134, 217, 192)";function Q$(e,t){return v(l([w("mt-3 rounded-3 p-2"),B(l([["background-color",op]]))]),l([E("Allocated: "),_e(l([de(n=>new ti(n)),he("amount"),w("form-control"),re("text"),B(l([["width","120px"]])),me(e.allocation)])),R(l([w("mt-1"),F(new ei(t))]),l([M("Save")]))]))}function Z$(e,t){return v(l([w("mt-3 rounded-3 p-2 col mt-3"),B(l([["background-color",op]]))]),(()=>{let n=t.cat_id;return t.enabled?l([v(l([]),l([E("Target"),R(l([w("ms-3 me-1"),F(new Fn(e))]),l([M("Save")])),R(l([F(new Un(e))]),l([M("Delete")]))])),B$(t),t.target instanceof ve?v(l([w("mt-1")]),l([E("Amount needed for date: "),_e(l([de(s=>new Jr(s)),he("amount"),w("form-control"),re("text"),B(l([["width","120px"]]))])),_e(l([de(s=>new Pn(s)),he("date"),w("form-control mt-1"),re("date")]))])):v(l([w("mt-1")]),l([E("Amount monthly: "),_e(l([de(s=>new Jr(s)),he("amount"),w("form-control"),re("text"),B(l([["width","120px"]])),B(l([["width","120px"]])),B(l([["width","120px"]]))]))]))]):l([v(l([]),l([E("Target"),R(l([w("ms-3"),F(new Mn(e))]),l([M("Edit")]))])),v(l([w("mt-2")]),l([E(K$(e))]))])})())}var em="rgb(197, 219, 212)";function tm(e,t){return v(l([w("mt-3 rounded-3 p-2"),B(l([["background-color",em]]))]),l([v(l([w("col")]),l([v(l([]),l([E("Activity")])),v(l([]),l([E((()=>{let n=Gu(e,_s(t));return ur(n)})())]))]))]))}function rm(e,t,n,r){return v(l([w("col p-3")]),l([tm(e,t),Z$(e,t.target_edit),Q$(n,r),P$(e,r,t),W$(e,t,r),Y$(e,n),X$(e,t)]))}function nm(e){let t=j$(e),n=e.route,r=e.selected_category;if(t instanceof d&&n instanceof ct&&r instanceof d){let i=t[0],s=r[0];return rm(i,e,s,A$(e.allocations,e.cycle,i))}else return E("")}function lp(e){return v(l([w("container-fluid")]),l([v(l([w("col")]),l([v(l([w("d-flex flex-row p-3")]),l([z$(e),v(l([w("d-flex flex-row  justify-content-center"),B(l([["width","100%"]]))]),l([I$(e)])),v(l([w("d-flex align-items-center fs-5"),B(l([]))]),l([fs(l([w("text-dark text-decoration-none"),Zi("/user")]),l([E(e.current_user.name)]))]))])),v(l([w("d-flex flex-row")]),l([k$(e.route)])),v(l([w("d-flex flex-row")]),l([(()=>{let t=e.route;return t instanceof ct?H$(e):t instanceof Ir?U$(e):C$(e)})(),v(l([]),l([nm(e)]))]))]))]))}function sm(e){return[new k(new Ji("initial","Initial"),l([]),$o(),new ct,new d(26),!1,l([]),l([]),l([]),l([]),new g,new g,"",new At("","",new g,"",!1),new jt("",!1,new Ke(new I(0))),new g,new g,ie(),!1,"",""),mo(l([df(If),Pf(),Mf()]))]}function om(e){let t=(()=>{let r=e.amount;return Ki(r)})(),n=e.is_inflow?1:-1;return new I((()=>{let r=t.value;return Xe(r)})()*n)}function lm(e){return e.value}function um(e,t,n){let r=(()=>{let u=e.date,a=as(u);return Kt(a)})(),i=e.is_inflow?1:-1,s=new I((()=>{let u=e.amount,a=Ki(u);return lm(a)})()*i),o=(()=>{let a=Ye(t,f=>f.name===e.category_name);return Kt(a)})();if(r instanceof d&&o instanceof d){let u=r[0],a=o[0];return new d(new Lr(e.id,u,e.payee,a.id,s,n.id))}else return new g}function up(e){return new Gi(ao(e),sr(e))}function am(e,t,n){return Ye(n,i=>i.category_id===e&&O(i.date,t))}function cm(e,t){if(zl(t),t instanceof Sn){let n=t.route;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,n,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof An){let n=t.users,r=t.cycle,i=t.initial_route;if(n.isOk()){let s=n[0];return[(()=>{let o=e;return new k(o.current_user,s,r,i,o.cycle_end_day,o.show_all_transactions,o.categories_groups,o.categories,o.transactions,o.allocations,o.selected_category,o.show_add_category_ui,o.user_category_name_input,o.transaction_add_input,o.target_edit,o.selected_transaction,o.transaction_edit_form,o.suggestions,o.show_add_category_group_ui,o.new_category_group_name,o.category_group_change_input)})(),mo(l([Uu(),cs(),ai(),Yo(),Ff("current_user_id"),Kf()]))]}else return[e,y()]}else if(t instanceof Mr&&t.id.isOk()){let n=t.id[0],r=(()=>{let i=e.all_users;return Ye(i,s=>s.id===n)})();if(r.isOk()){let i=r[0];return[(()=>{let s=e;return new k(i,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,s.transaction_add_input,s.target_edit,s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,s.category_group_change_input)})(),y()]}else return[e,y()]}else{if(t instanceof Mr&&!t.id.isOk())return[e,y()];if(t instanceof Fr&&t.cats.isOk()){let n=t.cats[0];return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,n,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),ai()]}else{if(t instanceof Fr&&!t.cats.isOk())return[e,y()];if(t instanceof Ur&&t.trans.isOk()){let n=t.trans[0];return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,gs(n,(s,o)=>ou(o.date,s.date)),r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Ur&&!t.trans.isOk())return[e,y()];if(t instanceof Wr&&t.a.isOk()){let n=t.a[0];return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,n,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Wr&&!t.a.isOk())return[e,y()];if(t instanceof cr){let n=t.c;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,new d(new li(n.id,n.name,(()=>{let i=am(n.id,e.cycle,e.allocations),s=K(i,o=>{let u=o.amount;return Cr(u)});return Ae(s,"")})())),r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,(()=>{let i=e.categories_groups,s=Ye(i,u=>u.id===n.group_id),o=K(s,u=>u.name);return Ae(o,"")})())})(),y()]}else if(t instanceof jn){let n=t.u;return[(()=>{let r=e;return new k(n,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),Uf("current_user_id",n.id)]}else if(t instanceof Ln){let n=t.group_id;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,(()=>{let i=e.show_add_category_ui;return i instanceof g?new d(n):i[0]===n?new g:new d(n)})(),r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof Cn){let n=t.group_id;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,"",r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),Rf(e.user_category_name_input,n)]}else if(t instanceof En){let n=t.cat_name;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,n,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Rr&&t.c.isOk())return[e,cs()];if(t instanceof Rr&&!t.c.isOk())return[e,y()];if(t instanceof Tn){let n=e.transaction_add_input.category,r=(()=>{let i=e.transaction_add_input.amount;return Ki(i)})();if(n instanceof d){let i=n[0];return[(()=>{let s=e;return new k(s.current_user,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,new At(e.transaction_add_input.date,"",new g,"",!1),s.target_edit,s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,s.category_group_change_input)})(),Wf(e.transaction_add_input,(()=>{let s=e.transaction_add_input;return om(s)})(),i,e.current_user)]}else return[e,y()]}else if(t instanceof Dr&&t.c.isOk()){let n=t.c[0];return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,(()=>{let i=Nt(l([e.transactions,l([n])]));return gs(i,(s,o)=>ou(o.date,s.date))})(),r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Dr&&!t.c.isOk())return[e,y()];if(t instanceof Bn){let n=t.cat,r=(()=>{let i=e.categories,s=Ye(i,o=>o.name===n);return Kt(s)})();return[(()=>{let i=e;return new k(i.current_user,i.all_users,i.cycle,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,(()=>{let s=e.transaction_add_input;return new At(s.date,s.payee,r,s.amount,s.is_inflow)})(),i.target_edit,i.selected_transaction,i.transaction_edit_form,i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),y()]}else if(t instanceof qn){let n=t.date;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,(()=>{let i=e.transaction_add_input;return new At(n,i.payee,i.category,i.amount,i.is_inflow)})(),r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof zn){let n=t.payee,r=(()=>{let i=e.suggestions;return Tt(i,n)})();return[(()=>{let i=e;return new k(i.current_user,i.all_users,i.cycle,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,(()=>{let s=e.transaction_add_input;return new At(s.date,n,Kt(r),s.amount,s.is_inflow)})(),i.target_edit,i.selected_transaction,i.transaction_edit_form,i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),y()]}else if(t instanceof Nn){let n=t.amount;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,(()=>{let i=e.transaction_add_input;return new At(i.date,i.payee,i.category,n,i.is_inflow)})(),r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof In){let n=t.is_inflow;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,(()=>{let i=e.transaction_add_input;return new At(i.date,i.payee,i.category,i.amount,n)})(),r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Mn)return[(()=>{let n=e;return new k(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,n.selected_category,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,(()=>{let r=e.target_edit;return new jt(r.cat_id,!0,r.target)})(),n.selected_transaction,n.transaction_edit_form,n.suggestions,n.show_add_category_group_ui,n.new_category_group_name,n.category_group_change_input)})(),y()];if(t instanceof Fn){let n=t.c;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,(()=>{let i=e.target_edit;return new jt(i.cat_id,!1,i.target)})(),r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),Xo(n,(()=>{let r=e.target_edit.target;return new d(r)})())]}else if(t instanceof Un){let n=t.c;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,(()=>{let i=e.target_edit;return new jt(i.cat_id,!1,i.target)})(),r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),Vf(n)]}else if(t instanceof Jr){let n=t.amount,r=(()=>{let o=je(n);return Ae(o,0)})(),i=(()=>{let s=e.target_edit.target;if(s instanceof ve){let o=s.date;return new ve($u(r),o)}else return new Ke($u(r))})();return[(()=>{let s=e;return new k(s.current_user,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,s.transaction_add_input,(()=>{let o=e.target_edit;return new jt(o.cat_id,o.enabled,i)})(),s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,s.category_group_change_input)})(),y()]}else if(t instanceof Gr){let n=t.is_monthly,r=(()=>{let i=e.target_edit.target;if(i instanceof ve&&n){let s=i.target;return new Ke(s)}else if(i instanceof Ke&&!n){let s=i.target;return new ve(s,up(Jt()))}else return i})();return[(()=>{let i=e;return new k(i.current_user,i.all_users,i.cycle,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,i.transaction_add_input,(()=>{let s=e.target_edit;return new jt(s.cat_id,s.enabled,r)})(),i.selected_transaction,i.transaction_edit_form,i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),y()]}else if(t instanceof Pn){let n=t.date,r=(()=>{let s=as(n);return na(s,()=>Jt())})(),i=(()=>{let s=e.target_edit.target;if(s instanceof ve){let o=s.target;return new ve(o,up(r))}else{let o=s.target;return new Ke(o)}})();return[(()=>{let s=e;return new k(s.current_user,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,s.transaction_add_input,(()=>{let o=e.target_edit;return new jt(o.cat_id,o.enabled,i)})(),s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,s.category_group_change_input)})(),y()]}else{if(t instanceof fr&&t.a.isOk())return[e,cs()];if(t instanceof fr&&!t.a.isOk())return[e,y()];if(t instanceof Wn){let n=t.t;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,new d(n.id),r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof Jn){let n=t.t_id;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,new g,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),Hf(n)]}else if(t instanceof Rn){let n=t.t,r=t.category_name;return[(()=>{let i=e;return new k(i.current_user,i.all_users,i.cycle,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,i.transaction_add_input,i.target_edit,i.selected_transaction,new d(new Vt(n.id,(()=>{let s=n.date;return Ef(s)})(),n.payee,r,(()=>{let s=n.value;return Cr(s)})(),n.value.value>=0)),i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),y()]}else{if(t instanceof Hr&&t.a.isOk())return[e,ai()];if(t instanceof Hr&&!t.a.isOk())return[e,y()];if(t instanceof Vr&&t.a.isOk())return[e,ai()];if(t instanceof Vr&&!t.a.isOk())return[e,y()];if(t instanceof Gn){let n=t.p;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return Q(i,s=>{let o=s;return new Vt(o.id,o.date,n,o.category_name,o.amount,o.is_inflow)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof Hn){let n=t.d;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return Q(i,s=>{let o=s;return new Vt(o.id,n,o.payee,o.category_name,o.amount,o.is_inflow)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof Kn){let n=t.a;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return Q(i,s=>{let o=s;return new Vt(o.id,o.date,o.payee,o.category_name,n,o.is_inflow)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof Yn){let n=t.is_inflow;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return Q(i,s=>{let o=s;return new Vt(o.id,o.date,o.payee,o.category_name,o.amount,n)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof Vn){let n=t.c;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return Q(i,s=>{let o=s;return new Vt(o.id,o.date,o.payee,n,o.amount,o.is_inflow)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Dn)return[(()=>{let n=e;return new k(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,n.selected_category,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,n.target_edit,new g,new g,n.suggestions,n.show_add_category_group_ui,n.new_category_group_name,n.category_group_change_input)})(),(()=>{let n=(()=>{let r=e.transaction_edit_form,i=Q(r,s=>um(s,e.categories,e.current_user));return $s(i)})();if(n instanceof g)return y();{let r=n[0];return Gf(r)}})()];if(t instanceof Zn)return[(()=>{let n=e;return new k(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,new g,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,n.target_edit,n.selected_transaction,n.transaction_edit_form,n.suggestions,n.show_add_category_group_ui,n.new_category_group_name,n.category_group_change_input)})(),(()=>{let n=e.selected_category;if(n instanceof g)return y();{let r=n[0];return Jf(r.id)}})()];if(t instanceof Qn){let n=t.cat;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,new g,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),(()=>{let r=e.selected_category;if(r instanceof d){let i=r[0];return Xo((()=>{let s=n;return new xt(s.id,i.input_name,s.target,s.inflow,s.group_id)})(),n.target)}else return y()})()]}else if(t instanceof Xn){let n=t.n;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,(()=>{let i=e.selected_category;return Q(i,s=>{let o=s;return new li(o.id,n,o.allocation)})})(),r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Kr&&t.a.isOk())return[e,cs()];if(t instanceof Kr&&!t.a.isOk())return[e,y()];if(t instanceof ei){let n=t.allocation;return[e,(()=>{let r=e.selected_category;if(r instanceof d){let i=r[0];return Pu(n,(()=>{let s=i.allocation;return Ki(s)})(),i.id,e.cycle)}else return y()})()]}else{if(t instanceof pr&&t[0].isOk())return[e,Yo()];if(t instanceof pr&&!t[0].isOk())return[e,y()];if(t instanceof ti){let n=t.amount;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,(()=>{let i=e.selected_category;return Q(i,s=>{let o=s;return new li(o.id,o.input_name,n)})})(),r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof Yr){let n=t.shift,r=n instanceof ui?Wc(e.cycle):du(e.cycle);return[(()=>{let i=e;return new k(i.current_user,i.all_users,r,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,i.transaction_add_input,i.target_edit,i.selected_transaction,i.transaction_edit_form,i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),mo(l([ai(),Yo()]))]}else if(t instanceof ri){let n=t.show;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,n,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else if(t instanceof Pr&&t.trans.isOk()){let n=t.trans[0];return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,n,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Pr&&!t.trans.isOk())return[e,y()];if(t instanceof Xr){let n=t.cat,r=t.needed_amount,i=t.alloc;return[e,Pu(i,r,n.id,e.cycle)]}else{if(t instanceof ni)return[(()=>{let n=e;return new k(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,n.selected_category,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,n.target_edit,n.selected_transaction,n.transaction_edit_form,n.suggestions,!e.show_add_category_group_ui,n.new_category_group_name,n.category_group_change_input)})(),y()];if(t instanceof ii){let n=t.name;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,n,r.category_group_change_input)})(),y()]}else{if(t instanceof si)return[e,Df(e.new_category_group_name)];if(t instanceof Qr&&t.c.isOk())return[(()=>{let n=e;return new k(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,n.selected_category,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,n.target_edit,n.selected_transaction,n.transaction_edit_form,n.suggestions,!1,"",n.category_group_change_input)})(),Uu()];if(t instanceof Qr&&!t.c.isOk())return[e,y()];if(t instanceof Zr&&t.c.isOk()){let n=t.c[0];return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,n,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),y()]}else{if(t instanceof Zr&&!t.c.isOk())return[e,y()];if(t instanceof oi){let n=t.cat,r=(()=>{let i=e.categories_groups;return Ye(i,s=>s.name===e.category_group_change_input)})();if(r.isOk()){let i=r[0];return[(()=>{let s=e;return new k(s.current_user,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,s.transaction_add_input,s.target_edit,s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,"")})(),Xo((()=>{let s=n;return new xt(s.id,s.name,s.target,s.inflow,i.id)})(),n.target)]}else return[e,y()]}else{let n=t.group_name;return[(()=>{let r=e;return new k(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,n)})(),y()]}}}}}}}}}}}}}}}}}}function ap(){let e=of(sm,cm,lp),t=lf(e,"#app",void 0);if(!t.isOk())throw D("let_assert","budget_fe",22,"main","Pattern match failed, no pattern matched the value.",{value:t})}ap();
