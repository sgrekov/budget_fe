var f=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}},R=class{static fromArray(t,n){let r=n||new xi;for(let i=t.length-1;i>=0;--i)r=new mr(t[i],r);return r}[Symbol.iterator](){return new eu(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof xi}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}};function h(e,t){return new mr(e,t)}function l(e,t){return R.fromArray(e,t)}var eu=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof xi)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}},xi=class extends R{},mr=class extends R{constructor(t,n){super(),this.head=t,this.tail=n}},K=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return un(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<n;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let r=this.bitSize%8;if(r){let i=8-r;if(this.rawBuffer[n]>>i!==t.rawBuffer[n]>>i)return!1}}else{for(let i=0;i<n;i++){let s=un(this.rawBuffer,this.bitOffset,i),o=un(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let r=this.bitSize%8;if(r){let i=un(this.rawBuffer,this.bitOffset,n),s=un(t.rawBuffer,t.bitOffset,n),o=8-r;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(ea("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(ea("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function un(e,t,n){if(t===0)return e[n]??0;{let r=e[n]<<t&255,i=e[n+1]>>8-t;return r|i}}var gs=class{constructor(t){this.value=t}},Ql={};function ea(e,t){Ql[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Ql[e]=!0)}function hr(e,t,n){if(n??=e.bitSize,ra(e,t,n),t===n)return new K(new Uint8Array);if(t===0&&n===e.bitSize)return e;t+=e.bitOffset,n+=e.bitOffset;let r=Math.trunc(t/8),s=Math.trunc((n+7)/8)-r,o;return r===0&&s===e.rawBuffer.byteLength?o=e.rawBuffer:o=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+r,s),new K(o,n-t,t%8)}function yi(e,t,n,r,i){if(ra(e,t,n),t===n)return 0;t+=e.bitOffset,n+=e.bitOffset;let s=t%8===0,o=n%8===0;if(s&&o)return gp(e,t/8,n/8,r,i);let u=n-t,a=Math.trunc(t/8),c=Math.trunc((n-1)/8);if(a==c){let p=255>>t%8,_=(8-n%8)%8,x=(e.rawBuffer[a]&p)>>_;if(i){let k=2**(u-1);x>=k&&(x-=k*2)}return x}return u<=53?yp(e.rawBuffer,t,n,r,i):bp(e.rawBuffer,t,n,r,i)}function Kt(e){if(e.length===0)return new K(new Uint8Array);if(e.length===1){let o=e[0];return o instanceof K?o:o instanceof Uint8Array?new K(o):new K(new Uint8Array(e))}let t=0,n=!0;for(let o of e)o instanceof K?(t+=o.bitSize,n=!1):o instanceof Uint8Array?(t+=o.byteLength*8,n=!1):t+=8;if(n)return new K(new Uint8Array(e));let r=new Uint8Array(Math.trunc((t+7)/8)),i=0;for(let o of e){let u=i%8===0;if(o instanceof K)if(u&&o.bitOffset===0){r.set(o.rawBuffer,i/8),i+=o.bitSize;let a=o.bitSize%8;if(a!==0){let c=Math.trunc(i/8);r[c]>>=8-a,r[c]<<=8-a}}else s(o.rawBuffer,o.bitSize,o.bitOffset);else o instanceof Uint8Array?u?(r.set(o,i/8),i+=o.byteLength*8):s(o,o.byteLength*8,0):u?(r[i/8]=o,i+=8):s(new Uint8Array([o]),8,0)}function s(o,u,a){if(u===0)return;let c=Math.trunc(u+7/8),p=i%8,_=8-p,x=Math.trunc(i/8);for(let k=0;k<c;k++){let v=un(o,a,k);u<8&&(v>>=8-u,v<<=8-u),r[x]|=v>>p;let U=u-Math.max(0,u-_);if(u-=U,i+=U,u===0)break;r[++x]=v<<_,U=u-Math.max(0,u-p),u-=U,i+=U}}return new K(r,t)}function gr(e,t,n){if(t<=0)return new Uint8Array;if(t===8)return new Uint8Array([e]);if(t<8)return e<<=8-t,new K(new Uint8Array([e]),t);let r=new Uint8Array(Math.trunc((t+7)/8)),i=t%8,s=8-i;if(t<=32)if(n){let o=r.length-1;for(i&&(r[o--]=e<<s&255,e>>=i);o>=0;o--)r[o]=e,e>>=8}else{let o=0,u=Math.trunc(t/8);for(;o<u;o++)r[o]=e,e>>=8;i&&(r[o]=e<<s)}else{let o=BigInt(i),u=BigInt(s),a=BigInt(e);if(n){let c=r.length-1;for(i&&(r[c--]=Number(a<<u),a>>=o);c>=0;c--)r[c]=Number(a),a>>=8n}else{let c=0,p=Math.trunc(t/8);for(;c<p;c++)r[c]=Number(a),a>>=8n;i&&(r[c]=Number(a<<u))}}return i?new K(r,t):r}function gp(e,t,n,r,i){return n-t<=6?wp(e.rawBuffer,t,n,r,i):xp(e.rawBuffer,t,n,r,i)}function wp(e,t,n,r,i){let s=n-t,o=0;if(r)for(let u=t;u<n;u++)o*=256,o+=e[u];else for(let u=n-1;u>=t;u--)o*=256,o+=e[u];if(i){let u=2**(s*8-1);o>=u&&(o-=u*2)}return o}function xp(e,t,n,r,i){let s=n-t,o=0n;if(r)for(let u=t;u<n;u++)o*=256n,o+=BigInt(e[u]);else for(let u=n-1;u>=t;u--)o*=256n,o+=BigInt(e[u]);if(i){let u=1n<<BigInt(s*8-1);o>=u&&(o-=u*2n)}return Number(o)}function yp(e,t,n,r,i){let s=t%8===0,o=n-t,u=Math.trunc(t/8),a=0;if(r){if(!s){let c=8-t%8;a=e[u++]&(1<<c)-1,o-=c}for(;o>=8;)a*=256,a+=e[u++],o-=8;o>0&&(a*=2**o,a+=e[u]>>8-o)}else if(s){let c=n-t,p=1;for(;c>=8;)a+=e[u++]*p,p*=256,c-=8;a+=(e[u]>>8-c)*p}else{let c=t%8,p=8-c,_=n-t,x=1;for(;_>=8;){let k=e[u]<<c|e[u+1]>>p;a+=(k&255)*x,x*=256,_-=8,u++}if(_>0){let k=_-Math.max(0,_-p),v=(e[u]&(1<<p)-1)>>p-k;_-=k,_>0&&(v*=2**_,v+=e[u+1]>>8-_),a+=v*x}}if(i){let c=2**(n-t-1);a>=c&&(a-=c*2)}return a}function bp(e,t,n,r,i){let s=t%8===0,o=n-t,u=Math.trunc(t/8),a=0n;if(r){if(!s){let c=8-t%8;a=BigInt(e[u++]&(1<<c)-1),o-=c}for(;o>=8;)a*=256n,a+=BigInt(e[u++]),o-=8;o>0&&(a<<=BigInt(o),a+=BigInt(e[u]>>8-o))}else if(s){let c=n-t,p=0n;for(;c>=8;)a+=BigInt(e[u++])<<p,p+=8n,c-=8;a+=BigInt(e[u]>>8-c)<<p}else{let c=t%8,p=8-c,_=n-t,x=0n;for(;_>=8;){let k=e[u]<<c|e[u+1]>>p;a+=BigInt(k&255)<<x,x+=8n,_-=8,u++}if(_>0){let k=_-Math.max(0,_-p),v=(e[u]&(1<<p)-1)>>p-k;_-=k,_>0&&(v<<=_,v+=e[u+1]>>8-_),a+=BigInt(v)<<x}}if(i){let c=2n**BigInt(n-t-1);a>=c&&(a-=c*2n)}return Number(a)}function ra(e,t,n){if(t<0||t>e.bitSize||n<t||n>e.bitSize){let r=`Invalid bit array slice: start = ${t}, end = ${n}, bit size = ${e.bitSize}`;throw new globalThis.Error(r)}}var ln=class e extends f{static isResult(t){return t instanceof e}},$=class extends ln{constructor(t){super(),this[0]=t}isOk(){return!0}},m=class extends ln{constructor(t){super(),this[0]=t}isOk(){return!1}};function A(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!ta(r)||!ta(i)||!zp(r,i)||vp(r,i)||Op(r,i)||Sp(r,i)||Ap(r,i)||jp(r,i)||Lp(r,i))return!1;let o=Object.getPrototypeOf(r);if(o!==null&&typeof o.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[u,a]=kp(r);for(let c of u(r))n.push(a(r,c),a(i,c))}return!0}function kp(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function vp(e,t){return e instanceof Date&&(e>t||e<t)}function Op(e,t){return!(e instanceof K)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function Sp(e,t){return Array.isArray(e)&&e.length!==t.length}function Ap(e,t){return e instanceof Map&&e.size!==t.size}function jp(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function Lp(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function ta(e){return typeof e=="object"&&e!==null}function zp(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function Ie(e,t){return t===0?0:e%t}function he(e,t){return Math.trunc(wr(e,t))}function wr(e,t){return t===0?0:e/t}function F(e,t,n,r,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=n,o.function=r,o.fn=r;for(let u in s)o[u]=s[u];return o}var se=class extends f{},ke=class extends f{},je=class extends f{};var d=class extends f{constructor(t){super(),this[0]=t}},g=class extends f{};function bi(e,t){if(e instanceof d){let n=e[0];return new $(n)}else return new m(t)}function Vt(e){if(e.isOk()){let t=e[0];return new d(t)}else return new g}function Tt(e,t){return e instanceof d?e[0]:t}function ee(e,t){if(e instanceof d){let n=e[0];return new d(t(n))}else return new g}function ws(e){return e instanceof d?e[0]:new g}function Tp(e,t){return!A(Ct(t,e),new m(void 0))}function na(e,t){return Tp(t,e)}function Et(e,t,n){return ia(t,n,e)}function Ep(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=h(i,r)}}}function Cp(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return Ep(r,l([]));{let i=n.head[0];e=n.tail,t=h(i,r)}}}function tu(e){return Cp(vi(e),l([]))}function qp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let o=r.head[0],u=r.head[1];e=r.tail,t=s(i,o,u),n=s}}}function ki(e,t,n){return qp(vi(e),t,n)}var yr=class extends f{constructor(t){super(),this[0]=t}},qt=class extends f{constructor(t){super(),this[0]=t}},V=class extends f{},dt=class extends f{};function Pp(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1))e=n.tail,t=r+1;else return r}}function ru(e){return Pp(e,0)}function br(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=h(i,r)}}}function T(e){return br(e,l([]))}function sa(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return!1;if(n.atLeastLength(1)&&A(n.head,r)){let i=n.head;return!0}else e=n.tail,t=r}}function Mp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let o=r.head,u=r.tail,a=i(o)?h(o,s):s;e=u,t=i,n=a}}}function Bt(e,t){return Mp(e,t,l([]))}function Up(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let o=r.head,u=r.tail,a=(()=>{let c=i(o);if(c.isOk()){let p=c[0];return h(p,s)}else return s})();e=u,t=i,n=a}}}function It(e,t){return Up(e,t,l([]))}function Wp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let o=r.head;e=r.tail,t=i,n=h(i(o),s)}}}function L(e,t){return Wp(e,t,l([]))}function Fp(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=h(i,r)}}}function Xt(e,t){return Fp(T(e),t)}function xs(e,t){return h(t,e)}function Dp(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return T(r);{let i=n.head;e=n.tail,t=br(i,r)}}}function Nt(e){return Dp(e,l([]))}function nu(e,t){let n=L(e,t);return Nt(n)}function ue(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let o=r.head;e=r.tail,t=s(i,o),n=s}}}function Rp(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.hasLength(0))return s;{let a=i.head;e=i.tail,t=o(s,a,u),n=o,r=u+1}}}function iu(e,t,n){return Rp(e,t,n,0)}function ys(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let o=r.head,u=r.tail,a=s(i,o);if(a instanceof yr){let c=a[0];e=u,t=c,n=s}else return a[0]}}}function Ze(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new m(void 0);{let i=n.head,s=n.tail;if(r(i))return new $(i);e=s,t=r}}}function Jp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let o=r.head,u=r.tail;na(i,o)?(e=u,t=i,n=s):(e=u,t=Et(i,o,void 0),n=h(o,s))}}}function oa(e){return Jp(e,oe(),l([]))}function Hp(e,t,n,r,i,s){for(;;){let o=e,u=t,a=n,c=r,p=i,_=s,x=h(p,a);if(o.hasLength(0))return c instanceof V?h(T(x),_):h(x,_);{let k=o.head,v=o.tail,U=u(p,k);if(U instanceof je&&c instanceof dt)e=v,t=u,n=x,r=c,i=k,s=_;else if(U instanceof se&&c instanceof V)e=v,t=u,n=x,r=c,i=k,s=_;else if(U instanceof ke&&c instanceof V)e=v,t=u,n=x,r=c,i=k,s=_;else if(U instanceof je&&c instanceof V){let D=c instanceof V?h(T(x),_):h(x,_);if(v.hasLength(0))return h(l([k]),D);{let ae=v.head,Be=v.tail,C=(()=>{let j=u(k,ae);return j instanceof se?new V:j instanceof ke?new V:new dt})();e=Be,t=u,n=l([k]),r=C,i=ae,s=D}}else if(U instanceof se&&c instanceof dt){let D=c instanceof V?h(T(x),_):h(x,_);if(v.hasLength(0))return h(l([k]),D);{let ae=v.head,Be=v.tail,C=(()=>{let j=u(k,ae);return j instanceof se?new V:j instanceof ke?new V:new dt})();e=Be,t=u,n=l([k]),r=C,i=ae,s=D}}else{let D=c instanceof V?h(T(x),_):h(x,_);if(v.hasLength(0))return h(l([k]),D);{let ae=v.head,Be=v.tail,C=(()=>{let j=u(k,ae);return j instanceof se?new V:j instanceof ke?new V:new dt})();e=Be,t=u,n=l([k]),r=C,i=ae,s=D}}}}}function Gp(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.hasLength(0))return br(s,u);if(s.hasLength(0))return br(i,u);{let a=i.head,c=i.tail,p=s.head,_=s.tail,x=o(a,p);x instanceof se?(e=c,t=s,n=o,r=h(a,u)):x instanceof je?(e=i,t=_,n=o,r=h(p,u)):(e=i,t=_,n=o,r=h(p,u))}}}function Kp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);if(r.hasLength(1)){let o=r.head;return T(h(T(o),s))}else{let o=r.head,u=r.tail.head,a=r.tail.tail,c=Gp(o,u,i,l([]));e=a,t=i,n=h(c,s)}}}function Vp(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.hasLength(0))return br(s,u);if(s.hasLength(0))return br(i,u);{let a=i.head,c=i.tail,p=s.head,_=s.tail,x=o(a,p);x instanceof se?(e=i,t=_,n=o,r=h(p,u)):x instanceof je?(e=c,t=s,n=o,r=h(a,u)):(e=c,t=s,n=o,r=h(a,u))}}}function Yp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);if(r.hasLength(1)){let o=r.head;return T(h(T(o),s))}else{let o=r.head,u=r.tail.head,a=r.tail.tail,c=Vp(o,u,i,l([]));e=a,t=i,n=h(c,s)}}}function Xp(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return l([]);if(r.hasLength(1)&&i instanceof V)return r.head;if(r.hasLength(1)&&i instanceof dt){let o=r.head;return T(o)}else i instanceof V?(e=Kp(r,s,l([])),t=new dt,n=s):(e=Yp(r,s,l([])),t=new V,n=s)}}function bs(e,t){if(e.hasLength(0))return l([]);if(e.hasLength(1)){let n=e.head;return l([n])}else{let n=e.head,r=e.tail.head,i=e.tail.tail,s=(()=>{let u=t(n,r);return u instanceof se?new V:u instanceof ke?new V:new dt})(),o=Hp(i,t,l([n]),s,r,l([]));return Xp(o,new V,t)}}function Zp(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.atLeastLength(1)&&A(i.head[0],s)){let a=i.head[0],c=i.tail;return br(u,h([a,o],c))}else if(i.atLeastLength(1)){let a=i.head;e=i.tail,t=s,n=o,r=h(a,u)}else return T(h([s,o],u))}}function su(e,t,n){return Zp(e,t,n,l([]))}function aa(e){return!!e.isOk()}function Z(e,t){if(e.isOk()){let n=e[0];return new $(t(n))}else{let n=e[0];return new m(n)}}function ks(e,t){if(e.isOk()){let n=e[0];return new $(n)}else{let n=e[0];return new m(t(n))}}function fn(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new m(n)}}function Le(e,t){return fn(e,t)}function ze(e,t){return e.isOk()?e[0]:t}function ca(e,t){return e.isOk()?e[0]:t()}var Zt=class extends f{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}};function i_(e,t){return ks(e,n=>L(n,t))}function pa(e){return au(e)}function _a(e){return ma(e)}function da(e){return t=>{if(e.hasLength(0))return new m(l([new Zt("another type",Ne(t),l([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new $(s)}else return da(r)(t)}}}function s_(e,t){let n=t,r=da(l([au,o=>Z($a(o),y)])),i=(()=>{let o=r(n);if(o.isOk())return o[0];{let u=l(["<",Ne(n),">"]),a=Pt(u);return a}})(),s=e;return new Zt(s.expected,s.found,h(i,e.path))}function Si(e,t){return n=>{let r=new Zt("field","nothing",l([]));return fn(ha(n,e),i=>{let o=bi(i,l([r])),u=fn(o,t);return i_(u,a=>s_(a,e))})}}var ga=new WeakMap,cu=new DataView(new ArrayBuffer(8)),fu=0;function pu(e){let t=ga.get(e);if(t!==void 0)return t;let n=fu++;return fu===2147483647&&(fu=0),ga.set(e,n),n}function _u(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function $u(e){let t=0,n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function xa(e){cu.setFloat64(0,e);let t=cu.getInt32(0),n=cu.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function o_(e){return $u(e.toString())}function u_(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return pu(e);if(e instanceof Date)return xa(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+Je(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+Je(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+_u(Je(r),Je(i))|0});else{let r=Object.keys(e);for(let i=0;i<r.length;i++){let s=r[i],o=e[s];n=n+_u(Je(o),$u(s))|0}}return n}function Je(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return xa(e);case"string":return $u(e);case"bigint":return o_(e);case"object":return u_(e);case"symbol":return pu(e);case"function":return pu(e);default:return 0}}var mt=5,mu=Math.pow(2,mt),l_=mu-1,a_=mu/2,c_=mu/4,ve=0,$t=1,Pe=2,Or=3,hu={type:Pe,bitmap:0,array:[]};function Ai(e,t){return e>>>t&l_}function Os(e,t){return 1<<Ai(e,t)}function f_(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function gu(e,t){return f_(e&t-1)}function He(e,t,n){let r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function p_(e,t,n){let r=e.length,i=new Array(r+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=n;s<r;)i[o++]=e[s++];return i}function du(e,t){let n=e.length,r=new Array(n-1),i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function ya(e,t,n,r,i,s){let o=Je(t);if(o===r)return{type:Or,hash:o,array:[{type:ve,k:t,v:n},{type:ve,k:i,v:s}]};let u={val:!1};return ji(wu(hu,e,o,t,n,u),e,r,i,s,u)}function ji(e,t,n,r,i,s){switch(e.type){case $t:return __(e,t,n,r,i,s);case Pe:return wu(e,t,n,r,i,s);case Or:return d_(e,t,n,r,i,s)}}function __(e,t,n,r,i,s){let o=Ai(n,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:$t,size:e.size+1,array:He(e.array,o,{type:ve,k:r,v:i})};if(u.type===ve)return A(r,u.k)?i===u.v?e:{type:$t,size:e.size,array:He(e.array,o,{type:ve,k:r,v:i})}:(s.val=!0,{type:$t,size:e.size,array:He(e.array,o,ya(t+mt,u.k,u.v,n,r,i))});let a=ji(u,t+mt,n,r,i,s);return a===u?e:{type:$t,size:e.size,array:He(e.array,o,a)}}function wu(e,t,n,r,i,s){let o=Os(n,t),u=gu(e.bitmap,o);if((e.bitmap&o)!==0){let a=e.array[u];if(a.type!==ve){let p=ji(a,t+mt,n,r,i,s);return p===a?e:{type:Pe,bitmap:e.bitmap,array:He(e.array,u,p)}}let c=a.k;return A(r,c)?i===a.v?e:{type:Pe,bitmap:e.bitmap,array:He(e.array,u,{type:ve,k:r,v:i})}:(s.val=!0,{type:Pe,bitmap:e.bitmap,array:He(e.array,u,ya(t+mt,c,a.v,n,r,i))})}else{let a=e.array.length;if(a>=a_){let c=new Array(32),p=Ai(n,t);c[p]=wu(hu,t+mt,n,r,i,s);let _=0,x=e.bitmap;for(let k=0;k<32;k++){if((x&1)!==0){let v=e.array[_++];c[k]=v}x=x>>>1}return{type:$t,size:a+1,array:c}}else{let c=p_(e.array,u,{type:ve,k:r,v:i});return s.val=!0,{type:Pe,bitmap:e.bitmap|o,array:c}}}}function d_(e,t,n,r,i,s){if(n===e.hash){let o=xu(e,r);if(o!==-1)return e.array[o].v===i?e:{type:Or,hash:n,array:He(e.array,o,{type:ve,k:r,v:i})};let u=e.array.length;return s.val=!0,{type:Or,hash:n,array:He(e.array,u,{type:ve,k:r,v:i})}}return ji({type:Pe,bitmap:Os(e.hash,t),array:[e]},t,n,r,i,s)}function xu(e,t){let n=e.array.length;for(let r=0;r<n;r++)if(A(t,e.array[r].k))return r;return-1}function vs(e,t,n,r){switch(e.type){case $t:return $_(e,t,n,r);case Pe:return m_(e,t,n,r);case Or:return h_(e,r)}}function $_(e,t,n,r){let i=Ai(n,t),s=e.array[i];if(s!==void 0){if(s.type!==ve)return vs(s,t+mt,n,r);if(A(r,s.k))return s}}function m_(e,t,n,r){let i=Os(n,t);if((e.bitmap&i)===0)return;let s=gu(e.bitmap,i),o=e.array[s];if(o.type!==ve)return vs(o,t+mt,n,r);if(A(r,o.k))return o}function h_(e,t){let n=xu(e,t);if(!(n<0))return e.array[n]}function yu(e,t,n,r){switch(e.type){case $t:return g_(e,t,n,r);case Pe:return w_(e,t,n,r);case Or:return x_(e,r)}}function g_(e,t,n,r){let i=Ai(n,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===ve){if(!A(s.k,r))return e}else if(o=yu(s,t+mt,n,r),o===s)return e;if(o===void 0){if(e.size<=c_){let u=e.array,a=new Array(e.size-1),c=0,p=0,_=0;for(;c<i;){let x=u[c];x!==void 0&&(a[p]=x,_|=1<<c,++p),++c}for(++c;c<u.length;){let x=u[c];x!==void 0&&(a[p]=x,_|=1<<c,++p),++c}return{type:Pe,bitmap:_,array:a}}return{type:$t,size:e.size-1,array:He(e.array,i,o)}}return{type:$t,size:e.size,array:He(e.array,i,o)}}function w_(e,t,n,r){let i=Os(n,t);if((e.bitmap&i)===0)return e;let s=gu(e.bitmap,i),o=e.array[s];if(o.type!==ve){let u=yu(o,t+mt,n,r);return u===o?e:u!==void 0?{type:Pe,bitmap:e.bitmap,array:He(e.array,s,u)}:e.bitmap===i?void 0:{type:Pe,bitmap:e.bitmap^i,array:du(e.array,s)}}return A(r,o.k)?e.bitmap===i?void 0:{type:Pe,bitmap:e.bitmap^i,array:du(e.array,s)}:e}function x_(e,t){let n=xu(e,t);if(n<0)return e;if(e.array.length!==1)return{type:Or,hash:e.hash,array:du(e.array,n)}}function ba(e,t){if(e===void 0)return;let n=e.array,r=n.length;for(let i=0;i<r;i++){let s=n[i];if(s!==void 0){if(s.type===ve){t(s.v,s.k);continue}ba(s,t)}}}var Me=class e{static fromObject(t){let n=Object.keys(t),r=e.new();for(let i=0;i<n.length;i++){let s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=e.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new e(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;let r=vs(this.root,0,Je(t),t);return r===void 0?n:r.v}set(t,n){let r={val:!1},i=this.root===void 0?hu:this.root,s=ji(i,0,Je(t),t,n,r);return s===this.root?this:new e(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let n=yu(this.root,0,Je(t),t);return n===this.root?this:n===void 0?e.new():new e(n,this.size-1)}has(t){return this.root===void 0?!1:vs(this.root,0,Je(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){ba(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+_u(Je(n),Je(r))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((n,r)=>{if(!A(t.get(r,!n),n))throw wa}),!0}catch(n){if(n===wa)return!1;throw n}}},wa=Symbol();var bu=void 0,ka={};function J(e){return e}function Ee(e){return/^[-+]?(\d+)$/.test(e)?new $(parseInt(e)):new m(bu)}function y(e){return e.toString()}function ku(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Sa(e,t){return e.toString(t).toUpperCase()}function uu(e,t,n){return typeof e.replaceAll<"u"?e.replaceAll(t,n):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}function Qt(e){if(e==="")return 0;let t=Ss(e);if(t){let n=0;for(let r of t)n++;return n}else return e.match(/./gsu).length}function kr(e){let t=Ss(e);return t?R.fromArray(Array.from(t).map(n=>n.segment)):R.fromArray(e.match(/./gsu))}var va;function Ss(e){if(globalThis.Intl&&Intl.Segmenter)return va||=new Intl.Segmenter,va.segment(e)[Symbol.iterator]()}function Li(e){let t,n=Ss(e);return n?t=n.next().value?.segment:t=e.match(/./su)?.[0],t?new $([t,e.slice(t.length)]):new m(bu)}function Sr(e){return[e.charCodeAt(0)|0,e.slice(1)]}function Te(e){return e.toLowerCase()}function lu(e,t){return R.fromArray(e.split(t))}function Pt(e){let t="";for(let n of e)t=t+n;return t}function vu(e,t,n){if(n<=0||t>=e.length)return"";let r=Ss(e);if(r){for(;t-- >0;)r.next();let i="";for(;n-- >0;){let s=r.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+n).join("")}function pe(e,t,n){return e.slice(t,t+n)}function As(e,t){return e.startsWith(t)}var Aa=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),kh=new RegExp(`^[${Aa}]*`),vh=new RegExp(`[${Aa}]*$`);function ja(e){typeof process=="object"&&process.stderr?.write?process.stderr.write(e+`
`):typeof Deno=="object"?Deno.stderr.writeSync(new TextEncoder().encode(e+`
`)):console.log(e)}function js(e){return Math.trunc(e)}function oe(){return Me.new()}function vi(e){return R.fromArray(e.entries())}function Ct(e,t){let n=e.get(t,ka);return n===ka?new m(bu):new $(n)}function ia(e,t,n){return n.set(e,t)}function Ne(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof ln)return"Result";if(e instanceof R)return"List";if(e instanceof K)return"BitArray";if(e instanceof Me)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Ls(e,t){return b_(e,Ne(t))}function b_(e,t){return new m(R.fromArray([new Zt(e,t,R.fromArray([]))]))}function au(e){return typeof e=="string"?new $(e):Ls("String",e)}function $a(e){return Number.isInteger(e)?new $(e):Ls("Int",e)}function ma(e){return typeof e=="boolean"?new $(e):Ls("Bool",e)}function ha(e,t){let n=()=>Ls("Dict",e);if(e instanceof Me||e instanceof WeakMap||e instanceof Map){let r=Ct(e,t);return new $(r.isOk()?new d(r[0]):new g)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?Oa(e,t,()=>new $(new g)):Oa(e,t,n)}function Oa(e,t,n){try{return t in e?new $(new d(e[t])):n()}catch{return n()}}function ht(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return k_(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return ku(e);if(Array.isArray(e))return`#(${e.map(ht).join(", ")})`;if(e instanceof R)return A_(e);if(e instanceof gs)return j_(e);if(e instanceof K)return`<<${La(e,"")}>>`;if(e instanceof f)return S_(e);if(e instanceof Me)return v_(e);if(e instanceof Set)return`//js(Set(${[...e].map(ht).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return O_(e)}function k_(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];switch(r){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}}return t+='"',t}function v_(e){let t="dict.from_list([",n=!0;return e.forEach((r,i)=>{n||(t=t+", "),t=t+"#("+ht(i)+", "+ht(r)+")",n=!1}),t+"])"}function O_(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${ht(s)}: ${ht(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function S_(e){let t=Object.keys(e).map(n=>{let r=ht(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function A_(e){return`[${e.toArray().map(ht).join(", ")}]`}function j_(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function La(e,t){if(e.bitSize===0)return t;for(let n=0;n<e.byteSize-1;n++)t+=e.byteAt(n).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let n=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-n,t+=`:size(${n})`}return t}function Re(e){return e>=0?e:e*-1}function za(e){return Sa(e,16)}function cn(e,t){return e===t?new ke:e<t?new se:new je}function Ou(e,t){return e<t?e:t}function zs(e,t){return e>t?e:t}function Ta(e,t,n){let i=Ou(e,n);return zs(i,t)}function Su(e,t){if(t===0)return new m(void 0);{let n=t;return new $(he(e,n))}}function Ts(e,t,n){let i=e,s=uu(i,t,n);return s}function er(e,t,n){if(n<0)return"";if(t<0){let s=Qt(e)+t;return s<0?"":vu(e,s,n)}else return vu(e,t,n)}function Qe(e){let n=Pt(e);return n}function C_(e,t,n){for(;;){let r=e,i=t,s=n;if(i<=0)return s;e=r,t=i-1,n=s+r}}function Au(e,t){return C_(e,t,"")}function Ca(e,t){let n=Qt(t),r=he(e,n),i=Ie(e,n);return Au(t,r)+er(t,0,i)}function Ue(e,t,n){let r=Qt(e),i=t-r;return i<=0?e:Ca(i,n)+e}function qa(e,t,n){let r=Qt(e),i=t-r;return i<=0?e:e+Ca(i,n)}function Es(e,t){for(;;){let n=e,r=t;if(r>0){let s=Li(n);if(s.isOk())e=s[0][1],t=r-1;else return n}else return n}}function tr(e,t){if(t==="")return kr(e);{let r=e,i=lu(r,t);return L(i,J)}}function zi(e){let t=ht(e);return t}function Pa(e,t){if(e instanceof Me||e instanceof WeakMap||e instanceof Map){let r={},i=e.get(t,r);return i===r?new $(new g):new $(new d(i))}let n=Number.isInteger(t);if(n&&t>=0&&t<8&&e instanceof R){let r=0;for(let i of e){if(r===t)return new $(new d(i));r++}return new m("Indexable")}return n&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new $(new d(e[t])):new $(new g):new m(n?"Indexable":"Dict")}function Ma(e,t,n,r,i){if(!(e instanceof R||Array.isArray(e))){let o=new Mt("List",Ne(e),i);return[i,R.fromArray([o])]}let s=[];for(let o of e){let u=t(o),[a,c]=u;if(c instanceof mr){let[p,_]=n(u,r.toString());return[i,_]}s.push(a),r++}return[R.fromArray(s),i]}function Ua(e){if(e instanceof Me)return new $(e);if(e instanceof Map||e instanceof WeakMap)return new $(Me.fromMap(e));if(e==null)return new m("Dict");if(typeof e!="object")return new m("Dict");let t=Object.getPrototypeOf(e);return t===Object.prototype||t===null?new $(Me.fromObject(e)):new m("Dict")}function Wa(e){return Number.isInteger(e)?new $(e):new m(0)}function Fa(e){return typeof e=="string"?new $(e):new m(0)}function Da(e){return e==null}var Mt=class extends f{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}},Ge=class extends f{constructor(t){super(),this.function=t}};function zu(e,t){let n=t.function(e),r=n[0],i=n[1];return i.hasLength(0)?new $(r):new m(i)}function Oe(e){return new Ge(t=>[e,l([])])}function B_(e,t){return new Ge(n=>{let r=e.function(n),i=r[0],s=r[1];return[t(i),s]})}function I_(e,t,n){for(;;){let r=e,i=t,s=n;if(s.hasLength(0))return i;{let o=s.head,u=s.tail,a=o.function(r),c=a;if(a[1].hasLength(0))return c;e=r,t=i,n=u}}}function N_(e,t){return new Ge(n=>{let r=e.function(n),i=r;return r[1].hasLength(0)?i:I_(n,i,t)})}function Ra(e){return new Ge(t=>{if(Da(t))return[new g,l([])];{let r=e.function(t),i=r[0],s=r[1];return[new d(i),s]}})}function Ja(e,t){return l([new Mt(e,Ne(t),l([]))])}function Ha(e,t,n){let r=n(e);return r.isOk()?[r[0],l([])]:[r[0],l([new Mt(t,Ne(e),l([]))])]}function P_(e){return A(!0,e)?[!0,l([])]:A(!1,e)?[!1,l([])]:[!1,Ja("Bool",e)]}function M_(e){return Ha(e,"Int",Wa)}var Ga=new Ge(P_),Ut=new Ge(M_);function U_(e){return Ha(e,"String",Fa)}var Y=new Ge(U_);function W_(e,t,n,r,i){let s=r(t);if(s[1].hasLength(0)){let o=s[0],u=i(n);if(u[1].hasLength(0)){let a=u[0];return[Et(e[0],o,a),e[1]]}else{let a=u[1];return _n([oe(),a],l(["values"]))}}else{let o=s[1];return _n([oe(),o],l(["keys"]))}}function Ka(e,t){return new Ge(n=>{let r=Ua(n);if(r.isOk()){let i=r[0];return ki(i,[oe(),l([])],(s,o,u)=>s[1].hasLength(0)?W_(s,o,u,e.function,t.function):s)}else return[oe(),Ja("Dict",n)]})}function dn(e){return new Ge(t=>Ma(t,e.function,(n,r)=>_n(n,l([r])),0,l([])))}function _n(e,t){let n=N_(Y,l([B_(Ut,y)])),r=L(t,s=>{let o=s,u=zu(o,n);return u.isOk()?u[0]:"<"+Ne(o)+">"}),i=L(e[1],s=>{let o=s;return new Mt(o.expected,o.found,Xt(r,s.path))});return[e[0],i]}function F_(e,t,n,r,i){for(;;){let s=e,o=t,u=n,a=r,c=i;if(s.hasLength(0)){let p=u(a);return _n(p,T(o))}else{let p=s.head,_=s.tail,x=Pa(a,p);if(x.isOk()&&x[0]instanceof d){let k=x[0][0];e=_,t=h(p,o),n=u,r=k,i=c}else{if(x.isOk()&&x[0]instanceof g)return c(a,h(p,o));{let k=x[0],D=[u(a)[0],l([new Mt(k,Ne(a),l([]))])];return _n(D,T(o))}}}}}function D_(e,t,n){return new Ge(r=>{let i=F_(e,l([]),t.function,r,(p,_)=>{let v=[t.function(p)[0],l([new Mt("Field","Nothing",l([]))])];return _n(v,T(_))}),s=i[0],o=i[1],u=n(s).function(r),a=u[0],c=u[1];return[a,Xt(o,c)]})}function q(e,t,n){return D_(l([e]),t,n)}function Eu(e){return JSON.stringify(e)}function Va(e){return Object.fromEntries(e)}function Ya(){return null}function Xa(e){try{let t=JSON.parse(e);return new $(t)}catch(t){return new m(R_(t,e))}}function R_(e,t){return J_(e)?new qs:H_(e,t)}function J_(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function H_(e,t){let n=[G_,K_,Y_,V_];for(let r of n){let i=r(e,t);if(i)return i}return new rr("",0)}function G_(e){let n=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!n)return null;let r=Cs(n[1]);return new rr(r,-1)}function K_(e){let n=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!n)return null;let r=Cs(n[1]),i=Number(n[2]);return new rr(r,i)}function V_(e,t){let r=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!r)return null;let i=Number(r[2]),s=Number(r[3]),o=X_(i,s,t),u=Cs(t[o]);return new rr(u,o)}function Y_(e){let n=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!n)return null;let r=Cs(n[2]);return new rr(r,0)}function Cs(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function X_(e,t,n){if(e===1)return t-1;let r=1,i=0;return n.split("").find((s,o)=>(s===`
`&&(r+=1),r===e?(i=o+t,!0):!1)),i}var qs=class extends f{},rr=class extends f{constructor(t){super(),this[0]=t}};var Cu=class extends f{constructor(t){super(),this[0]=t}};function Z_(e,t){return Le(Xa(e),n=>{let r=zu(n,t);return ks(r,i=>new Cu(i))})}function Za(e,t){return Z_(e,t)}function $n(e){return Eu(e)}function te(e){return e}function Bu(e){return e}function Wt(e){return e}function Q_(){return Ya()}function Qa(e,t){if(e instanceof d){let n=e[0];return t(n)}else return Q_()}function Ce(e){return Va(e)}function mn(e,t,n){return e?t:n()}function Iu(e){let n=zi(e);return ja(n),e}function tc(e,t){return e.lastIndex=0,e.test(t)}function rc(e,t){try{let n="gu";return t.case_insensitive&&(n+="i"),t.multi_line&&(n+="m"),new $(new RegExp(e,n))}catch(n){let r=(n.columnNumber||0)|0;return new m(new Bs(n.message,r))}}var Bs=class extends f{constructor(t,n){super(),this.error=t,this.byte_index=n}},Is=class extends f{constructor(t,n){super(),this.case_insensitive=t,this.multi_line=n}};function nc(e,t){return rc(e,t)}function Nu(e,t){return tc(e,t)}var Ns=class extends f{constructor(t){super(),this.dict=t}};function sc(){return new Ns(oe())}function Pu(e,t){let n=e.dict,r=Ct(n,t);return aa(r)}var rd=void 0;function oc(e){let t=ue(e,oe(),(n,r)=>Et(n,r,rd));return new Ns(t)}var Ps=class extends f{constructor(t){super(),this.run=t}},qe=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},nr=class extends f{},jr=class extends f{constructor(t){super(),this[0]=t}},ir=class extends f{},Ms=class extends f{constructor(t,n,r){super(),this.span=t,this.lexeme=n,this.value=r}},hn=class extends f{constructor(t,n,r,i){super(),this.row_start=t,this.col_start=n,this.row_end=r,this.col_end=i}},Us=class extends f{constructor(t,n,r){super(),this.row=t,this.col=n,this.lexeme=r}},Uu=class extends f{constructor(t){super(),this.matchers=t}},Ar=class extends f{constructor(t,n,r,i,s){super(),this.source=t,this.tokens=n,this.current=r,this.row=i,this.col=s}};function Ws(e){return new Uu(t=>e)}function Wu(e){return new Ps((t,n,r)=>{let i=e(n,r),s=Z(i,o=>new qe(o,t));return ze(s,new ir)})}function Fs(e){return new Ps(e)}function uc(e,t,n,r){return ys(r,new ir,(i,s)=>{let o=s.run(e,t,n);if(o instanceof qe){let u=o;return new qt(u)}else{if(o instanceof nr)return new qt(new nr);if(o instanceof jr){let u=o;return new qt(u)}else return new yr(new ir)}})}function nd(e,t){return t===`
`?1:e+1}function id(e,t){return t===`
`?e+1:e}function sd(e,t,n){for(;;){let r=e,i=t,s=n,o=r.matchers(i),u=s.source,a=s.current;if(u.hasLength(0)&&a[2]==="")return new $(T(s.tokens));if(u.hasLength(0)){let c=a[0],p=a[1],_=a[2],x=uc(i,_,"",o);if(x instanceof ir)return new m(new Us(c,p,_));if(x instanceof nr)return new m(new Us(c,p,_));if(x instanceof jr)return new $(T(s.tokens));{let k=x[0],v=new hn(c,p,s.row,s.col),U=new Ms(v,_,k);return new $(T(h(U,s.tokens)))}}else{let c=u.head,p=u.tail,_=a[0],x=a[1],k=a[2],v=id(s.row,c),U=nd(s.col,c),D=uc(i,k,c,o);if(D instanceof qe){let ae=D[0],Be=D[1],C=new hn(_,x,s.row,s.col),j=new Ms(C,k,ae);e=r,t=Be,n=new Ar(p,h(j,s.tokens),[s.row,s.col,c],v,U)}else if(D instanceof nr)e=r,t=i,n=new Ar(p,s.tokens,[_,x,k+c],v,U);else if(D instanceof jr){let ae=D[0];e=r,t=ae,n=new Ar(p,s.tokens,[s.row,s.col,c],v,U)}else e=r,t=i,n=new Ar(p,s.tokens,[_,x,k+c],v,U)}}}function Ds(e,t){let n=kr(e),r=new Ar(n,l([]),[1,1,""],1,1);return(i=>sd(t,void 0,i))(r)}function Du(e){return e.toArray()}function lc(e){return e.length}function ac(e,t){return e[t]}function od(e,t){return t>=0&&t<lc(e)}function cc(e,t){return od(e,t)?new $(ac(e,t)):new m(void 0)}var gt=class extends f{constructor(t){super(),this[0]=t}},_e=class extends f{constructor(t,n,r){super(),this[0]=t,this[1]=n,this[2]=r}},We=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},Rs=class extends f{constructor(t,n,r,i){super(),this.src=t,this.idx=n,this.pos=r,this.ctx=i}},le=class extends f{constructor(t){super(),this[0]=t}};var Js=class extends f{},Hs=class extends f{constructor(t,n){super(),this[0]=t,this.got=n}},Ru=class extends f{constructor(t){super(),this[0]=t}},Ju=class extends f{constructor(t,n,r){super(),this.pos=t,this.problem=n,this.context=r}},gn=class extends f{},qi=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},Hu=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}};function wn(e,t){let n=t[0];return n(e)}function Gs(e){let t=cc(e.src,e.idx);if(t.isOk()){let n=t[0].span,r=t[0].value;return[new d(r),(()=>{let i=e;return new Rs(i.src,e.idx+1,n,i.ctx)})()]}else return[new g,e]}function Q(e){return new gt(t=>new _e(new le(!1),e,t))}function et(e){return Q(e)}function Gu(e){return new gt(t=>{let n=wn(t,e);if(n instanceof _e){let r=n[1],i=n[2];return new _e(new le(!1),r,i)}else{let r=n[1];return new We(new le(!1),r)}})}function fc(e,t){let n=e[0],r=t[0];return new le(n||r)}function I(e,t){return new gt(n=>{let r=wn(n,e);if(r instanceof _e){let i=r[0],s=r[1],o=r[2],u=wn(o,t(s));if(u instanceof _e){let a=u[0],c=u[1],p=u[2];return new _e(fc(i,a),c,p)}else{let a=u[0],c=u[1];return new We(fc(i,a),c)}}else{let i=r[0],s=r[1];return new We(i,s)}})}function Ke(e,t){return I(e,t)}function Ku(e,t){return I(e,n=>Q(t(n)))}function Ii(e){return new gt(t=>{let n=Gs(t),r=n[0],i=n[1],s=ee(r,e);if(r instanceof d&&s instanceof d&&s[0]){let o=r[0];return wn(i,I(Ii(e),u=>Q(h(o,u))))}else return r instanceof d&&s instanceof d&&!s[0]?new _e(new le(!1),l([]),t):new _e(new le(!1),l([]),t)})}function sr(e,t){return t===0?Q(l([])):I(e,n=>I(sr(e,t-1),r=>Q(h(n,r))))}function Bi(e,t){return new qi(new gn,new Ju(e.pos,t,e.ctx))}function wt(e){return new gt(t=>{let n=Gs(t);if(n[0]instanceof d&&A(e,n[0][0])){let r=n[0][0],i=n[1];return new _e(new le(!0),void 0,i)}else if(n[0]instanceof d){let r=n[0][0],i=n[1];return new We(new le(!1),Bi(i,new Hs(zi(e),r)))}else{let r=n[1];return new We(new le(!1),Bi(r,new Js))}})}function Ni(){return new gt(e=>{let t=Gs(e);if(t[0]instanceof d){let n=t[0][0],r=t[1];return new We(new le(!1),Bi(r,new Ru(n)))}else return new _e(new le(!1),void 0,e)})}function or(e,t){return new gt(n=>{let r=Gs(n),i=r[0],s=r[1],o=ee(i,t);if(i instanceof d&&o instanceof d&&o[0]){let u=i[0];return new _e(new le(!1),u,s)}else if(i instanceof d&&o instanceof d&&!o[0]){let u=i[0];return new We(new le(!1),Bi(s,new Hs(e,u)))}else return new We(new le(!1),Bi(s,new Js))})}function pc(e,t){return I(or(e,t),n=>I(Ii(t),r=>Q(h(n,r))))}function _c(e,t){for(;;){let n=e,r=t;if(n instanceof gn)return r;if(n instanceof qi&&n[0]instanceof gn){let i=n[1];return h(i,r)}else if(n instanceof qi){let i=n[0],s=n[1];e=i,t=h(s,r)}else{let i=n[0],s=n[1];e=i,t=_c(s,r)}}}function Ks(e,t){let n=new Rs(Du(e),0,new hn(1,1,1,1),l([])),r=wn(n,t);if(r instanceof _e){let i=r[1];return new $(i)}else{let i=r[1];return new m(_c(i,l([])))}}function ld(e,t){if(e instanceof _e){let n=e[0],r=e[1],i=e[2];return new _e(n,r,i)}else{let n=e[0],r=e[1];return new We(n,new Hu(t,r))}}function Ve(e){return new gt(t=>{let n=new We(new le(!1),new gn);return ys(e,n,(r,i)=>{if(r instanceof _e)return new qt(r);if(r instanceof We&&r[0]instanceof le&&r[0][0])return new qt(r);{let s=r[1],o=wn(t,i),u=ld(o,s);return new yr(u)}})})}function dc(e){return Ve(l([Ku(e,t=>new d(t)),Q(new g)]))}var Ft=class extends f{constructor(t){super(),this[0]=t}},Pi=class extends f{},ur=class extends f{},Mi=class extends f{},Vu=class extends f{constructor(t){super(),this[0]=t}};function mc(){let e=new Is(!1,!0),t=nc("^[0-9]+$",e);if(!t.isOk())throw F("let_assert","rada/date/parse",14,"lexer","Pattern match failed, no pattern matched the value.",{value:t});let n=t[0],r=i=>Nu(n,i);return Ws(l([Fs((i,s,o)=>s===""?new jr(i):s==="W"?new qe(new Pi,i):s==="T"?new qe(new Mi,i):s==="-"?new qe(new ur,i):r(s)?new qe(new Ft(s),i):new qe(new Vu(s),i))]))}var Wi=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},Dt=class extends f{constructor(t){super(),this[0]=t}},Lr=class extends f{constructor(t){super(),this[0]=t}},Fi=class extends f{},xn=class extends f{},Di=class extends f{constructor(t){super(),this[0]=t}};function cd(e){return e instanceof Lr}function fd(e){return t=>t instanceof Lr?t[0]===e:!1}function hc(e){return e instanceof Di}function Yu(e){return e instanceof Fi}function Ui(e){if(e.hasLength(0))return"";{let t=e.head,n=e.tail;return t instanceof Lr?t[0]+Ui(n):t instanceof Fi||t instanceof xn?"'"+Ui(n):t[0]+Ui(n)}}function pd(){return I(or("Expecting an Alpha token",cd),e=>{if(!(e instanceof Lr))throw F("let_assert","rada/date/pattern",170,"","Pattern match failed, no pattern matched the value.",{value:e});let t=e[0];return I(Ii(fd(t)),n=>Q(new Wi(t,ru(n)+1)))})}function _d(){let e=wt(new xn);return Ke(e,t=>et(new Dt("'")))}function dd(){return I(or("Expecting an Text token",hc),e=>I(Ii(hc),t=>{let n=(()=>{let r=L(h(e,t),i=>{if(!(i instanceof Di))throw F("let_assert","rada/date/pattern",216,"","Pattern match failed, no pattern matched the value.",{value:i});return i[0]});return Qe(r)})();return Q(new Dt(n))}))}function Xu(e){return Ve(l([I(pc("Expecting a non-Quote",t=>!Yu(t)),t=>{let n=Ui(t);return Xu(e+n)}),(()=>{let t=wt(new xn);return Ke(t,n=>Xu(e+"'"))})(),et(e)]))}function $d(){return I(or("Expecting an Quote",Yu),e=>I(Xu(""),t=>I(Ve(l([(()=>{let n=or("Expecting an Quote",Yu);return Ku(n,r=>{})})(),Ni()])),n=>Q(new Dt(t)))))}function md(e){return ue(e,l([]),(t,n)=>{if(n instanceof Dt&&t.atLeastLength(1)&&t.head instanceof Dt){let r=n[0],i=t.head[0],s=t.tail;return h(new Dt(r+i),s)}else return h(n,t)})}function gc(e){return Ve(l([(()=>{let t=Ve(l([pd(),dd(),_d(),$d()]));return Ke(t,n=>gc(h(n,e)))})(),et(md(e))]))}function wc(e){let t=(()=>{let o=kr("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return oc(o)})(),n=s=>Pu(t,s),r=Ws(l([Wu((s,o)=>n(s)?new $(new Lr(s)):new m(void 0)),Fs((s,o,u)=>o==="'"?u==="'"?new nr:new qe(new Fi,s):o==="''"?new qe(new xn,s):new ir),Wu((s,o)=>s===""?new m(void 0):new $(new Di(s)))])),i=Ds(e,r);if(i.isOk()){let s=i[0],o=Ks(s,gc(l([])));return ze(o,l([new Dt(e)]))}else return l([])}function xc(){let e=new Date;return[e.getFullYear(),e.getMonth()+1,e.getDate()]}var Se=class extends f{},tt=class extends f{},rt=class extends f{},nt=class extends f{},it=class extends f{},st=class extends f{},ot=class extends f{},ut=class extends f{},lt=class extends f{},at=class extends f{},ct=class extends f{},Er=class extends f{},Zs=class extends f{},Qs=class extends f{},eo=class extends f{},to=class extends f{},ro=class extends f{},no=class extends f{},Qu=class extends f{},ft=class extends f{constructor(t){super(),this[0]=t}},el=class extends f{constructor(t,n){super(),this.year=t,this.ordinal_day=n}},tl=class extends f{constructor(t,n,r){super(),this.year=t,this.month=n,this.day=r}},rl=class extends f{constructor(t,n,r){super(),this.week_year=t,this.week_number=n,this.weekday=r}},nl=class extends f{constructor(t,n,r,i,s){super(),this.month_name=t,this.month_name_short=n,this.weekday_name=r,this.weekday_name_short=i,this.day_with_suffix=s}},io=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},so=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},oo=class extends f{constructor(t){super(),this[0]=t}},il=class extends f{},Gi=class extends f{},sl=class extends f{};function Lc(e){return new ft(e)}function zc(e){return e[0]}function yc(e,t){return er(e,-1*t,t)}function Ji(e,t){return er(e,0,t)}function ol(e){return e instanceof Se?"January":e instanceof tt?"February":e instanceof rt?"March":e instanceof nt?"April":e instanceof it?"May":e instanceof st?"June":e instanceof ot?"July":e instanceof ut?"August":e instanceof lt?"September":e instanceof at?"October":e instanceof ct?"November":"December"}function bc(e){return e instanceof Zs?"Monday":e instanceof Qs?"Tuesday":e instanceof eo?"Wednesday":e instanceof to?"Thursday":e instanceof ro?"Friday":e instanceof no?"Saturday":"Sunday"}function ao(){return or("Expecting digit",e=>e instanceof Ft)}function gd(){return I(dc(wt(new ur)),e=>{let t=(()=>{let r=ee(e,i=>"-");return Tt(r,"")})();return I((()=>{let n=ao();return sr(n,4)})(),n=>{let r=(()=>{let o=L(n,u=>{if(!(u instanceof Ft))throw F("let_assert","rada/date",1090,"","Pattern match failed, no pattern matched the value.",{value:u});return u[0]});return Qe(o)})(),i=Ee(t+r);if(!i.isOk())throw F("let_assert","rada/date",1095,"","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0];return Q(s)})})}function wd(){return I((()=>{let e=ao();return sr(e,3)})(),e=>{let t=(()=>{let i=L(e,s=>{if(!(s instanceof Ft))throw F("let_assert","rada/date",1108,"","Pattern match failed, no pattern matched the value.",{value:s});return s[0]});return Qe(i)})(),n=Ee(t);if(!n.isOk())throw F("let_assert","rada/date",1113,"","Pattern match failed, no pattern matched the value.",{value:n});let r=n[0];return Q(r)})}function kc(){return I(wd(),e=>Q(new oo(e)))}function ul(){return I((()=>{let e=ao();return sr(e,2)})(),e=>{let t=(()=>{let i=L(e,s=>{if(!(s instanceof Ft))throw F("let_assert","rada/date",1126,"","Pattern match failed, no pattern matched the value.",{value:s});return s[0]});return Qe(i)})(),n=Ee(t);if(!n.isOk())throw F("let_assert","rada/date",1131,"","Pattern match failed, no pattern matched the value.",{value:n});let r=n[0];return Q(r)})}function xd(){return I((()=>{let e=ao();return sr(e,1)})(),e=>{if(!e.hasLength(1)||!(e.head instanceof Ft))throw F("let_assert","rada/date",1142,"","Pattern match failed, no pattern matched the value.",{value:e});let t=e.head[0],n=Ee(t);if(!n.isOk())throw F("let_assert","rada/date",1144,"","Pattern match failed, no pattern matched the value.",{value:n});let r=n[0];return Q(r)})}function ll(e,t){let n=e[0],r=t[0];return cn(n,r)}function xt(e){return e instanceof Se?1:e instanceof tt?2:e instanceof rt?3:e instanceof nt?4:e instanceof it?5:e instanceof st?6:e instanceof ot?7:e instanceof ut?8:e instanceof lt?9:e instanceof at?10:e instanceof ct?11:12}function yd(e){return he(xt(e)+2,3)}function Ye(e){let t=zs(1,e);return t===1?new Se:t===2?new tt:t===3?new rt:t===4?new nt:t===5?new it:t===6?new st:t===7?new ot:t===8?new ut:t===9?new lt:t===10?new at:t===11?new ct:new Er}function Tc(e){let t=zs(1,e);return t===1?new Zs:t===2?new Qs:t===3?new eo:t===4?new to:t===5?new ro:t===6?new no:new Qu}function vc(e,t){let n=e<0?"-":"",r=(()=>{let s=Re(e),o=y(s);return Ue(o,t,"0")})();return n+r}function Xs(e,t){return(e>0&&t<0||e<0&&t>0)&&Ie(e,t)!==0?he(e,t)-1:he(e,t)}function vn(e){let t=e-1,n=Xs(t,4)-Xs(t,100)+Xs(t,400);return 365*t+n}function bd(e){return new ft(vn(e)+1)}function zr(e,t){let n=Ie(e,t);return n>0&&t<0||n<0&&t>0?n+t:n}function co(e){return zr(e,4)===0&&zr(e,100)!==0||zr(e,400)===0}function bn(e){let t=e[0],n=zr(t,7);return n===0?7:n}function Ec(e){let t=vn(e)+4;return t-bn(new ft(t))}function kd(e){let t=bn(bd(e));return t===4||t===3&&co(e)}function yn(e){let n=bn(e);return Tc(n)}function vd(e){let t=zr(e,100),n=t<20?t:zr(t,10),r=Ou(n,4);return r===1?"st":r===2?"nd":r===3?"rd":"th"}function Cc(e){return y(e)+vd(e)}function Od(){return new nl(ol,e=>{let n=ol(e);return Ji(n,3)},bc,e=>{let n=bc(e);return Ji(n,3)},Cc)}function uo(e,t){return t instanceof Se?31:t instanceof tt?co(e)?29:28:t instanceof rt?31:t instanceof nt?30:t instanceof it?31:t instanceof st?30:t instanceof ot||t instanceof ut?31:t instanceof lt?30:t instanceof at?31:t instanceof ct?30:31}function Sd(e,t,n){for(;;){let r=e,i=t,s=n,o=uo(r,i),u=xt(i);if(u<12&&s>o)e=r,t=Ye(u+1),n=s-o;else return new tl(r,i,s)}}function Vs(e,t){return[Xs(e,t),zr(e,t)]}function lr(e){let t=e[0],n=Vs(t,146097),r=n[0],i=n[1],s=Vs(i,36524),o=s[0],u=s[1],a=Vs(u,1461),c=a[0],p=a[1],_=Vs(p,365),x=_[0],k=_[1],v=k===0?0:1;return r*400+o*100+c*4+x+v}function qc(e){let t=e[0],n=lr(e);return new el(n,t-vn(n))}function al(e){let t=qc(e);return Sd(t.year,new Se,t.ordinal_day)}function Bc(e){let t=e[0],n=bn(e),r=lr(new ft(t+(4-n))),i=Ec(r)+1;return new rl(r,1+he(t-i,7),Tc(n))}function Zu(e){return qc(e).ordinal_day}function Tr(e){return al(e).month}function lo(e){let n=Tr(e);return xt(n)}function Ri(e){let n=Tr(e);return yd(n)}function Hi(e){return al(e).day}function Oc(e){return Bc(e).week_year}function Sc(e){return Bc(e).week_number}function Ad(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(o==="y")if(u===2){let c=lr(i),p=y(c),_=Ue(p,2,"0");return yc(_,2)}else{let c=lr(i);return vc(c,u)}else if(o==="Y")if(u===2){let c=Oc(i),p=y(c),_=Ue(p,2,"0");return yc(_,2)}else{let c=Oc(i);return vc(c,u)}else if(o==="Q")if(u===1){let c=Ri(i);return y(c)}else if(u===2){let c=Ri(i);return y(c)}else if(u===3){let c=Ri(i),p=y(c);return(_=>"Q"+_)(p)}else if(u===4){let c=Ri(i);return Cc(c)}else if(u===5){let c=Ri(i);return y(c)}else return"";else if(o==="M")if(u===1){let c=lo(i);return y(c)}else if(u===2){let c=lo(i),p=y(c);return Ue(p,2,"0")}else if(u===3){let c=Tr(i);return s.month_name_short(c)}else if(u===4){let c=Tr(i);return s.month_name(c)}else if(u===5){let c=Tr(i),p=s.month_name_short(c);return Ji(p,1)}else return"";else if(o==="w")if(u===1){let c=Sc(i);return y(c)}else if(u===2){let c=Sc(i),p=y(c);return Ue(p,2,"0")}else return"";else if(o==="d")if(u===1){let c=Hi(i);return y(c)}else if(u===2){let c=Hi(i),p=y(c);return Ue(p,2,"0")}else if(u===3){let c=Hi(i);return s.day_with_suffix(c)}else return"";else if(o==="D")if(u===1){let c=Zu(i);return y(c)}else if(u===2){let c=Zu(i),p=y(c);return Ue(p,2,"0")}else if(u===3){let c=Zu(i),p=y(c);return Ue(p,3,"0")}else return"";else if(o==="E")if(u===1){let c=yn(i);return s.weekday_name_short(c)}else if(u===2){let c=yn(i);return s.weekday_name_short(c)}else if(u===3){let c=yn(i);return s.weekday_name_short(c)}else if(u===4){let c=yn(i);return s.weekday_name(c)}else if(u===5){let c=yn(i),p=s.weekday_name_short(c);return Ji(p,1)}else if(u===6){let c=yn(i),p=s.weekday_name_short(c);return Ji(p,2)}else return"";else if(o==="e")if(u===1){let c=bn(i);return y(c)}else if(u===2){let c=bn(i);return y(c)}else e=i,t=s,n="E",r=u;else return""}}function jd(e,t,n){return ue(t,"",(r,i)=>{if(i instanceof Wi){let s=i[0],o=i[1];return Ad(n,e,s,o)+r}else return i[0]+r})}function Ld(e,t,n){let r=(()=>{let s=wc(n);return T(s)})();return jd(t,r,e)}function cl(e,t){return Ld(e,Od(),t)}function Ys(e){let t=al(new ft(e)),n=12*(t.year-1)+(xt(t.month)-1),r=wr(t.day,100);return n+r}function Ic(e,t,n){let r=t[0],i=n[0];if(e instanceof il){let s=Ys(i)-Ys(r),o=js(s),u=Su(o,12);return ze(u,0)}else if(e instanceof Gi){let s=Ys(i)-Ys(r);return js(s)}else if(e instanceof sl){let s=Su(i-r,7);return ze(s,0)}else return i-r}function kn(e,t,n){return t<=e&&e<=n}function zd(e,t){let n=co(e)?366:365;return kn(t,1,n)?new $(new ft(vn(e)+t)):new m("Invalid ordinal date: "+("ordinal-day "+y(t)+" is out of range")+(" (1 to "+y(n)+")")+(" for "+y(e))+("; received (year "+y(e)+", ordinal-day "+y(t)+")"))}function Td(e,t,n){let r=kd(e)?53:52,i=kn(t,1,r),s=kn(n,1,7);return i?i&&!s?new m("Invalid week date: "+("weekday "+y(n)+" is out of range")+" (1 to 7)"+("; received (year "+y(e)+", week "+y(t)+", weekday "+y(n)+")")):new $(new ft(Ec(e)+(t-1)*7+n)):new m("Invalid week date: "+("week "+y(t)+" is out of range")+(" (1 to "+y(r)+")")+(" for "+y(e))+("; received (year "+y(e)+", week "+y(t)+", weekday "+y(n)+")"))}function Nc(e,t,n){let r=e[0],i=t[0],s=n[0];return kn(r,i,s)}function fl(e){return e?1:0}function Ac(e){return I(ul(),t=>{let n=fl(e);return I(Ve(l([(()=>{let r=sr(wt(new ur),n);return Ke(r,i=>ul())})(),(()=>{let r=Ni();return Ke(r,i=>et(1))})()])),r=>Q(new io(t,r)))})}function jc(e){return I(wt(new Pi),t=>I(ul(),n=>{let r=fl(e);return I(Ve(l([(()=>{let i=sr(wt(new ur),r);return Ke(i,s=>xd())})(),et(1)])),i=>Q(new so(n,i)))}))}function Ed(){return Ve(l([(()=>{let e=wt(new ur);return Ke(e,t=>Ve(l([Gu(kc()),Ac(!0),jc(!0)])))})(),Gu(Ac(!1)),kc(),jc(!1),et(new oo(1))]))}function Pc(e,t){let n=fl(co(e));return t instanceof Se?0:t instanceof tt?31:t instanceof rt?59+n:t instanceof nt?90+n:t instanceof it?120+n:t instanceof st?151+n:t instanceof ot?181+n:t instanceof ut?212+n:t instanceof lt?243+n:t instanceof at?273+n:t instanceof ct?304+n:334+n}function Cr(e,t,n){return new ft(vn(e)+Pc(e,t)+Ta(n,1,uo(e,t)))}function Cd(e,t,n){let r=kn(t,1,12),i=kn(n,1,uo(e,Ye(t)));return r?r&&!i?new m("Invalid date: "+("day "+y(n)+" is out of range")+(" (1 to "+y(uo(e,Ye(t)))+")")+(" for "+(()=>{let o=Ye(t);return ol(o)})())+(t===2&&n===29?" ("+y(e)+" is not a leap year)":"")+("; received (year "+y(e)+", month "+y(t)+", day "+y(n)+")")):new $(new ft(vn(e)+Pc(e,Ye(t))+n)):new m("Invalid date: "+("month "+y(t)+" is out of range")+" (1 to 12)"+("; received (year "+y(e)+", month "+y(t)+", day "+y(n)+")"))}function qd(e,t){if(t instanceof io){let n=t[0],r=t[1];return Cd(e,n,r)}else if(t instanceof so){let n=t[0],r=t[1];return Td(e,n,r)}else{let n=t[0];return zd(e,n)}}function Bd(){return I(gd(),e=>I(Ed(),t=>Q(qd(e,t))))}function Mc(e){let t=Ds(e,mc());if(!t.isOk())throw F("let_assert","rada/date",949,"from_iso_string","Pattern match failed, no pattern matched the value.",{value:t});let n=t[0],r=Ks(n,(()=>{let i=Bd();return Ke(i,s=>Ve(l([(()=>{let o=Ni();return Ke(o,u=>et(s))})(),(()=>{let o=wt(new Mi);return Ke(o,u=>et(new m("Expected a date only, not a date and time")))})(),et(new m("Expected a date only"))])))})());if(r.isOk()&&r[0].isOk()){let i=r[0][0];return new $(i)}else if(r.isOk()&&!r[0].isOk()){let i=r[0][0];return new m(i)}else return new m("Expected a date in ISO 8601 format")}function Rt(){let e=xc(),t=e[0],n=e[1],r=e[2];return Cr(t,Ye(n),r)}var Vi=class extends f{constructor(t,n){super(),this.id=t,this.name=n}},pl=class extends f{constructor(t,n,r){super(),this.id=t,this.name=n,this.position=r}},yt=class extends f{constructor(t,n,r,i,s){super(),this.id=t,this.name=n,this.target=r,this.inflow=i,this.group_id=s}},Xe=class extends f{constructor(t){super(),this.target=t}},Ae=class extends f{constructor(t,n){super(),this.target=t,this.date=n}},Yi=class extends f{constructor(t,n){super(),this.month=t,this.year=n}},Xi=class extends f{constructor(t,n,r,i){super(),this.id=t,this.amount=n,this.category_id=r,this.date=i}},fo=class extends f{constructor(t,n,r,i){super(),this.id=t,this.amount=n,this.category_id=r,this.date=i}},ar=class extends f{constructor(t,n){super(),this.year=t,this.month=n}},qr=class extends f{constructor(t,n,r,i,s,o){super(),this.id=t,this.date=n,this.payee=r,this.category_id=i,this.value=s,this.user_id=o}},N=class extends f{constructor(t){super(),this.value=t}};function cr(){return q("id",Y,e=>Oe(e))}function Uc(){return q("id",Y,e=>q("name",Y,t=>Oe(new Vi(e,t))))}function Wc(){return q("id",Y,e=>q("name",Y,t=>q("position",Ut,n=>Oe(new pl(e,t,n)))))}function Id(){return q("month",Ut,e=>q("year",Ut,t=>Oe(new Yi(e,t))))}function Fc(e){return Ce(l([["year",Wt(e.year)],["month",(()=>{let t=e.month,n=xt(t);return Wt(n)})()]]))}function Nd(e){return Ce(l([["month",Wt(e.month)],["year",Wt(e.year)]]))}function Zi(e){return Ce(l([["money_value",Wt(e.value)]]))}function Dc(e){return Ce(l([["id",te(e.id)],["amount",Zi(e.amount)],["category_id",te(e.category_id)],["date",Fc(e.date)]]))}function Rc(e){return Ce(l([["amount",Zi(e.amount)],["category_id",te(e.category_id)],["date",Fc(e.date)]]))}function Pd(e){if(e instanceof Xe){let t=e.target;return Ce(l([["type",te("monthly")],["money",Zi(t)]]))}else{let t=e.target,n=e.date;return Ce(l([["type",te("custom")],["money",Zi(t)],["date",Nd(n)]]))}}function Jc(e){return Ce(l([["id",te(e.id)],["name",te(e.name)],["target",Qa(e.target,Pd)],["inflow",Bu(e.inflow)],["group_id",te(e.group_id)]]))}function Md(){return q("month",Ut,t=>q("year",Ut,n=>Oe(new ar(n,Ye(t)))))}function _l(e){return Ce(l([["id",te(e.id)],["date",(()=>{let t=zc(e.date);return Wt(t)})()],["payee",te(e.payee)],["category_id",te(e.category_id)],["value",Zi(e.value)],["user_id",te(e.user_id)]]))}function po(){return q("money_value",Ut,t=>Oe(new N(t)))}function Ud(){let e=q("money",po(),r=>Oe(new Xe(r))),t=q("money",po(),r=>q("date",Id(),i=>Oe(new Ae(r,i))));return q("type",Y,r=>r==="monthly"?e:t)}function dl(){return q("id",Y,e=>q("name",Y,t=>q("target",Ra(Ud()),n=>q("inflow",Ga,r=>q("group_id",Y,i=>Oe(new yt(e,t,n,r,i)))))))}function Hc(){return Ka(Y,dl())}function Gc(){return q("id",Y,t=>q("amount",po(),n=>q("category_id",Y,r=>q("date",Md(),i=>Oe(new Xi(t,n,r,i))))))}function $l(){return q("id",Y,e=>q("date",Ut,t=>q("payee",Y,n=>q("category_id",Y,r=>q("value",po(),i=>q("user_id",Y,s=>Oe(new qr(e,Lc(t),n,r,i,s))))))))}function Br(e,t){return new N(e.value+t.value)}function Kc(e){let t=xt(e.month);return t===1?new ar(e.year-1,new Er):new ar(e.year,Ye(t-1))}function ml(e){let t=xt(e.month);return t===12?new ar(e.year+1,new Se):new ar(e.year,Ye(t+1))}function _o(){let e=Rt(),t=26,n=new ar(lr(e),Tr(e));return Hi(e)>t?ml(n):n}function Vc(e,t){return new N(he(e.value,t))}function hl(e){return new N(e*100)}function Qi(e){let t=er(e,0,1)==="-"?[-1,er(e,1,Qt(e))]:[1,e],n=t[0],r=t[1],i=(()=>{let s=Ts(r,",",".");return tr(s,".")})();if(i.atLeastLength(2)){let s=i.head,o=i.tail.head,u=Ee(s),a=(()=>{let p=qa(o,2,"0"),_=er(p,0,2);return Ee(_)})();if(u.isOk()&&a.isOk()){let c=u[0],p=a[0];return new N(n*(c*100+p))}else return new N(0)}else if(i.atLeastLength(1)){let s=i.head,o=Ee(s);if(o.isOk()){let u=o[0];return new N(n*u*100)}else return new N(0)}else return new N(0)}function Ir(e){let t=(()=>{let n=e.value;return Re(n)})();return(()=>{let n=he(t,100);return y(n)})()+"."+(()=>{let n=Ie(t,100);return y(n)})()}function Yc(e){let t=(()=>{let n=e.value;return Re(n)})();return"\u20AC"+(()=>{let n=he(t,100);return y(n)})()+"."+(()=>{let n=Ie(t,100);return y(n)})()}function Wd(e){return e.value<0?"-":""}function fr(e){return Wd(e)+"\u20AC"+Ir(e)}function Xc(e){return e.value===0}var es=class extends f{constructor(t){super(),this.all=t}};function Zc(e){return new es(l([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function bt(e){return Zc((t,n,r,i)=>e(t))}function b(){return new es(l([]))}function $o(e){return new es(ue(e,l([]),(t,n)=>{let r=n.all;return Xt(t,r)}))}var On=class extends f{constructor(t){super(),this.content=t}},re=class extends f{constructor(t,n,r,i,s,o,u){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}},ts=class extends f{constructor(t){super(),this.subtree=t}},Pr=class extends f{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}},rs=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}};function Hd(e){if(e instanceof Pr)return new m(void 0);{let t=e[0],n=e[1],r=Es(t,2);return new $([r,n])}}function Gd(e,t,n){return iu(e,t,(r,i,s)=>{let o=n+"-"+y(s);return Qc(i,r,o)})}function Qc(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof On)return i;if(r instanceof ts){let o=r.subtree;e=o(),t=i,n=s}else{let o=r.attrs,u=r.children,a=ue(o,i,(c,p)=>{let _=Hd(p);if(_.isOk()){let x=_[0][0],k=_[0][1];return Et(c,s+"-"+x,k)}else return c});return Gd(u,a,s)}}}function ef(e){return Qc(e,oe(),"0")}function ge(e,t){return new Pr(e,t,!1)}function Kd(e,t){return new Pr(e,t,!0)}function rf(e,t){return new rs("on"+e,t)}function B(e){return ge("style",ue(e,"",(t,n)=>{let r=n[0],i=n[1];return t+r+":"+i+";"}))}function w(e){return ge("class",e)}function kt(e){return ge("id",e)}function nf(e){return ge("role",e)}function ne(e){return ge("type",e)}function we(e){return ge("value",e)}function sf(e){return Kd("checked",e)}function xe(e){return ge("placeholder",e)}function of(e){return ge("for",e)}function ns(e){return ge("href",e)}function ye(e,t,n){return e==="area"?new re("","",e,t,l([]),!1,!0):e==="base"?new re("","",e,t,l([]),!1,!0):e==="br"?new re("","",e,t,l([]),!1,!0):e==="col"?new re("","",e,t,l([]),!1,!0):e==="embed"?new re("","",e,t,l([]),!1,!0):e==="hr"?new re("","",e,t,l([]),!1,!0):e==="img"?new re("","",e,t,l([]),!1,!0):e==="input"?new re("","",e,t,l([]),!1,!0):e==="link"?new re("","",e,t,l([]),!1,!0):e==="meta"?new re("","",e,t,l([]),!1,!0):e==="param"?new re("","",e,t,l([]),!1,!0):e==="source"?new re("","",e,t,l([]),!1,!0):e==="track"?new re("","",e,t,l([]),!1,!0):e==="wbr"?new re("","",e,t,l([]),!1,!0):new re("","",e,t,n,!1,!1)}function P(e){return new On(e)}var mo=class extends f{constructor(t){super(),this[0]=t}},ho=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},go=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}};function lf(e){return A(e.created,oe())&&A(e.removed,sc())&&A(e.updated,oe())}var wo=class extends f{constructor(t){super(),this[0]=t}},xo=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},is=class extends f{constructor(t){super(),this[0]=t}},vt=class extends f{constructor(t){super(),this[0]=t}},ss=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},yo=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}};var os=class extends f{},bo=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},ko=class extends f{constructor(t){super(),this[0]=t}},vo=class extends f{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function xl(e,t,n){let r,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:u}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),r??=s;else{let a=document.createTextNode(o.content);u.replaceChild(a,s),r??=a}else{let a=document.createTextNode(o.content);u.appendChild(a),r??=a}else if(o.tag!==void 0){let a=Xd({prev:s,next:o,dispatch:n,stack:i});s?s!==a&&u.replaceChild(a,s):u.appendChild(a),r??=a}}return r}function Xd({prev:e,next:t,dispatch:n,stack:r}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(us.has(o))u=us.get(o);else{let C=new Map;us.set(o,C),u=C}let a=s?new Set(u.keys()):null,c=s?new Set(Array.from(e.attributes,C=>C.name)):null,p=null,_=null,x=null;if(s&&t.tag==="textarea"){let C=t.children[Symbol.iterator]().next().value?.content;C!==void 0&&(o.value=C)}let k=[];for(let C of t.attrs){let j=C[0],ie=C[1];if(C.as_property)o[j]!==ie&&(o[j]=ie),s&&c.delete(j);else if(j.startsWith("on")){let _t=j.slice(2),Qo=n(ie,_t==="input");u.has(_t)||o.addEventListener(_t,ls),u.set(_t,Qo),s&&a.delete(_t)}else if(j.startsWith("data-lustre-on-")){let _t=j.slice(15),Qo=n(Zd);u.has(_t)||o.addEventListener(_t,ls),u.set(_t,Qo),o.setAttribute(j,ie),s&&(a.delete(_t),c.delete(j))}else j.startsWith("delegate:data-")||j.startsWith("delegate:aria-")?(o.setAttribute(j,ie),k.push([j.slice(10),ie])):j==="class"?p=p===null?ie:p+" "+ie:j==="style"?_=_===null?ie:_+ie:j==="dangerous-unescaped-html"?x=ie:(o.getAttribute(j)!==ie&&o.setAttribute(j,ie),(j==="value"||j==="selected")&&(o[j]=ie),s&&c.delete(j))}if(p!==null&&(o.setAttribute("class",p),s&&c.delete("class")),_!==null&&(o.setAttribute("style",_),s&&c.delete("style")),s){for(let C of c)o.removeAttribute(C);for(let C of a)u.delete(C),o.removeEventListener(C,ls)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let C of o.assignedElements())for(let[j,ie]of k)C.hasAttribute(j)||C.setAttribute(j,ie)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(x!==null)return o.innerHTML=x,o;let v=o.firstChild,U=null,D=null,ae=null,Be=Oo(t).next().value;if(s&&Be!==void 0&&Be.key!==void 0&&Be.key!==""){U=new Set,D=af(e),ae=af(t);for(let C of Oo(t))v=Qd(v,C,o,r,ae,D,U)}else for(let C of Oo(t))r.unshift({prev:v,next:C,parent:o}),v=v?.nextSibling;for(;v;){let C=v.nextSibling;o.removeChild(v),v=C}return o}var us=new WeakMap;function ls(e){let t=e.currentTarget;if(!us.has(t)){t.removeEventListener(e.type,ls);return}let n=us.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,ls);return}n.get(e.type)(e)}function Zd(e){let t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:n,data:i.reduce((s,o)=>{let u=o.split(".");for(let a=0,c=s,p=e;a<u.length;a++)a===u.length-1?c[u[a]]=p[u[a]]:(c[u[a]]??={},p=p[u[a]],c=c[u[a]]);return s},{data:r})}}function af(e){let t=new Map;if(e)for(let n of Oo(e)){let r=n?.key||n?.getAttribute?.("data-lustre-key");r&&t.set(r,n)}return t}function Qd(e,t,n,r,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let a=e.nextSibling;n.removeChild(e),e=a}if(s.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!u&&e!==null){let a=document.createTextNode("");return n.insertBefore(a,e),r.unshift({prev:a,next:t,parent:n}),e}return!u||u===e?(r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e):(n.insertBefore(u,e),r.unshift({prev:u,next:t,parent:n}),e)}function*Oo(e){for(let t of e.children)yield*cf(t)}function*cf(e){e.subtree!==void 0?yield*cf(e.subtree()):yield e}var yl=class e{static start({init:t,update:n,view:r},i,s){if(!as())return new m(new cs);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new m(new So(i));let u=new e(o,t(s),n,r);return new $(a=>u.send(a))}constructor(t,[n,r],i,s){this.root=t,this.#e=n,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(r.all.toArray(),!0),0)}root;send(t){if(t instanceof is){if(t[0]instanceof vo){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let n=this.#r(this.#e),r=(s,o=!1)=>u=>{let a=s(u);a instanceof $&&this.send(new vt(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));xl(i,n,r)}}else if(t instanceof vt){let n=t[0],r=t[1]??!1;this.#i.push(n),r?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof ss){let n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof os)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let n=this.#r(this.#e),r=(s,o=!1)=>u=>{let a=s(u);a instanceof $&&this.send(new vt(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));xl(i,n,r)}#o(t=[]){for(;this.#i.length>0;){let n=this.#i.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;){let n=t.shift(),r=u=>this.send(new vt(u)),i=(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),s=()=>{},o=this.root;n({dispatch:r,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},ff=yl.start;var bl=class e{static start({init:t,update:n,view:r,on_attribute_change:i},s){let o=new e(t(s),n,r,i);return new $(u=>o.send(u))}constructor([t,n],r,i,s){this.#e=t,this.#s=r,this.#i=i,this.#t=i(t),this.#l=s,this.#n=new Map,this.#o=ef(this.#t),this.#u(n.all.toArray())}send(t){if(t instanceof wo){for(let n of t[0]){let r=this.#l.get(n[0]);if(!r)continue;let i=r(n[1]);i instanceof m||this.#r.push(i)}this.#u()}else if(t instanceof xo)this.#r=this.#r.concat(t[0].toArray()),this.#u(t[1].all.toArray());else if(!(t instanceof is))if(t instanceof vt)this.#r.push(t[0]),this.#u();else if(t instanceof ss){let n=new ho(t[0],t[1]);for(let[r,i]of this.#n)i(n)}else if(t instanceof yo){let n=this.#o.get(t[0]);if(!n)return;let r=n(t[1]);if(r instanceof m)return;this.#r.push(r[0]),this.#u()}else if(t instanceof bo){let n=tu(this.#l),r=new go(n,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](r)}else t instanceof ko&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#l;#u(t=[]){this.#a(t);let n=this.#i(this.#e),r=elements(this.#t,n);if(!lf(r)){let i=new mo(r);for(let[s,o]of this.#n)o(i)}this.#t=n,this.#o=r.handlers}#a(t=[]){for(;this.#r.length>0;){let n=this.#r.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;)t.shift()({dispatch:u=>this.send(new vt(u)),emit:(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#a(t)}},e$=bl.start,as=()=>globalThis.window&&window.document;var kl=class extends f{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=i}};var So=class extends f{constructor(t){super(),this.selector=t}},cs=class extends f{};function pf(e,t,n){return new kl(e,t,n,new g)}function _f(e,t,n){return mn(!as(),new m(new cs),()=>ff(e,t,n))}var z=class extends f{constructor(t,n,r,i,s,o,u){super(),this.scheme=t,this.userinfo=n,this.host=r,this.port=i,this.path=s,this.query=o,this.fragment=u}};function n$(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function St(e,t){return new $((()=>{let n=t;return new z(n.scheme,n.userinfo,n.host,n.port,n.path,n.query,new d(e))})())}function i$(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s.startsWith("#")&&u===0){let a=s.slice(1);return St(a,o)}else if(s.startsWith("#")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(_.scheme,_.userinfo,_.host,_.port,_.path,new d(c),_.fragment)})();return St(a,p)}else{if(s==="")return new $((()=>{let a=o;return new z(a.scheme,a.userinfo,a.host,a.port,a.path,new d(i),a.fragment)})());{let c=Sr(s)[1];e=i,t=c,n=o,r=u+1}}}}function pr(e,t){return i$(e,e,t,0)}function s$(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s.startsWith("?")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(_.scheme,_.userinfo,_.host,_.port,c,_.query,_.fragment)})();return pr(a,p)}else if(s.startsWith("#")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(_.scheme,_.userinfo,_.host,_.port,c,_.query,_.fragment)})();return St(a,p)}else{if(s==="")return new $((()=>{let a=o;return new z(a.scheme,a.userinfo,a.host,a.port,i,a.query,a.fragment)})());{let c=Sr(s)[1];e=i,t=c,n=o,r=u+1}}}}function An(e,t){return s$(e,e,t,0)}function Ot(e,t,n){for(;;){let r=e,i=t,s=n;if(r.startsWith("0"))e=r.slice(1),t=i,n=s*10;else if(r.startsWith("1"))e=r.slice(1),t=i,n=s*10+1;else if(r.startsWith("2"))e=r.slice(1),t=i,n=s*10+2;else if(r.startsWith("3"))e=r.slice(1),t=i,n=s*10+3;else if(r.startsWith("4"))e=r.slice(1),t=i,n=s*10+4;else if(r.startsWith("5"))e=r.slice(1),t=i,n=s*10+5;else if(r.startsWith("6"))e=r.slice(1),t=i,n=s*10+6;else if(r.startsWith("7"))e=r.slice(1),t=i,n=s*10+7;else if(r.startsWith("8"))e=r.slice(1),t=i,n=s*10+8;else if(r.startsWith("9"))e=r.slice(1),t=i,n=s*10+9;else if(r.startsWith("?")){let o=r.slice(1),u=(()=>{let a=i;return new z(a.scheme,a.userinfo,a.host,new d(s),a.path,a.query,a.fragment)})();return pr(o,u)}else if(r.startsWith("#")){let o=r.slice(1),u=(()=>{let a=i;return new z(a.scheme,a.userinfo,a.host,new d(s),a.path,a.query,a.fragment)})();return St(o,u)}else if(r.startsWith("/")){let o=(()=>{let u=i;return new z(u.scheme,u.userinfo,u.host,new d(s),u.path,u.query,u.fragment)})();return An(r,o)}else return r===""?new $((()=>{let o=i;return new z(o.scheme,o.userinfo,o.host,new d(s),o.path,o.query,o.fragment)})()):new m(void 0)}}function Ao(e,t){if(e.startsWith(":0")){let n=e.slice(2);return Ot(n,t,0)}else if(e.startsWith(":1")){let n=e.slice(2);return Ot(n,t,1)}else if(e.startsWith(":2")){let n=e.slice(2);return Ot(n,t,2)}else if(e.startsWith(":3")){let n=e.slice(2);return Ot(n,t,3)}else if(e.startsWith(":4")){let n=e.slice(2);return Ot(n,t,4)}else if(e.startsWith(":5")){let n=e.slice(2);return Ot(n,t,5)}else if(e.startsWith(":6")){let n=e.slice(2);return Ot(n,t,6)}else if(e.startsWith(":7")){let n=e.slice(2);return Ot(n,t,7)}else if(e.startsWith(":8")){let n=e.slice(2);return Ot(n,t,8)}else if(e.startsWith(":9")){let n=e.slice(2);return Ot(n,t,9)}else{if(e.startsWith(":"))return new m(void 0);if(e.startsWith("?")){let n=e.slice(1);return pr(n,t)}else if(e.startsWith("#")){let n=e.slice(1);return St(n,t)}else return e.startsWith("/")?An(e,t):e===""?new $(t):new m(void 0)}}function $f(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s==="")return new $((()=>{let a=o;return new z(a.scheme,a.userinfo,new d(i),a.port,a.path,a.query,a.fragment)})());if(s.startsWith(":")){let a=pe(i,0,u),c=(()=>{let p=o;return new z(p.scheme,p.userinfo,new d(a),p.port,p.path,p.query,p.fragment)})();return Ao(s,c)}else if(s.startsWith("/")){let a=pe(i,0,u),c=(()=>{let p=o;return new z(p.scheme,p.userinfo,new d(a),p.port,p.path,p.query,p.fragment)})();return An(s,c)}else if(s.startsWith("?")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(_.scheme,_.userinfo,new d(c),_.port,_.path,_.query,_.fragment)})();return pr(a,p)}else if(s.startsWith("#")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(_.scheme,_.userinfo,new d(c),_.port,_.path,_.query,_.fragment)})();return St(a,p)}else{let c=Sr(s)[1];e=i,t=c,n=o,r=u+1}}}function o$(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s==="")return new $((()=>{let a=o;return new z(a.scheme,a.userinfo,new d(s),a.port,a.path,a.query,a.fragment)})());if(s.startsWith("]")&&u===0){let a=s.slice(1);return Ao(a,o)}else if(s.startsWith("]")){let a=s.slice(1),c=pe(i,0,u+1),p=(()=>{let _=o;return new z(_.scheme,_.userinfo,new d(c),_.port,_.path,_.query,_.fragment)})();return Ao(a,p)}else{if(s.startsWith("/")&&u===0)return An(s,o);if(s.startsWith("/")){let a=pe(i,0,u),c=(()=>{let p=o;return new z(p.scheme,p.userinfo,new d(a),p.port,p.path,p.query,p.fragment)})();return An(s,c)}else if(s.startsWith("?")&&u===0){let a=s.slice(1);return pr(a,o)}else if(s.startsWith("?")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(_.scheme,_.userinfo,new d(c),_.port,_.path,_.query,_.fragment)})();return pr(a,p)}else if(s.startsWith("#")&&u===0){let a=s.slice(1);return St(a,o)}else if(s.startsWith("#")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(_.scheme,_.userinfo,new d(c),_.port,_.path,_.query,_.fragment)})();return St(a,p)}else{let a=Sr(s),c=a[0],p=a[1];if(n$(c))e=i,t=p,n=o,r=u+1;else return $f(i,i,o,0)}}}}function u$(e,t){return o$(e,e,t,0)}function l$(e,t){return $f(e,e,t,0)}function Sn(e,t){if(e.startsWith("["))return u$(e,t);if(e.startsWith(":")){let n=(()=>{let r=t;return new z(r.scheme,r.userinfo,new d(""),r.port,r.path,r.query,r.fragment)})();return Ao(e,n)}else return e===""?new $((()=>{let n=t;return new z(n.scheme,n.userinfo,new d(""),n.port,n.path,n.query,n.fragment)})()):l$(e,t)}function a$(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s.startsWith("@")&&u===0){let a=s.slice(1);return Sn(a,o)}else if(s.startsWith("@")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(_.scheme,new d(c),_.host,_.port,_.path,_.query,_.fragment)})();return Sn(a,p)}else{if(s==="")return Sn(i,o);if(s.startsWith("/"))return Sn(i,o);if(s.startsWith("?"))return Sn(i,o);if(s.startsWith("#"))return Sn(i,o);{let c=Sr(s)[1];e=i,t=c,n=o,r=u+1}}}}function c$(e,t){return a$(e,e,t,0)}function vl(e,t){if(e==="//")return new $((()=>{let n=t;return new z(n.scheme,n.userinfo,new d(""),n.port,n.path,n.query,n.fragment)})());if(e.startsWith("//")){let n=e.slice(2);return c$(n,t)}else return An(e,t)}function f$(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s.startsWith("/")&&u===0)return vl(s,o);if(s.startsWith("/")){let a=pe(i,0,u),c=(()=>{let p=o;return new z(new d(Te(a)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment)})();return vl(s,c)}else if(s.startsWith("?")&&u===0){let a=s.slice(1);return pr(a,o)}else if(s.startsWith("?")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(new d(Te(c)),_.userinfo,_.host,_.port,_.path,_.query,_.fragment)})();return pr(a,p)}else if(s.startsWith("#")&&u===0){let a=s.slice(1);return St(a,o)}else if(s.startsWith("#")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(new d(Te(c)),_.userinfo,_.host,_.port,_.path,_.query,_.fragment)})();return St(a,p)}else{if(s.startsWith(":")&&u===0)return new m(void 0);if(s.startsWith(":")){let a=s.slice(1),c=pe(i,0,u),p=(()=>{let _=o;return new z(new d(Te(c)),_.userinfo,_.host,_.port,_.path,_.query,_.fragment)})();return vl(a,p)}else{if(s==="")return new $((()=>{let a=o;return new z(a.scheme,a.userinfo,a.host,a.port,i,a.query,a.fragment)})());{let c=Sr(s)[1];e=i,t=c,n=o,r=u+1}}}}}function p$(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return T(r);{let i=n.head,s=n.tail,o=i===""||i==="."?r:i===".."&&r.hasLength(0)?l([]):i===".."&&r.atLeastLength(1)?r.tail:h(i,r);e=s,t=o}}}function _$(e){return p$(e,l([]))}function Ol(e){return _$(tr(e,"/"))}function Sl(e){let t=(()=>{let u=e.fragment;if(u instanceof d){let a=u[0];return l(["#",a])}else return l([])})(),n=(()=>{let u=e.query;if(u instanceof d){let a=u[0];return h("?",h(a,t))}else return t})(),r=h(e.path,n),i=(()=>{let u=e.host,a=As(e.path,"/");if(u instanceof d&&!a&&u[0]!==""){let c=u[0];return h("/",r)}else return r})(),s=(()=>{let u=e.host,a=e.port;if(u instanceof d&&a instanceof d){let c=a[0];return h(":",h(y(c),i))}else return i})(),o=(()=>{let u=e.scheme,a=e.userinfo,c=e.host;if(u instanceof d&&a instanceof d&&c instanceof d){let p=u[0],_=a[0],x=c[0];return h(p,h("://",h(_,h("@",h(x,s)))))}else if(u instanceof d&&a instanceof g&&c instanceof d){let p=u[0],_=c[0];return h(p,h("://",h(_,s)))}else if(u instanceof d&&a instanceof d&&c instanceof g){let p=u[0];return h(p,h(":",s))}else if(u instanceof d&&a instanceof g&&c instanceof g){let p=u[0];return h(p,h(":",s))}else if(u instanceof g&&a instanceof g&&c instanceof d){let p=c[0];return h("//",h(p,s))}else return s})();return Qe(o)}var d$=new z(new g,new g,new g,new g,"",new g,new g);function mf(e){return f$(e,e,d$,0)}var $$={handle_external_links:!1,handle_internal_links:!0},gf=globalThis?.window?.location?.href,jl=()=>gf?new $(Al(new URL(gf))):new m(void 0),Ll=(e,t=$$)=>{document.addEventListener("click",n=>{let r=wf(n.target);if(r)try{let i=new URL(r.href),s=Al(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(n.preventDefault(),o||(window.history.pushState({},"",r.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",n=>{n.preventDefault();let r=new URL(window.location.href),i=Al(r);window.requestAnimationFrame(()=>{r.hash&&document.getElementById(r.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:n})=>{e(n)}),window.addEventListener("modem-replace",({detail:n})=>{e(n)})};var wf=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:wf(e.parentElement),Al=e=>new z(e.protocol?new d(e.protocol.slice(0,-1)):new g,new g,e.hostname?new d(e.hostname):new g,e.port?new d(Number(e.port)):new g,e.pathname,e.search?new d(e.search.slice(1)):new g,e.hash?new d(e.hash.slice(1)):new g);function xf(e){return bt(t=>mn(!as(),void 0,()=>Ll(n=>{let i=e(n);return t(i)})))}var jn=class extends f{},Ln=class extends f{},jo=class extends f{},Jt=class extends f{},Mr=class extends f{},Lo=class extends f{},zo=class extends f{},To=class extends f{},Eo=class extends f{};var Co=class extends f{},fs=class extends f{};function yf(e){return e instanceof zo?"connect":e instanceof Mr?"delete":e instanceof jn?"get":e instanceof jo?"head":e instanceof To?"options":e instanceof Eo?"patch":e instanceof Ln?"post":e instanceof Jt?"put":e instanceof Lo?"trace":e[0]}function bf(e){return e instanceof Co?"http":"https"}function kf(e){let t=Te(e);return t==="http"?new $(new Co):t==="https"?new $(new fs):new m(void 0)}var Fe=class extends f{constructor(t,n,r,i,s,o,u,a){super(),this.method=t,this.headers=n,this.body=r,this.scheme=i,this.host=s,this.port=o,this.path=u,this.query=a}};function Of(e){return new z(new d(bf(e.scheme)),new g,new d(e.host),e.port,e.path,e.query,new g)}function x$(e){return Le((()=>{let t=e.scheme,n=Tt(t,"");return kf(n)})(),t=>Le((()=>{let n=e.host;return bi(n,void 0)})(),n=>{let r=new Fe(new jn,l([]),"",t,n,e.port,e.path,e.query);return new $(r)}))}function zn(e,t,n){let r=su(e.headers,Te(t),n),i=e;return new Fe(i.method,r,i.body,i.scheme,i.host,i.port,i.path,i.query)}function Tn(e,t){let n=e.method,r=e.headers,i=e.scheme,s=e.host,o=e.port,u=e.path,a=e.query;return new Fe(n,r,t,i,s,o,u,a)}function Sf(e,t){let n=e;return new Fe(t,n.headers,n.body,n.scheme,n.host,n.port,n.path,n.query)}function At(e){let n=mf(e);return Le(n,x$)}var Ht=class extends f{constructor(t,n,r){super(),this.status=t,this.headers=n,this.body=r}};var En=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Bo(e){return Promise.resolve(En.wrap(e))}function jf(e,t){return e.then(n=>t(En.unwrap(n)))}function Io(e,t){return e.then(n=>En.wrap(t(En.unwrap(n))))}function zl(e,t){return e.catch(n=>t(n))}function Lf(e,t){return Io(e,r=>(t(r),r))}function No(e,t){return jf(e,r=>{if(r.isOk()){let i=r[0];return t(i)}else{let i=r[0];return Bo(new m(i))}})}async function Tf(e){try{return new $(await fetch(e))}catch(t){return new m(new Po(t.toString()))}}function Ef(e){return new Ht(e.status,R.fromArray([...e.headers]),e)}function Cf(e){let t=Sl(Of(e)),n=yf(e.method).toUpperCase(),r={headers:b$(e.headers),method:n};return n!=="GET"&&n!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function b$(e){let t=new globalThis.Headers;for(let[n,r]of e)t.append(n.toLowerCase(),r);return t}async function Tl(e){let t;try{t=await e.body.text()}catch{return new m(new Mo)}return new $(e.withFields({body:t}))}var Po=class extends f{constructor(t){super(),this[0]=t}},Mo=class extends f{};function qf(e){let n=Cf(e),r=Tf(n);return No(r,i=>Bo(new $(Ef(i))))}var Uo=class extends f{constructor(t){super(),this[0]=t}},El=class extends f{constructor(t){super(),this[0]=t}},Cl=class extends f{constructor(t){super(),this[0]=t}},Wo=class extends f{},ql=class extends f{},Bl=class extends f{constructor(t,n){super(),this[0]=t,this[1]=n}},Il=class extends f{},Nl=class extends f{constructor(t){super(),this.run=t}};function Pl(e,t,n){let r=qf(e),i=No(r,Tl),s=Io(i,u=>{if(u.isOk()){let a=u[0];return t.run(new $(a))}else return t.run(new m(new Wo))}),o=zl(s,u=>t.run(new m(new Wo)));Lf(o,n)}function Ur(e,t){return bt(n=>{let r=At(e);if(r.isOk()){let i=r[0];return Pl(i,t,n)}else return n(t.run(new m(new Uo(e))))})}function ps(e,t,n){return bt(r=>{let i=At(e);if(i.isOk()){let o=i[0],u=Sf(o,new Ln),a=zn(u,"Content-Type","application/json"),c=Tn(a,$n(t));return Pl(c,n,r)}else return r(n.run(new m(new Uo(e))))})}function Wr(e,t){return bt(n=>Pl(e,t,n))}function v$(e){if(e instanceof Ht&&200<=e.status&&e.status<=299){let t=e.status,n=e.body;return new $(n)}else{if(e instanceof Ht&&e.status===401)return new m(new Il);if(e instanceof Ht&&e.status===404)return new m(new ql);if(e instanceof Ht&&e.status===500){let t=e.body;return new m(new El(t))}else{let t=e.status,n=e.body;return new m(new Bl(t,n))}}}function de(e,t){return new Nl(n=>{let i=Le(n,v$),s=Le(i,o=>{let u=Za(o,e);if(u.isOk()){let a=u[0];return new $(a)}else{let a=u[0];return new m(new Cl(a))}});return t(s)})}import*as Bf from"node:crypto";function S$(){if(!globalThis.crypto?.getRandomValues)throw new Error("WebCrypto API not supported on this JavaScript runtime");return globalThis.crypto}function Ml(e){let t=new Uint8Array(e);return S$().getRandomValues(t),new K(t)}var Fo=class extends f{constructor(t){super(),this.value=t}};var Do=class extends f{};var Ul=class extends f{};function q$(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(s===8)e=i,t=s+1,n=o+u,r=u;else if(s===13)e=i,t=s+1,n=o+u,r=u;else if(s===18)e=i,t=s+1,n=o+u,r=u;else if(s===23)e=i,t=s+1,n=o+u,r=u;else if(i.bitSize>=4){let a=yi(i,0,4,!0,!1),c=hr(i,4),p=(()=>{let _=za(a);return Te(_)})();e=c,t=s+1,n=o+p,r=u}else return o}}var B$=2;var I$="urn:uuid:";function N$(e,t){let n=t instanceof Do?"-":"",r=t instanceof Ul?I$:"";return q$(e.value,0,r,n)}var P$=4;function M$(){let e=Ml(16);if(e.bitSize!=128)throw F("let_assert","youid/uuid",256,"v4","Pattern match failed, no pattern matched the value.",{value:e});let t=yi(e,0,48,!0,!1),n=yi(e,52,64,!0,!1),r=yi(e,66,128,!0,!1),i=Kt([gr(t,48,!0),gr(P$,4,!0),gr(n,12,!0),gr(B$,2,!0),gr(r,62,!0)]);return new Fo(i)}function Nf(){let e=M$();return N$(e,new Do)}var $k=new Fo(Kt([gr(0,128,!0)]));var pt=class extends f{},Fr=class extends f{},Ro=class extends f{},Bn=class extends f{constructor(t){super(),this.route=t}},In=class extends f{constructor(t,n,r){super(),this.users=t,this.cycle=n,this.initial_route=r}},Dr=class extends f{constructor(t){super(),this.id=t}},Rr=class extends f{constructor(t){super(),this.cats=t}},Jr=class extends f{constructor(t){super(),this.trans=t}},Hr=class extends f{constructor(t){super(),this.trans=t}},Gr=class extends f{constructor(t){super(),this.a=t}},_r=class extends f{constructor(t){super(),this.c=t}},Nn=class extends f{constructor(t){super(),this.u=t}},Pn=class extends f{constructor(t){super(),this.group_id=t}},Mn=class extends f{constructor(t){super(),this.cat_name=t}},Un=class extends f{constructor(t){super(),this.group_id=t}},Kr=class extends f{constructor(t){super(),this.c=t}},Wn=class extends f{},Fn=class extends f{constructor(t){super(),this.date=t}},Dn=class extends f{constructor(t){super(),this.payee=t}},Rn=class extends f{constructor(t){super(),this.cat=t}},Jn=class extends f{constructor(t){super(),this.amount=t}},Hn=class extends f{constructor(t){super(),this.is_inflow=t}},Vr=class extends f{constructor(t){super(),this.c=t}},Gn=class extends f{constructor(t){super(),this.c=t}},Kn=class extends f{constructor(t){super(),this.c=t}},Vn=class extends f{constructor(t){super(),this.c=t}},Yr=class extends f{constructor(t){super(),this.amount=t}},Xr=class extends f{constructor(t){super(),this.is_monthly=t}},Yn=class extends f{constructor(t){super(),this.date=t}},dr=class extends f{constructor(t){super(),this.a=t}},Xn=class extends f{constructor(t){super(),this.t=t}},Zn=class extends f{constructor(t,n){super(),this.t=t,this.category_name=n}},Qn=class extends f{},ei=class extends f{constructor(t){super(),this.t_id=t}},Zr=class extends f{constructor(t){super(),this.a=t}},Qr=class extends f{constructor(t){super(),this.a=t}},ti=class extends f{constructor(t){super(),this.p=t}},ri=class extends f{constructor(t){super(),this.d=t}},ni=class extends f{constructor(t){super(),this.c=t}},ii=class extends f{constructor(t){super(),this.a=t}},si=class extends f{constructor(t){super(),this.is_inflow=t}},oi=class extends f{constructor(t){super(),this.n=t}},ui=class extends f{constructor(t){super(),this.cat=t}},li=class extends f{},en=class extends f{constructor(t){super(),this.a=t}},ai=class extends f{constructor(t){super(),this.allocation=t}},$r=class extends f{constructor(t){super(),this[0]=t}},ci=class extends f{constructor(t){super(),this.amount=t}},tn=class extends f{constructor(t){super(),this.shift=t}},fi=class extends f{constructor(t){super(),this.show=t}},rn=class extends f{constructor(t,n,r){super(),this.cat=t,this.needed_amount=n,this.alloc=r}},pi=class extends f{},_i=class extends f{constructor(t){super(),this.name=t}},di=class extends f{},nn=class extends f{constructor(t){super(),this.c=t}},sn=class extends f{constructor(t){super(),this.c=t}},$i=class extends f{constructor(t){super(),this.cat=t}},Jo=class extends f{constructor(t){super(),this.group_name=t}},O=class extends f{constructor(t,n,r,i,s,o,u,a,c,p,_,x,k,v,U,D,ae,Be,C,j,ie){super(),this.current_user=t,this.all_users=n,this.cycle=r,this.route=i,this.cycle_end_day=s,this.show_all_transactions=o,this.categories_groups=u,this.categories=a,this.transactions=c,this.allocations=p,this.selected_category=_,this.show_add_category_ui=x,this.user_category_name_input=k,this.transaction_add_input=v,this.target_edit=U,this.selected_transaction=D,this.transaction_edit_form=ae,this.suggestions=Be,this.show_add_category_group_ui=C,this.new_category_group_name=j,this.category_group_change_input=ie}},mi=class extends f{constructor(t,n,r){super(),this.id=t,this.input_name=n,this.allocation=r}},jt=class extends f{constructor(t,n,r,i,s){super(),this.date=t,this.payee=n,this.category=r,this.amount=i,this.is_inflow=s}},hi=class extends f{},Ho=class extends f{},Gt=class extends f{constructor(t,n,r,i,s,o){super(),this.id=t,this.date=n,this.payee=r,this.category_name=i,this.amount=s,this.is_inflow=o}},Lt=class extends f{constructor(t,n,r){super(),this.cat_id=t,this.enabled=n,this.target=r}};function Go(e){return cl(e,"dd.MM.yyyy")}function Pf(e){return cl(e,"yyyy-MM-dd")}function _s(e){return Mc(e)}function Mf(e){return e instanceof Se?"January":e instanceof tt?"February":e instanceof rt?"March":e instanceof nt?"April":e instanceof it?"May":e instanceof st?"June":e instanceof ot?"July":e instanceof ut?"August":e instanceof lt?"September":e instanceof at?"October":e instanceof ct?"November":"December"}function Uf(e,t){return t instanceof Se?31:t instanceof tt?28:t instanceof rt?31:t instanceof nt?30:t instanceof it?31:t instanceof st?30:t instanceof ot||t instanceof ut?31:t instanceof lt?30:t instanceof at?31:t instanceof ct?30:31}function Wf(e){return e===1?new Se:e===2?new tt:e===3?new rt:e===4?new nt:e===5?new it:e===6?new st:e===7?new ot:e===8?new ut:e===9?new lt:e===10?new at:e===11?new ct:e===12?new Er:new Se}var Dl=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}};var Ko=class e extends Dl{static isResult(t){return t instanceof e}},Vo=class extends Ko{constructor(t){super(),this[0]=t}isOk(){return!0}},Yo=class extends Ko{constructor(t){super(),this[0]=t}isOk(){return!1}};function Ff(e){let t=window.localStorage.getItem(e);return t?new Vo(t):new Yo(void 0)}function Df(e,t){window.localStorage.setItem(e,t)}function Rf(e){let t=Ol(e.path);return t.hasLength(1)&&t.head==="transactions"?new Fr:t.hasLength(1)&&t.head==="user"?new Ro:new pt}function Jf(e){let t=Rf(e);return new Bn(t)}function Hf(){return bt(e=>{let t=new _r(new yt("f254cdd0-003d-48c3-8eed-77e86c99fcc0","Shopping2",new d(new Xe(new N(4e3))),!1,"bcd5d6e1-dd6e-44fd-8dd6-4dea104a8e0a"));return e(t)})}function Gf(e){return bt(t=>{let n=Ff(e),r=new Dr(n);return t(r)})}function Kf(e,t){return bt(n=>Df(e,t))}var W$=!0;function be(){return W$?"https://budget-be.fly.dev/":"http://localho.st:8080/"}function Vf(){let e=(()=>{let n=jl();if(n.isOk()){let r=n[0];return Rf(r)}else return new pt})(),t=dn(Uc());return Ur(be(),de(t,n=>new In(n,_o(),e)))}function Yf(e,t,n,r){let i=be()+"transaction/add",s=new qr(Nf(),(()=>{let o=e.date,u=_s(o);return ze(u,Rt())})(),e.payee,n.id,t,r.id);return ps(i,_l(s),de($l(),o=>new Vr(o)))}function Xf(e,t){let n=be()+"category/add";return ps(n,Ce(l([["name",te(e)],["group_id",te(t)]])),de(q("id",Y,r=>Oe(r)),r=>new Kr(r)))}function Xo(){let e=be()+"allocations",t=dn(Gc());return Ur(e,de(t,n=>new Gr(n)))}function ds(){let e=be()+"categories",t=dn(dl());return Ur(e,de(t,n=>new Rr(n)))}function gi(){let e=be()+"transactions",t=dn($l());return Ur(e,de(t,n=>new Jr(n)))}function Rl(){let e=be()+"category/groups",t=dn(Wc());return Ur(e,de(t,n=>new sn(n)))}function Zf(e){let t=be()+"category/group/add";return ps(t,Ce(l([["name",te(e)]])),de(q("id",Y,n=>Oe(n)),n=>new nn(n)))}function F$(e,t,n){let r=be()+"allocation/add";return ps(r,Rc(new fo(new g,e,t,n)),de(cr(),i=>new $r(i)))}function D$(e,t){let n=be()+"allocation/"+e.id,r=(()=>{let i=At(n);return Z(i,s=>{let o=s;return new Fe(new Jt,o.headers,o.body,o.scheme,o.host,o.port,o.path,o.query)})})();if(r.isOk()){let i=r[0];return Wr((()=>{let o=Tn(i,$n(Dc(new Xi(e.id,t,e.category_id,e.date))));return zn(o,"Content-Type","application/json")})(),de(cr(),s=>new $r(s)))}else return b()}function Jl(e,t,n,r){if(e instanceof d){let i=e[0];return D$(i,t)}else return F$(t,n,r)}function Qf(e){let t=be()+"category/"+e,n=(()=>{let r=At(t);return Z(r,i=>{let s=i;return new Fe(new Mr,s.headers,s.body,s.scheme,s.host,s.port,s.path,s.query)})})();if(n.isOk()){let r=n[0];return Wr(r,de(cr(),i=>new en(i)))}else return b()}function ep(e){let t=be()+"transaction/"+e.id,n=(()=>{let r=At(t);return Z(r,i=>{let s=i;return new Fe(new Jt,s.headers,s.body,s.scheme,s.host,s.port,s.path,s.query)})})();if(n.isOk()){let r=n[0];return Wr((()=>{let s=Tn(r,$n(_l(e)));return zn(s,"Content-Type","application/json")})(),de(cr(),i=>new Qr(i)))}else return b()}function tp(e){let t=be()+"transaction/"+e,n=(()=>{let r=At(t);return Z(r,i=>{let s=i;return new Fe(new Mr,s.headers,s.body,s.scheme,s.host,s.port,s.path,s.query)})})();if(n.isOk()){let r=n[0];return Wr(r,de(cr(),i=>new Zr(i)))}else return b()}function Zo(e,t){let n=be()+"category/"+e.id,r=(()=>{let i=At(n);return Z(i,s=>{let o=s;return new Fe(new Jt,o.headers,o.body,o.scheme,o.host,o.port,o.path,o.query)})})();if(r.isOk()){let i=r[0];return Wr((()=>{let o=Tn(i,$n(Jc((()=>{let u=e;return new yt(u.id,u.name,t,u.inflow,u.group_id)})())));return zn(o,"Content-Type","application/json")})(),de(cr(),s=>new dr(s)))}else return b()}function rp(e){let t=be()+"category/target/"+e.id,n=(()=>{let r=At(t);return Z(r,i=>{let s=i;return new Fe(new Jt,s.headers,s.body,s.scheme,s.host,s.port,s.path,s.query)})})();if(n.isOk()){let r=n[0];return Wr(r,de(cr(),i=>new dr(i)))}else return b()}function np(){let e=be()+"category/suggestions",t=Hc();return Ur(e,de(t,n=>new Hr(n)))}function E(e){return P(e)}function S(e,t){return ye("div",e,t)}function $s(e,t){return ye("a",e,t)}function Hl(e,t){return ye("table",e,t)}function Gl(e,t){return ye("tbody",e,t)}function X(e,t){return ye("td",e,t)}function on(e,t){return ye("th",e,t)}function Kl(e,t){return ye("thead",e,t)}function zt(e,t){return ye("tr",e,t)}function G(e,t){return ye("button",e,t)}function ms(e,t){return ye("datalist",e,t)}function $e(e){return ye("input",e,l([]))}function ip(e,t){return ye("label",e,t)}function wi(e,t){return ye("option",e,l([P(t)]))}function sp(e,t){return ye("select",e,t)}function Vl(e,t){return rf(e,t)}function W(e){return Vl("click",t=>new $(e))}function H$(e){let t=e;return Si("target",Si("value",pa))(t)}function me(e){return Vl("input",t=>{let n=H$(t);return Z(n,e)})}function G$(e){let t=e;return Si("target",Si("checked",_a))(t)}function op(e){return Vl("change",t=>{let n=G$(t);return Z(n,e)})}function V$(e){let t=e instanceof pt?["active",""]:e instanceof Fr?["","active"]:["",""],n=t[0],r=t[1];return S(l([w("btn-group "),B(l([["height","fit-content"]]))]),l([$s(l([ge("aria-current","page"),w("btn btn-primary "+n),ns("/")]),l([E("Budget")])),$s(l([w("btn btn-primary "+r),ns("/transactions")]),l([E("Transactions")]))]))}function Y$(e,t,n){return S(l([w("d-flex flex-row "+e),B(t)]),n())}function X$(e,t,n){return S(l([w("d-flex flex-column  p-1"+e),B(t)]),n())}function Z$(e){return X$("",l([]),e)}function Q$(e,t,n){let i=Bt(e,o=>A(o.date,t)),s=Ze(i,o=>o.category_id===n.id);return Vt(s)}function em(e){let t=e.selected_category,n=ee(t,r=>{let i=e.categories,s=Ze(i,o=>o.id===r.id);return Vt(s)});return ws(n)}function tm(e,t){let n=Ze(t,r=>r.id===e.category_id);return n.isOk()?n[0].name:"not found"}function rm(e){return(()=>{let t=e.month;return Mf(t)})()+" "+(()=>{let t=e.year;return y(t)})()}function nm(e){return S(l([w("d-flex flex-row")]),l([S(l([w("btn-group")]),(()=>{let t=e.all_users;return L(t,n=>{let r=e.current_user.id===n.id?"active":"";return $s(l([w("btn btn-primary"+r),ns("#"),W(new Nn(n))]),l([E(n.name)]))})})())]))}function im(e,t){let n=xt(t);return n===1?[e-1,12]:[e,n-1]}function ap(e,t){if(t instanceof g)return[Cr(e.year,e.month,1),Cr(e.year,e.month,Uf(e.year,e.month))];{let n=t[0],r=im(e.year,e.month),i=r[0],s=r[1];return[Cr(i,Wf(s),n+1),Cr(e.year,e.month,n)]}}function sm(e){let t=ap(e.cycle,e.cycle_end_day),n=t[0],r=t[1];return Go(n)+" - "+Go(r)}function om(e){return Y$("",l([["height","fit-content"]]),()=>l([G(l([w("btn btn-secondary mt-2 me-2"),B(l([["height","fit-content"]])),W(new tn(new hi))]),l([P("<")])),Z$(()=>l([S(l([w("text-center fs-4"),B(l([["justify-content","center"],["width","170px"]]))]),l([P((()=>{let t=e.cycle;return rm(t)})())])),S(l([w("text-start fs-6"),B(l([["width","200px"]]))]),l([P(sm(e))]))])),G(l([w("btn btn-secondary mt-2 "),B(l([["height","fit-content"]])),W(new tn(new Ho))]),l([P(">")]))]))}function hs(e){let t=ap(e.cycle,e.cycle_end_day),n=t[0],r=t[1];return Bt(e.transactions,i=>Nc(i.date,n,r))}function Yl(e,t){let r=Bt(t,i=>i.category_id===e.id);return ue(r,new N(0),(i,s)=>Br(i,s.value))}function um(e){let t=e.target instanceof Ae?["","active"]:["active",""],n=t[0],r=t[1];return S(l([ge("aria-label","Basic example"),nf("group"),w("btn-group mt-1")]),l([G(l([W(new Xr(!0)),w("btn btn-primary"+n),ne("button")]),l([E("Monthly")])),G(l([W(new Xr(!1)),w("btn btn-primary"+r),ne("button")]),l([E("Custom")]))]))}function cp(e,t){let n=Cr(t.year,Ye(t.month),28),r=Ic(new Gi,Rt(),n)+1;return Vc(e,r)}function fp(e){let t=e.target;if(t instanceof g)return new N(0);if(t instanceof d&&t[0]instanceof Ae){let n=t[0].target,r=t[0].date;return cp(n,r)}else return t[0].target}function lm(e,t,n,r){let i=It(r,c=>c.inflow?new $(c.id):new m("")),s=(()=>{let c=Bt(e,p=>sa(i,p.category_id));return ue(c,new N(0),(p,_)=>Br(p,_.value))})(),o=(()=>{let c=It(t,p=>A(p.date,n)?new $(p.amount):new m(""));return ue(c,new N(0),(p,_)=>Br(p,_))})(),u=new N(s.value-o.value);return fr(u)}function am(e){return S(l([w(" text-black rounded-3 p-2"),B(l([["width","200px"],["height","fit-content"],["background-color","rgb(187, 235, 156)"]]))]),l([S(l([w("text-center fs-3 fw-bold")]),l([P(lm(hs(e),e.allocations,e.cycle,e.categories))])),S(l([w("text-center")]),l([P("Ready to Assign")]))]))}function Xl(e,t,n){return S(l([w("ms-2"),w("form-check")]),l([$e(l([kt("flexCheckDefault"),op(n),ne("checkbox"),w("form-check-input"),sf(t)])),ip(l([of("flexCheckDefault"),w("form-check-label")]),l([E(e)]))]))}function pp(e,t,n,r){return t===e.id?S(l([w("mt-1")]),l([r?G(l([W(new Qn)]),l([P("Save")])):G(l([W(new Zn(e,n))]),l([P("Edit")])),G(l([w("ms-1"),W(new ei(e.id))]),l([P("Delete")]))])):E("")}function cm(e,t,n,r,i){return zt(l([w(n)]),l([X(l([]),l([$e(l([me(s=>new ri(s)),xe("date"),we(r.date),w("form-control"),ne("date"),B(l([["width","140px"]]))]))])),X(l([]),l([$e(l([me(s=>new ti(s)),xe("payee"),we(r.payee),w("form-control"),ne("text"),B(l([["width","160px"]])),ge("list","payees_list")])),ms(l([kt("payees_list")]),(()=>{let s=i.transactions,o=L(s,u=>u.payee);return L(o,u=>wi(l([we(u)]),""))})())])),X(l([]),l([$e(l([me(s=>new ni(s)),xe("category"),we(r.category_name),w("form-control"),ne("text"),B(l([["width","160px"]])),ge("list","categories_list")])),ms(l([kt("categories_list")]),(()=>{let s=i.categories,o=L(s,u=>u.name);return L(o,u=>wi(l([we(u)]),""))})())])),X(l([]),l([$e(l([me(s=>new ii(s)),xe("amount"),we(r.amount),w("form-control"),ne("text"),B(l([["width","160px"]]))])),Xl("is inflow",r.is_inflow,s=>new si(s)),(()=>{let s=(()=>{let o=i.selected_transaction;return Tt(o,"")})();return pp(e,s,t,!0)})()]))]))}function up(e,t){let n=(()=>{let a=t.selected_transaction;return Tt(a,"")})(),r=n===e.id?"table-active":"",s=(()=>{let a=t.transaction_edit_form,c=ee(a,p=>p.id);return Tt(c,"-1")})()===e.id,o=tm(e,t.categories),u=t.transaction_edit_form;if(s&&u instanceof d){let a=u[0];return cm(e,o,r,a,t)}else return zt(l([W(new Xn(e)),w(r)]),l([X(l([]),l([E(Go(e.date))])),X(l([]),l([E(e.payee)])),X(l([]),l([E(o)])),X(l([]),l([E((()=>{let a=e.value;return fr(a)})()),pp(e,n,o,!1)]))]))}function fm(e,t,n){return zt(l([]),l([X(l([]),l([$e(l([me(r=>new Fn(r)),xe("date"),kt("addTransactionDateId"),w("form-control"),ne("date"),we(n.date)]))])),X(l([]),l([$e(l([me(r=>new Dn(r)),xe("payee"),kt("addTransactionPayeeId"),w("form-control"),ne("text"),ge("list","payees_list"),we(n.payee)])),ms(l([kt("payees_list")]),(()=>{let i=L(e,o=>o.payee),s=oa(i);return L(s,o=>wi(l([we(o)]),""))})())])),X(l([]),l([sp(l([me(r=>new Rn(r)),w("form-select"),we((()=>{let r=n.category,i=ee(r,s=>s.name);return Tt(i,"")})())]),(()=>{let i=L(t,s=>s.name);return L(i,s=>wi(l([we(s)]),s))})())])),X(l([w("d-flex flex-row")]),l([$e(l([me(r=>new Jn(r)),xe("amount"),kt("addTransactionAmountId"),w("form-control"),ne("text"),B(l([["width","120px"]])),we(n.amount)])),Xl("is inflow",n.is_inflow,r=>new Hn(r)),G(l([w("ms-1"),W(new Wn)]),l([P("Add")]))]))]))}function pm(e){return S(l([w("d-flex flex-column flex-fill")]),l([Xl("Show all transactions",e.show_all_transactions,t=>new fi(t)),Hl(l([w("table table-sm table-hover")]),l([Kl(l([]),l([zt(l([]),l([on(l([]),l([E("Date")])),on(l([]),l([E("Payee")])),on(l([]),l([E("Category")])),on(l([]),l([E("Amount")]))]))])),Gl(l([]),Nt(l([l([fm(e.transactions,e.categories,e.transaction_add_input)]),(()=>{if(e.show_all_transactions){let n=e.transactions;return L(n,r=>up(r,e))}else{let n=hs(e);return L(n,r=>up(r,e))}})()])))]))]))}function Zl(e,t,n){let i=Bt(t,o=>A(o.date,n)),s=Bt(i,o=>o.category_id===e.id);return ue(s,new N(0),(o,u)=>Br(o,u.amount))}function _m(e,t,n){let r=fp(e),i=Zl(e,n.allocations,n.cycle),s=new N(i.value-r.value),o=new N(i.value+(()=>{let a=s.value;return Re(a)})());return s.value<0?S(l([w("mt-3")]),l([G(l([W(new rn(e,o,t))]),l([P("Allocate needed "+Ir(s))]))])):E("")}function dm(e,t,n){let r=Yl(e,hs(t)),i=Zl(e,t.allocations,t.cycle),s=Br(i,r);return s.value<0?S(l([w("mt-3")]),l([G(l([W(new rn(e,new N(i.value+(()=>{let u=s.value;return Re(u)})()),n))]),l([P("Cover overspent "+Ir(s))]))])):E("")}function lp(e,t){return S(l([w("ms-2 p-1"),B(l([["background-color",t],["width","fit-content"]]))]),l([E(e)]))}function $m(e,t){let n=fp(e),r=Yl(e,hs(t)),i=Zl(e,t.allocations,t.cycle),s=Br(i,r),o=Xc(s)?"rgb(137, 143, 138)":s.value<0?"rgb(231, 41, 12)":"rgba(64,185,78,1)",u=new N(i.value-n.value),a=u.value<0?lp(" Add more "+Yc(u),"rgb(235, 199, 16)"):E("");return S(l([w("d-flex flex-row")]),l([lp(fr(s),o),a]))}function mm(e,t,n){let i=Bt(e,s=>!s.inflow&&s.group_id===n.id);return L(i,s=>{let o=(()=>{let u=t.selected_category;return u instanceof g?"":u[0].id===s.id?"table-active":""})();return zt(l([W(new _r(s)),w(o)]),l([X(l([]),l([E(s.name)])),X(l([]),l([$m(s,t)]))]))})}function hm(e,t){let n=(()=>{let a=t.show_add_category_ui;if(a instanceof d){let c=a[0];return e.id===c}else return!1})(),r=n?zt(l([]),l([X(l([]),l([$e(l([me(a=>new Mn(a)),xe("category name"),kt("exampleFormControlInput1"),w("form-control"),ne("text")]))])),X(l([]),l([G(l([W(new Un(e.id))]),l([P("Add")]))]))])):E(""),i=(()=>{let a=n?"-":"+";return G(l([w("ms-1"),W(new Pn(e.id))]),l([P(a)]))})(),s=zt(l([B(l([["background-color","rgb(199, 208, 201)"]]))]),l([X(l([]),l([E(e.name),i])),X(l([]),l([]))])),o=mm(t.categories,t,e),u=xs(o,r);return xs(u,s)}function gm(e,t){return nu(e,r=>hm(r,t))}function wm(e){let t=e.selected_category instanceof g?"":"w-75";return Hl(l([w(t+" table table-sm table-hover")]),l([Kl(l([]),l([zt(l([]),l([on(l([]),l([E("Categories groups"),(()=>{let n=e.show_add_category_group_ui?"-":"+";return G(l([w("ms-2"),W(new pi)]),l([P(n)]))})()])),on(l([]),l([E("Balance")]))]))])),Gl(l([]),(()=>{let n=gm(e.categories_groups,e),r=e.show_add_category_group_ui?l([zt(l([]),l([X(l([]),l([$e(l([me(s=>new _i(s)),xe("Category group name"),w("form-control"),ne("text")]))])),X(l([]),l([G(l([W(new di)]),l([P("Create group")]))]))]))]):l([]);return Nt(l([r,n]))})())]))}function xm(e){return(()=>{let t=e.month,n=y(t);return Ue(n,2,"0")})()+"."+(()=>{let t=e.year,n=y(t);return Ue(n,2,"0")})()}function ym(e){let t=e.target;if(t instanceof g)return"";if(t instanceof d&&t[0]instanceof Ae){let n=t[0].target,r=t[0].date;return"Monthly: "+(()=>{let i=cp(n,r);return fr(i)})()+`
 till date: `+xm(r)+" Total amount: "+fr(n)}else{let n=t[0].target;return"Monthly: "+fr(n)}}var _p="rgb(227, 216, 241)";function bm(e,t){return S(l([w("rounded-3 p-2 mt-3"),B(l([["height","fit-content"],["background-color",_p]]))]),l([$e(l([me(n=>new oi(n)),xe("category name"),w("form-control"),ne("text"),B(l([["width","200px"]])),we(t.input_name),w("mb-2")])),G(l([w("me-3"),W(new ui(e))]),l([P("Update")])),G(l([W(new li)]),l([P("Delete")]))]))}function km(e,t){return S(l([w("mt-3 rounded-3 p-2"),B(l([["background-color",_p]]))]),l([E("Change group"),$e(l([me(n=>new Jo(n)),xe("group"),w("form-control"),ne("text"),B(l([["width","160px"]])),ge("list","group_list")])),ms(l([kt("group_list")]),(()=>{let n=t.categories_groups,r=L(n,i=>i.name);return L(r,i=>wi(l([we(i)]),""))})()),G(l([w("mt-1"),W(new $i(e))]),l([P("Change group")]))]))}var dp="rgb(134, 217, 192)";function vm(e,t){return S(l([w("mt-3 rounded-3 p-2"),B(l([["background-color",dp]]))]),l([E("Allocated: "),$e(l([me(n=>new ci(n)),xe("amount"),w("form-control"),ne("text"),B(l([["width","120px"]])),we(e.allocation)])),G(l([w("mt-1"),W(new ai(t))]),l([P("Save")]))]))}function Om(e,t){return S(l([w("mt-3 rounded-3 p-2 col mt-3"),B(l([["background-color",dp]]))]),(()=>{let n=t.cat_id;return t.enabled?l([S(l([]),l([E("Target"),G(l([w("ms-3 me-1"),W(new Kn(e))]),l([P("Save")])),G(l([W(new Vn(e))]),l([P("Delete")]))])),um(t),t.target instanceof Ae?S(l([w("mt-1")]),l([E("Amount needed for date: "),$e(l([me(s=>new Yr(s)),xe("amount"),w("form-control"),ne("text"),B(l([["width","120px"]]))])),$e(l([me(s=>new Yn(s)),xe("date"),w("form-control mt-1"),ne("date")]))])):S(l([w("mt-1")]),l([E("Amount monthly: "),$e(l([me(s=>new Yr(s)),xe("amount"),w("form-control"),ne("text"),B(l([["width","120px"]])),B(l([["width","120px"]])),B(l([["width","120px"]]))]))]))]):l([S(l([]),l([E("Target"),G(l([w("ms-3"),W(new Gn(e))]),l([P("Edit")]))])),S(l([w("mt-2")]),l([E(ym(e))]))])})())}var Sm="rgb(197, 219, 212)";function Am(e,t){return S(l([w("mt-3 rounded-3 p-2"),B(l([["background-color",Sm]]))]),l([S(l([w("col")]),l([S(l([]),l([E("Activity")])),S(l([]),l([E((()=>{let n=Yl(e,hs(t));return fr(n)})())]))]))]))}function jm(e,t,n,r){return S(l([w("col p-3")]),l([Am(e,t),Om(e,t.target_edit),vm(n,r),_m(e,r,t),dm(e,t,r),bm(e,n),km(e,t)]))}function Lm(e){let t=em(e),n=e.route,r=e.selected_category;if(t instanceof d&&n instanceof pt&&r instanceof d){let i=t[0],s=r[0];return jm(i,e,s,Q$(e.allocations,e.cycle,i))}else return E("")}function $p(e){return S(l([w("container-fluid")]),l([S(l([w("col")]),l([S(l([w("d-flex flex-row p-3")]),l([om(e),S(l([w("d-flex flex-row  justify-content-center"),B(l([["width","100%"]]))]),l([am(e)])),S(l([w("d-flex align-items-center fs-5"),B(l([]))]),l([$s(l([w("text-dark text-decoration-none"),ns("/user")]),l([E(e.current_user.name)]))]))])),S(l([w("d-flex flex-row")]),l([V$(e.route)])),S(l([w("d-flex flex-row")]),l([(()=>{let t=e.route;return t instanceof pt?wm(e):t instanceof Fr?pm(e):nm(e)})(),S(l([]),l([Lm(e)]))]))]))]))}function Tm(e){return[new O(new Vi("initial","Initial"),l([]),_o(),new pt,new d(26),!1,l([]),l([]),l([]),l([]),new g,new g,"",new jt("","",new g,"",!1),new Lt("",!1,new Xe(new N(0))),new g,new g,oe(),!1,"",""),$o(l([xf(Jf),Vf(),Hf()]))]}function Em(e){let t=(()=>{let r=e.amount;return Qi(r)})(),n=e.is_inflow?1:-1;return new N((()=>{let r=t.value;return Re(r)})()*n)}function Cm(e){return e.value}function qm(e,t,n){let r=(()=>{let u=e.date,a=_s(u);return Vt(a)})(),i=e.is_inflow?1:-1,s=new N((()=>{let u=e.amount,a=Qi(u);return Cm(a)})()*i),o=(()=>{let a=Ze(t,c=>c.name===e.category_name);return Vt(a)})();if(r instanceof d&&o instanceof d){let u=r[0],a=o[0];return new d(new qr(e.id,u,e.payee,a.id,s,n.id))}else return new g}function mp(e){return new Yi(lo(e),lr(e))}function Bm(e,t,n){return Ze(n,i=>i.category_id===e&&A(i.date,t))}function Im(e,t){if(Iu(t),t instanceof Bn){let n=t.route;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,n,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof In){let n=t.users,r=t.cycle,i=t.initial_route;if(n.isOk()){let s=n[0];return[(()=>{let o=e;return new O(o.current_user,s,r,i,o.cycle_end_day,o.show_all_transactions,o.categories_groups,o.categories,o.transactions,o.allocations,o.selected_category,o.show_add_category_ui,o.user_category_name_input,o.transaction_add_input,o.target_edit,o.selected_transaction,o.transaction_edit_form,o.suggestions,o.show_add_category_group_ui,o.new_category_group_name,o.category_group_change_input)})(),$o(l([Rl(),ds(),gi(),Xo(),Gf("current_user_id"),np()]))]}else return[e,b()]}else if(t instanceof Dr&&t.id.isOk()){let n=t.id[0],r=(()=>{let i=e.all_users;return Ze(i,s=>s.id===n)})();if(r.isOk()){let i=r[0];return[(()=>{let s=e;return new O(i,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,s.transaction_add_input,s.target_edit,s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,s.category_group_change_input)})(),b()]}else return[e,b()]}else{if(t instanceof Dr&&!t.id.isOk())return[e,b()];if(t instanceof Rr&&t.cats.isOk()){let n=t.cats[0];return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,n,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),gi()]}else{if(t instanceof Rr&&!t.cats.isOk())return[e,b()];if(t instanceof Jr&&t.trans.isOk()){let n=t.trans[0];return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,bs(n,(s,o)=>ll(o.date,s.date)),r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof Jr&&!t.trans.isOk())return[e,b()];if(t instanceof Gr&&t.a.isOk()){let n=t.a[0];return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,n,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof Gr&&!t.a.isOk())return[e,b()];if(t instanceof _r){let n=t.c;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,new d(new mi(n.id,n.name,(()=>{let i=Bm(n.id,e.cycle,e.allocations),s=Z(i,o=>{let u=o.amount;return Ir(u)});return ze(s,"")})())),r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,(()=>{let i=e.categories_groups,s=Ze(i,u=>u.id===n.group_id),o=Z(s,u=>u.name);return ze(o,"")})())})(),b()]}else if(t instanceof Nn){let n=t.u;return[(()=>{let r=e;return new O(n,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),Kf("current_user_id",n.id)]}else if(t instanceof Pn){let n=t.group_id;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,(()=>{let i=e.show_add_category_ui;return i instanceof g?new d(n):i[0]===n?new g:new d(n)})(),r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof Un){let n=t.group_id;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,"",r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),Xf(e.user_category_name_input,n)]}else if(t instanceof Mn){let n=t.cat_name;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,n,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof Kr&&t.c.isOk())return[e,ds()];if(t instanceof Kr&&!t.c.isOk())return[e,b()];if(t instanceof Wn){let n=e.transaction_add_input.category,r=(()=>{let i=e.transaction_add_input.amount;return Qi(i)})();if(n instanceof d){let i=n[0];return[(()=>{let s=e;return new O(s.current_user,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,new jt(e.transaction_add_input.date,"",new g,"",!1),s.target_edit,s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,s.category_group_change_input)})(),Yf(e.transaction_add_input,(()=>{let s=e.transaction_add_input;return Em(s)})(),i,e.current_user)]}else return[e,b()]}else if(t instanceof Vr&&t.c.isOk()){let n=t.c[0];return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,(()=>{let i=Nt(l([e.transactions,l([n])]));return bs(i,(s,o)=>ll(o.date,s.date))})(),r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof Vr&&!t.c.isOk())return[e,b()];if(t instanceof Rn){let n=t.cat,r=(()=>{let i=e.categories,s=Ze(i,o=>o.name===n);return Vt(s)})();return[(()=>{let i=e;return new O(i.current_user,i.all_users,i.cycle,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,(()=>{let s=e.transaction_add_input;return new jt(s.date,s.payee,r,s.amount,s.is_inflow)})(),i.target_edit,i.selected_transaction,i.transaction_edit_form,i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),b()]}else if(t instanceof Fn){let n=t.date;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,(()=>{let i=e.transaction_add_input;return new jt(n,i.payee,i.category,i.amount,i.is_inflow)})(),r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof Dn){let n=t.payee,r=(()=>{let i=e.suggestions;return Ct(i,n)})();return[(()=>{let i=e;return new O(i.current_user,i.all_users,i.cycle,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,(()=>{let s=e.transaction_add_input;return new jt(s.date,n,Vt(r),s.amount,s.is_inflow)})(),i.target_edit,i.selected_transaction,i.transaction_edit_form,i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),b()]}else if(t instanceof Jn){let n=t.amount;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,(()=>{let i=e.transaction_add_input;return new jt(i.date,i.payee,i.category,n,i.is_inflow)})(),r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof Hn){let n=t.is_inflow;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,(()=>{let i=e.transaction_add_input;return new jt(i.date,i.payee,i.category,i.amount,n)})(),r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof Gn)return[(()=>{let n=e;return new O(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,n.selected_category,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,(()=>{let r=e.target_edit;return new Lt(r.cat_id,!0,r.target)})(),n.selected_transaction,n.transaction_edit_form,n.suggestions,n.show_add_category_group_ui,n.new_category_group_name,n.category_group_change_input)})(),b()];if(t instanceof Kn){let n=t.c;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,(()=>{let i=e.target_edit;return new Lt(i.cat_id,!1,i.target)})(),r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),Zo(n,(()=>{let r=e.target_edit.target;return new d(r)})())]}else if(t instanceof Vn){let n=t.c;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,(()=>{let i=e.target_edit;return new Lt(i.cat_id,!1,i.target)})(),r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),rp(n)]}else if(t instanceof Yr){let n=t.amount,r=(()=>{let o=Ee(n);return ze(o,0)})(),i=(()=>{let s=e.target_edit.target;if(s instanceof Ae){let o=s.date;return new Ae(hl(r),o)}else return new Xe(hl(r))})();return[(()=>{let s=e;return new O(s.current_user,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,s.transaction_add_input,(()=>{let o=e.target_edit;return new Lt(o.cat_id,o.enabled,i)})(),s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,s.category_group_change_input)})(),b()]}else if(t instanceof Xr){let n=t.is_monthly,r=(()=>{let i=e.target_edit.target;if(i instanceof Ae&&n){let s=i.target;return new Xe(s)}else if(i instanceof Xe&&!n){let s=i.target;return new Ae(s,mp(Rt()))}else return i})();return[(()=>{let i=e;return new O(i.current_user,i.all_users,i.cycle,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,i.transaction_add_input,(()=>{let s=e.target_edit;return new Lt(s.cat_id,s.enabled,r)})(),i.selected_transaction,i.transaction_edit_form,i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),b()]}else if(t instanceof Yn){let n=t.date,r=(()=>{let s=_s(n);return ca(s,()=>Rt())})(),i=(()=>{let s=e.target_edit.target;if(s instanceof Ae){let o=s.target;return new Ae(o,mp(r))}else{let o=s.target;return new Xe(o)}})();return[(()=>{let s=e;return new O(s.current_user,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,s.transaction_add_input,(()=>{let o=e.target_edit;return new Lt(o.cat_id,o.enabled,i)})(),s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,s.category_group_change_input)})(),b()]}else{if(t instanceof dr&&t.a.isOk())return[e,ds()];if(t instanceof dr&&!t.a.isOk())return[e,b()];if(t instanceof Xn){let n=t.t;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,new d(n.id),r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof ei){let n=t.t_id;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,new g,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),tp(n)]}else if(t instanceof Zn){let n=t.t,r=t.category_name;return[(()=>{let i=e;return new O(i.current_user,i.all_users,i.cycle,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,i.transaction_add_input,i.target_edit,i.selected_transaction,new d(new Gt(n.id,(()=>{let s=n.date;return Pf(s)})(),n.payee,r,(()=>{let s=n.value;return Ir(s)})(),n.value.value>=0)),i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),b()]}else{if(t instanceof Zr&&t.a.isOk())return[e,gi()];if(t instanceof Zr&&!t.a.isOk())return[e,b()];if(t instanceof Qr&&t.a.isOk())return[e,gi()];if(t instanceof Qr&&!t.a.isOk())return[e,b()];if(t instanceof ti){let n=t.p;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return ee(i,s=>{let o=s;return new Gt(o.id,o.date,n,o.category_name,o.amount,o.is_inflow)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof ri){let n=t.d;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return ee(i,s=>{let o=s;return new Gt(o.id,n,o.payee,o.category_name,o.amount,o.is_inflow)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof ii){let n=t.a;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return ee(i,s=>{let o=s;return new Gt(o.id,o.date,o.payee,o.category_name,n,o.is_inflow)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof si){let n=t.is_inflow;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return ee(i,s=>{let o=s;return new Gt(o.id,o.date,o.payee,o.category_name,o.amount,n)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof ni){let n=t.c;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,(()=>{let i=e.transaction_edit_form;return ee(i,s=>{let o=s;return new Gt(o.id,o.date,o.payee,n,o.amount,o.is_inflow)})})(),r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof Qn)return[(()=>{let n=e;return new O(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,n.selected_category,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,n.target_edit,new g,new g,n.suggestions,n.show_add_category_group_ui,n.new_category_group_name,n.category_group_change_input)})(),(()=>{let n=(()=>{let r=e.transaction_edit_form,i=ee(r,s=>qm(s,e.categories,e.current_user));return ws(i)})();if(n instanceof g)return b();{let r=n[0];return ep(r)}})()];if(t instanceof li)return[(()=>{let n=e;return new O(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,new g,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,n.target_edit,n.selected_transaction,n.transaction_edit_form,n.suggestions,n.show_add_category_group_ui,n.new_category_group_name,n.category_group_change_input)})(),(()=>{let n=e.selected_category;if(n instanceof g)return b();{let r=n[0];return Qf(r.id)}})()];if(t instanceof ui){let n=t.cat;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,new g,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),(()=>{let r=e.selected_category;if(r instanceof d){let i=r[0];return Zo((()=>{let s=n;return new yt(s.id,i.input_name,s.target,s.inflow,s.group_id)})(),n.target)}else return b()})()]}else if(t instanceof oi){let n=t.n;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,(()=>{let i=e.selected_category;return ee(i,s=>{let o=s;return new mi(o.id,n,o.allocation)})})(),r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof en&&t.a.isOk())return[e,ds()];if(t instanceof en&&!t.a.isOk())return[e,b()];if(t instanceof ai){let n=t.allocation;return[e,(()=>{let r=e.selected_category;if(r instanceof d){let i=r[0];return Jl(n,(()=>{let s=i.allocation;return Qi(s)})(),i.id,e.cycle)}else return b()})()]}else{if(t instanceof $r&&t[0].isOk())return[e,Xo()];if(t instanceof $r&&!t[0].isOk())return[e,b()];if(t instanceof ci){let n=t.amount;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,(()=>{let i=e.selected_category;return ee(i,s=>{let o=s;return new mi(o.id,o.input_name,n)})})(),r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof tn){let n=t.shift,r=n instanceof hi?Kc(e.cycle):ml(e.cycle);return[(()=>{let i=e;return new O(i.current_user,i.all_users,r,i.route,i.cycle_end_day,i.show_all_transactions,i.categories_groups,i.categories,i.transactions,i.allocations,i.selected_category,i.show_add_category_ui,i.user_category_name_input,i.transaction_add_input,i.target_edit,i.selected_transaction,i.transaction_edit_form,i.suggestions,i.show_add_category_group_ui,i.new_category_group_name,i.category_group_change_input)})(),$o(l([gi(),Xo()]))]}else if(t instanceof fi){let n=t.show;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,n,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else if(t instanceof Hr&&t.trans.isOk()){let n=t.trans[0];return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,n,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof Hr&&!t.trans.isOk())return[e,b()];if(t instanceof rn){let n=t.cat,r=t.needed_amount,i=t.alloc;return[e,Jl(i,r,n.id,e.cycle)]}else{if(t instanceof pi)return[(()=>{let n=e;return new O(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,n.selected_category,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,n.target_edit,n.selected_transaction,n.transaction_edit_form,n.suggestions,!e.show_add_category_group_ui,n.new_category_group_name,n.category_group_change_input)})(),b()];if(t instanceof _i){let n=t.name;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,n,r.category_group_change_input)})(),b()]}else{if(t instanceof di)return[e,Zf(e.new_category_group_name)];if(t instanceof nn&&t.c.isOk())return[(()=>{let n=e;return new O(n.current_user,n.all_users,n.cycle,n.route,n.cycle_end_day,n.show_all_transactions,n.categories_groups,n.categories,n.transactions,n.allocations,n.selected_category,n.show_add_category_ui,n.user_category_name_input,n.transaction_add_input,n.target_edit,n.selected_transaction,n.transaction_edit_form,n.suggestions,!1,"",n.category_group_change_input)})(),Rl()];if(t instanceof nn&&!t.c.isOk())return[e,b()];if(t instanceof sn&&t.c.isOk()){let n=t.c[0];return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,n,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,r.category_group_change_input)})(),b()]}else{if(t instanceof sn&&!t.c.isOk())return[e,b()];if(t instanceof $i){let n=t.cat,r=(()=>{let i=e.categories_groups;return Ze(i,s=>s.name===e.category_group_change_input)})();if(r.isOk()){let i=r[0];return[(()=>{let s=e;return new O(s.current_user,s.all_users,s.cycle,s.route,s.cycle_end_day,s.show_all_transactions,s.categories_groups,s.categories,s.transactions,s.allocations,s.selected_category,s.show_add_category_ui,s.user_category_name_input,s.transaction_add_input,s.target_edit,s.selected_transaction,s.transaction_edit_form,s.suggestions,s.show_add_category_group_ui,s.new_category_group_name,"")})(),Zo((()=>{let s=n;return new yt(s.id,s.name,s.target,s.inflow,i.id)})(),n.target)]}else return[e,b()]}else{let n=t.group_name;return[(()=>{let r=e;return new O(r.current_user,r.all_users,r.cycle,r.route,r.cycle_end_day,r.show_all_transactions,r.categories_groups,r.categories,r.transactions,r.allocations,r.selected_category,r.show_add_category_ui,r.user_category_name_input,r.transaction_add_input,r.target_edit,r.selected_transaction,r.transaction_edit_form,r.suggestions,r.show_add_category_group_ui,r.new_category_group_name,n)})(),b()]}}}}}}}}}}}}}}}}}}function hp(){let e=pf(Tm,Im,$p),t=_f(e,"#app",void 0);if(!t.isOk())throw F("let_assert","budget_fe",22,"main","Pattern match failed, no pattern matched the value.",{value:t})}hp();
